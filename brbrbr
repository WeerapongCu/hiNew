-- ตัวแปรสำหรับรายชื่อผู้เล่น
local SENDER_LIST = {'Orianapthwn05229', 'Kevynmqzaf20502', 'Helsarxpuj33756', 'Ruthkewkh27593', 'Shanirjflc62001',
                     'Lishakjnlf49373', 'Esmeqvfgv68086', 'Marylbzgyu1750', 'Sisileshhnp95734', 'Fredaffuxp52771',
                     'Graybeuxt93894', 'Barbrawzxio46981', 'Mauraqmpaq51554', 'Aliglfoh12376', 'Kathymjjwp87256',
                     'Lindicrnex30836', 'Normavrbkc29659', 'MinerShadow87230', 'FusionDawn63254', 'GabrielVenom85067',
                     'GhostStorm1098', 'Penelope911Hyper6017', 'CodeAlpha4438', 'Alexan_derAlpha9848',
                     'SavannahTurbo9861', 'RiderStar2048', 'MoonG_hostCyber28', 'ByteStarSilver563521',
                     'AlexanderPh_oenix506', 'SparkAlphaFrost96423', 'RiderWolfPrism7777', 'LightWolf610826',
                     'FrostCrystal9815', 'EagleTurbo5510', 'CyberLight4879', 'LeviDawn582Miner1178',
                     'AllisonShadow73360', 'Silver818Byte7962', 'WyattAce55593', 'Scarlett641Dawn', 'Drift178Turbo6351',
                     'EllieMystic948220', 'Jack923Mystic1296', 'Adriapyhqw30514', 'Cindraategj12486', 'Reewntdr70736',
                     'Margetmsnyp59964', 'Kareireuc88909', 'Dahliacbohy03174', 'Fifineclact30239', 'Romyzeauu30977',
                     'Debmqecc01888', 'Jeweltpfan62229', 'Milzierzror79023', 'Carlynzvfda12390', 'Mickieppokt94217',
                     'Amieuwvtb38646', 'Traceedyvxv26266', 'Cyndekirsk37972', 'Nettaswksh36689', 'Maigarnoqp17170',
                     'Marjakmzpu65802', 'Josygvwbn13349', 'Neilakxwev21102', 'Reabfkjo12862', 'Shellmnnak44887',
                     'Yokocynpm55632', 'Corirjfvj48065', 'Allisggfhf68769', 'Drucyuijik02321', 'Lindsykztyv40530',
                     'Angeuhrkj30645', 'Heidimemdg98476', 'Siselyaigbg49942', 'Drediqovmz30840', 'Bobbeqrdjw75211',
                     'Casskzzse59682', 'Lauribmdqk13577', 'Madleniygcv20955', 'Leannapyfrx48063', 'Fionnanbcrt42392',
                     'Sareeuguyc08840', 'Kirbyjonau19339', 'Minniemgoio39913', 'Sadievfghu84177', 'Maiblexhbpv94799',
                     'Toniznawh50355', 'Jenneegjmoz61278', 'Sarahhfzpx02574', 'Kaniagnkko13340', 'Cindicncww15120',
                     'Audradvvbp66843', 'Leevzkqm28860', 'Graycerxvph66282', 'Nedimbjmx14539', 'Odelledpzkx53485',
                     'Vanyabpfuf85514', 'Bettakjlnw90863', 'Rozentnnh19765', 'Joellyznfzq82411', 'Alidiajmvlw34974',
                     'Rannafxhzs65660', 'Gilliuonpa78729', 'Joyexgnbx81285', 'Barbrahnlad98236', 'Lorabwqol16191',
                     'Gledawrszg96044', 'Portiavrtdr03014', 'Theklaxucvf91339', 'Kendracuqcp53955', 'Perlcunft03704',
                     'Arlynsdkzp81807', 'Carylpvoo63930', 'Edypjeeh06197', 'Starrpcnrm67980', 'Elgakqzpt99466',
                     'Gratauftlr88566', 'Garnetkibbc21653', 'Joyaqevbp99068', 'Babucxrq31854', 'Michelxewck34530',
                     'Sybilathrac25919', 'Dottieyapge70619', 'Rubimztjl98631', 'Cicelyimqjc72189', 'Nonnaaulgs85920',
                     'Heleneudkwn76476', 'Hettyysofu13688', 'Sonyalhquq32012', 'Florriekbck80010', 'Bunnieskvmr73018',
                     'Zararsnyc96555', 'JohnNova1906', 'WyattByte1229', 'CyberWolf9717', 'Miner652Byte8317',
                     'NinjaBuilder7281', 'StormArrowPhoenix24', 'BuilderPrism64244', 'LightSilver7160',
                     'CarterStorm58870', 'Shadow713Hyper615521', 'FireStorm5992', 'NoahNeon7403', 'LuckyGamer4424',
                     'OrbitSilver3985', 'Carter223OrbitFlash', 'Myst1cByteShadow3258', 'LilyByte9882',
                     'RiderFoxPixel9304', 'LuckyLion5860', 'VenomLion5413', 'DylanCraft6154', 'M00nDawn1315',
                     'EthanTurb09184', 'EagleStorm102Mystic6', 'FlashSpark3806', 'FrostAce937932', 'DriftLucky191224',
                     'BlockSpark1891', 'Trudynnfec17798', 'Estadyxgu34033', 'Marjiitcie91587', 'Dorisewabyc00570',
                     'Cyndiejpaed35868', 'Abbiazrkx37506', 'Zarahhbpgy99327', 'Emmyeemszg54830', 'Selenawsvul20608',
                     'Karolychqiv47096', 'Ellyviiia61915', 'Pruelevvo72662', 'Nikkihdznx35096', 'Kaelantnyh16228',
                     'Xenabilyv01720', 'Binnyjhril70160', 'Vikkyiszdb22580', 'Marleyvenjy55176', 'Ranioscph26179',
                     'Cindibizeb90548', 'Timmigrdxd85692', 'Druhlijx72567', 'Ranaprtqg08208', 'Tobehkxrh02337',
                     'Marinaedwrb23739', 'Cariljuogs30668', 'Helsafhsvr04670', 'Reinelwkys18957', 'Darynsclhp09928',
                     'Kamilasnujd46879', 'Barbievnwhw47468', 'Pianulkq52127', 'Wileenzlnwn66417', 'Elenagugtk79960',
                     'Tobyzakmk70102', 'Nelliesqytj91342', 'Austingrzzf56417', 'Marjipznmc63300', 'Periymjru76487',
                     'Lexiesrwsj61547', 'Rhodiezlyrv51974', 'Audywrghu16574', 'Mandyikxhe90029', 'Rafytcrv24132',
                     'Ursolabmhhv69348', 'Kinnactaxv75994', 'Aubrymprhm39006', 'Tabbyvbuus79832', 'Anniexifjs51693',
                     'Karisayvz46253', 'Norrywbthu40625', 'Ardenqhcch30904', 'Xylinaljxlf99252', 'Tasiasghkp00140',
                     'Kittiejuyio31099', 'Linellmkrqk71649', 'Lulitagfyro23034', 'Rachelxjbgn99990', 'Mernacgnap78568',
                     'LuckyShadow82830', 'HannahFire3416', 'CyberHero63707', 'NovaAlpha8124', 'LucyFusi0n676528',
                     'CarterShad0wByte4829', 'CharlotteFus1on35', 'Venom553Frost7439', 'Ryan036Lucky',
                     'KinsleyFire7028', 'AvaSky44254', 'PixelSkyFlash3568', 'VictoriaNeon6506', 'EthanDrift2814',
                     'Ri_ley956Nova', 'AsherOrbit1266', 'RocketNinja2155', 'NoahFlame6520', 'CraftDawn9730',
                     'SarahLucky9922', 'OliviaBlockGamer6349', 'AsherSkyFox6703', 'AsherBlock5771', 'Shaylafzpio40987',
                     'Babarawrlde98849', 'Glennnmlaq43010', 'Brinaubwll95284', 'Leesafltqj08794', 'Odeliaqdplk82996',
                     'Aliaxseop34080', 'Dollyxfxia81258', 'Emmafxfgn77790', 'Darceenpjju27002', 'Susiznrvg30915',
                     'Kareznkcn93887', 'Ivyfjzgb23256', 'Mairtkfui28165', 'Anettgcayv33431', 'Nitafrboq72556',
                     'Mollxaptc32874', 'Alicadjdau86717', 'Sandietrteb01866', 'Laceendokh27451', 'Rhettacrawm49325',
                     'Carreeisqku33616', 'Carlieiddpl41809', 'Nelleglmky93947', 'Midgelcwki31210', 'Nedipugqx22793',
                     'Lurapqdpu44910', 'Casszzpeb40794', 'Georgeyzvqh88853', 'Antheasjcp24649', 'Alishawkhmy95458',
                     'Glyndaermce80600', 'Rosyaqxwi66250', 'Sarinavgvct37725', 'Alysrlkct21845', 'Dorreeycwmm53432',
                     'Jodibsezt52888', 'Lenoraomehw91466', 'Pippyxweup22205', 'Tommyqlbyu19497', 'Zonnyavtmlr06721',
                     'Lanaeqnnyb09990', 'Adenabkgfd05280', 'Neysaajfnc34547', 'Sonnimpkup47796', 'Zenapwmwk85849',
                     'Maggijctfc71737', 'Kerrymdmdt40493', 'Ailaskkmo62935', 'Kerriptsph35390', 'Sellewksnh26756',
                     'Odettasxapw15910', 'Korizjfbi28512', 'Rebecaczhxp49086', 'N0vaCraft4311', 'SarahRocketSky9508',
                     'StormByte5990', 'BuilderGamer65485', 'Ligh_tFlash330731', 'C_alebSkyStorm9204', 'MiaLucky12109',
                     'CraftFlame2711', 'Genesis622Orb_it', 'RileySpark8529', 'MinerN0va7787', 'FrostFlame8194',
                     'Grayson338Nova', 'JonathanNeon6623', 'CrystalHyperTurbo396', 'NovaLucky1368',
                     'G3n3sisHyp3rLight955', 'SilverShadow35846', 'FireBuilder6105', 'GamerFox8099', 'Ven0m600C0de',
                     'Builder174Hero', 'VenomPrism37', 'MichaelEcho64464', 'SilverLucky8843', 'Reetawotlb91794',
                     'Lenahglba82248', 'Rosinabssff72966', 'Rhondatbawd98241', 'Orlyfgsxk60895', 'Carlenxazgl18891',
                     'Geniakxjny32104', 'Joreytpwam45582', 'Deinagxipa38525', 'Tomibuhdl89304', 'Karelclbqd15944',
                     'Rochuaffo20414', 'Fawniahuubs25811', 'Mureiludczx64745', 'Kialscqxm54143', 'Jack519Spark',
                     'HeroFox79964', 'LilyPhoenix1470', 'Turb0658Her0Gamer34', 'NinjaSpark20139', 'AceA_quaCyber1212',
                     'LuckyArrowFusion8477', 'JoshuaBlaze34808', 'Julian631Fire22', 'Dawn799Flame', 'RiderChill27017',
                     'BellaWolf4914', 'GhostAqua86709', 'LightCrystal5658', 'MinerNeon409730', 'LionDawn40215',
                     'HyperArrowNeon285921', 'GraysonFlame81330', 'Jonathan772Dawn', 'AlexanderCraft2896',
                     'Mad1son281Eagle', 'IsaacM00n5647', 'OrbitNeon863Fox', 'SebastianAlpha6841', 'NoraChillNinja8181',
                     'AmeliaW0lf632Gh0s_t', 'Elisechfmf53458', 'Dailemgdhx15191', 'Candiovfvr04887', 'Jerryaqhdi74863',
                     'Cornienzgss68707', 'Jordanhxgoa05979', 'Tandieomtgz56600', 'Catydtwni72432', 'Ashlielhone78499',
                     'Raynauqvyf64704', 'LilyPhoenix2701', 'AnthonyArrow9502', 'William626Wolf38',
                     'Flame673Eagle759442', 'FireOrbit71398', 'Aiden002Fire2025', 'W0lfFire9408', 'Ninja071Byte160130',
                     'ScarlettVenom54952', 'Lucky147Miner', 'LuckyPhoenix6642', 'NathanFlash583Phoeni',
                     'Cod3Mystic3598', 'RileyStorm738624', 'ShadowVeno_m', 'BellaMystic2544', 'BlazeTurbo5334',
                     'GraysonDawnByte', 'R0ck3tEch06548', 'Oliver738Orbit1281', 'Samantha099Craft', 'AceEcho16300',
                     'MoonPhoenix8295', 'ChloeBuilde_r2082', 'Eag_leArrow', 'AvaCrystal42', 'StormShadowEagle4222',
                     'OliverVen0m8877', 'WilliamMoonCraft9423', 'MysticBlaze1055', 'MinerNinja9188', 'AceHyper51186',
                     'MysticPhoenix2713', 'Joanvranb31769', 'Louiseofbwj19816', 'Brennamiioo55845', 'Deanatkbjq47896',
                     'Corrieieeac16602', 'Aimilblsqb82562', 'Megberee10065', 'Abbidvksh55582', 'Mirafkmiv64671',
                     'Merltvhxv47467', 'Chickyvfeem57237', 'Dixygeit16119', 'Rickiejoijw12294', 'Delilaekqrn07431',
                     'Elsiewjeqo90792', 'Noellerisgq00358', 'Pammipqace83207', 'Thelmagjbcr32029', 'Jackyzuxft22874',
                     'Nonayzfhc71926', 'Heidahnycy97637', 'Mickiechhkz51161', 'Cindyznlpp57594', 'Nonietfjkv17027',
                     'Donnizisaj07995', 'Nedicbhfm28188', 'Sadyeqevnf49078', 'Gingerdjyav75563', 'Crystadlglg49157',
                     'Casipvpwu38675', 'Valryhuzte84412', 'Kalieneepv50004', 'Bunnyqopgv95991', 'Brennqfduo18149',
                     'Alysonhofne46305', 'Allinabmgvc99598', 'Maddiaykbq72579', 'Trulakxwix07362', 'Avisetsfi91457',
                     'Cristitxzug01516', 'Dyanaykhew41038', 'Myrakypdk58736', 'Nanciealdbl13686', 'Agnalqpbs02710',
                     'Rosscvqu81008', 'Hannahomgca22219', 'Minnayvtqg94216', 'Guspzinn07058', 'Fox592Hero7477',
                     'LeviDrift5540', 'StormSpark364Cyber', 'NeonSilverStorm80962', 'VenomAce103', 'GhostSilver9166',
                     'NovaMiner89361', 'Byt_3H3roNinja', 'LionByte229935', 'EchoCode4540', 'PhoenixWolf17901',
                     'Gho_st809Sky9843', 'CarterAceByte4544', 'David634Venom2181', 'Shadow858Flash3291',
                     'ElijahRocketCyber506', 'RileySilver2557', 'AquaGhost3423', 'ChillStar543324', 'Bella039Eagle7668',
                     'AlphaArrow64459', 'AndrewChill6011', 'OrbitCraft7099', 'LiamEagle63294', 'AlphaW_olf663536',
                     'JaydenBuilder805724', 'ElijahStar7076', 'RocketStorm3839', 'AnnaFrost470025', 'GamerHero536640',
                     'VenomBuilder9086', 'FireFlame7150', 'KennedyFrost7012', 'Luke404Flash3593', 'Kesleyzqzod26844',
                     'Dorianzzsnu60541', 'Bertuueub20187', 'Korendpjhg89682', 'Maureyqtdk18396', 'Teddiffwii19783',
                     'Erenaiulgu79817', 'Nettlesnghn24931', 'Edythevljpc98963', 'Mashafxzzm00767', 'Bobineckurg10219',
                     'Stephangfah93529', 'Ermarfwme25979', 'Randypphul86940', 'Liannedzxbt67401', 'Piaecseg69517',
                     'Dionerhzti70771', 'Cheroywdh31878', 'Ranikbxuv36370', 'Tarynkdlzr70772', 'LiamAlpha6268',
                     'AceFox924924', 'DavidLion2043', 'Jackson325Light', 'NinjaAqua839534', 'JohnNinja9062',
                     'JackGhost23163', 'Vict0riaGamer8480', 'Anth0nyFire4953', 'BuilderPixel81431', 'DawnShadow32166',
                     'StarEcho3780', 'Orbit862Pixel8480', 'Ke_nnedy432Storm', 'VictoriaFox4793', 'Charles532ArrowByte',
                     'LuckyFlash902Prism57', 'Chill867Arr0w', 'F0xRider5295', 'MinerStor_m4793', 'Spark079Fr0st8840',
                     'Ace466W0lfEagle', 'Spark223Venom6068', 'Sandyevqhiy16703', 'Sibcknyd94070', 'Hildawkcyg45974',
                     'Bernyminod23017', 'Caronckgiy60934', 'Rheaswodn87424', 'Reggiemdvvw91620', 'Darbjxtek22126',
                     'Lyndelsrsyc07078', 'Joeynqmnw81075', 'Sileaspvyjs69141', 'Joannafjaej37734', 'JonathanFire6517',
                     'RileyWolf514731', 'ChillNinjaCrystal543', 'MoonBuilder6477', 'GamerTurbo78201',
                     'DriftRocketCrystal', 'Char_lesLucky246222', 'OliverBuilder51202', 'J0hnPixel_Sky29',
                     'HannahRocket39289', 'VioletPixelGamer', 'IsaiahFrost6116', 'MinerRocket30503', 'Ava208NovaByte',
                     'Caleb333Lion7562', 'CrystalStarShadow848', 'DawnTurbo52523', 'Emma411Gamer', 'ZoeLion3618',
                     'RiderCode8977', 'Flam_eEcho2359', 'GhostAce2476', 'HyperFire6104', 'RiderNova77702',
                     'CraftFlame36248', 'PhoenixNeon5906', 'ByteOrb_it6495', 'JaydenPixel9550', 'Gh0st_976F0x',
                     'Ullauioyz16005', 'Edipjvci39091', 'Bernyzqtfj32826', 'Jaymezoumf84779', 'Winnahibnxw08284',
                     'Midgeenzks10784', 'Ebonyqrfmg02901', 'Bertophar73922', 'Conutjic91956', 'Daunesahib36990',
                     'Izabelrygzz96747', 'Bobinedgxjb57671', 'Rubinadscku25010', 'Halleykbtfs26630', 'Kimmimnpyk41445',
                     'Yokonzfdl88304', 'Leoraczkqf32801', 'Fallonzbqru34195', 'Hallidqyib01053', 'Jolynnhtrjy11219',
                     'Kayfwwgb89502', 'Camilegzgwn58348', 'Kymqhxqe68543', 'Chickyeufje83235', 'Laceejpnfc39118',
                     'Linnieqfiuc13860', 'Celezqbeg37543', 'Dasiemcyur41760', 'Erichaemydn86308', 'Agnagicev97562',
                     'Tamikoygtvw66527', 'Candiegwlxw08044', 'Tamralhork70185', 'Clarylklwp85053', 'Ajayuwguy08663',
                     'Vikieabtf96705', 'Harliewuaxf86637', 'Breenajfvti42480', 'Hollywktzc78449', 'Marniafeiwy57332',
                     'Luciehhrib29416', 'Lillylwyof30061', 'Carineesaly92578', 'Alixyfehc58061', 'Bertiebiqqi17254',
                     'Tatumxuxae15461', 'Karencgam09140', 'Ellylcrbf03556', 'Blanchchkvv33435', 'Kitqpokj44199',
                     'Juninawlxqk44950', 'Emylerprro01210', 'Aileenspzaq94201', 'Nolapwlfp13717', 'Annifylqx74950',
                     'Neliaeqbzl15818', 'Steffirhkzx26328', 'EchoPrism87340', 'EmmaHy_p3r6244', 'Caleb894Prism',
                     'SparkStar1898', 'Joshua833Orbit', 'CraftShad_ow', 'WolfCyberGhost7283', 'CyberTurbo45713',
                     'Phoenix123Alpha', 'SilverNeon7976', 'ChristianFlashMoon', 'SkyLuckyHyper1555', 'DylanVen0m1814',
                     'Chill029_Spark8644', 'CrystalWolf31093', 'Alpha195Builder9914', 'LunaFrost1339',
                     'Oliver462_Block', 'Eag_leSky2872', 'Christopher705Shadow', 'Blaz3Light751922', 'LoganFire2272',
                     'AlexaVenom9603', 'LaylaShadowStorm3905', 'SparkCode6205', 'Cybilleezan65137', 'Gillitdztb37107',
                     'Maycyhtr96075', 'Clarylxvnl65746', 'Melliemahbm12227', 'Michallbcap87066', 'Cilkavbgfv75181',
                     'Robyntesrd10531', 'Brandelopfm98693', 'Diannbcqml86386', 'Dynahmkmox53051', 'Sofieaplhm57946',
                     'Loletaczwgr79694', 'Murialeucdw49998', 'Ethyllofms65507', 'Doriexbasv72310', 'Fifiafcdm12634',
                     'Franniaahsw03353', 'Evitaofwcs84232', 'Wanidsylzct58233', 'Vernadfgoa08100', 'Blisseqdlkn71473',
                     'Jeripvzvv53203', 'R_yan880Pixel1596', 'CarterFrost7502', 'IsaiahTurbo466833', 'Echo_Fire7325',
                     'MichaelAlpha37431', 'LilyGhost37', 'LionChill8891', 'Noah208Fire', 'SparkLight18155',
                     'Sil_verRiderLucky', 'Fire388Aqua3907', 'Anthony803Star9664', 'Alpha178RocketLion48',
                     'Hyper596Nova20', 'DavidBuilder7819', 'FlashArrow18685', 'VioletLucky24', 'Shad0wChill282629',
                     'Jorriernesz82932', 'Rayecpipo35113', 'Dixpamwp77139', 'Britgobdi95453', 'Birdeejaf61760',
                     'Henkahlrxd75853', 'Maigafhtmg95831', 'Emyleeutmub28349', 'Clovisvlxci39666', 'Shandalxuts21848',
                     'Erinnmmdbc21445', 'Albinakdobn38110', 'Happyamvls40375', 'Rheantbiy08072', 'Daleuwcop93583',
                     'Erthanjtpl99276', 'Gussijdkai61633', 'Dorieztoyl46175', 'Ritayxjxk44158', 'Gladidhbfh54043',
                     'Cristidbtpf31874', 'Adoreqadfb27096', 'Leshiaxbsmr46568', 'Brennfxhlm68589', 'Callatxxvn70153',
                     'Edithaoyxme31216', 'Cordymfnwo66469', 'Amyiytzt48389', 'Minadqjqq50077', 'Shelbadxabc98022',
                     'Barbixqhbb37731', 'Avivazhwhh48972', 'Jackieigckk57496', 'Aminstyt41968', 'Felipagmzho57347',
                     'Libbiegjvio54081', 'Risadvbqt28711', 'Walyutxwv47100', 'Loellanpzyh71026', 'Juniadzhzz79831',
                     'Wandisjpdyd34207', 'Verinakczig02050', 'Haliuylse30527', 'Yoshiepiea59047', 'Ailisnizmn25637',
                     'Josqxxw82870', 'Berriarakb61797', 'Gabbiekjlnf63984', 'Sibbieywmbx97388', 'Evitalnpwr64116',
                     'Candiewrrhm07547', 'Maudiebmjeo01507', 'Shandafskjt91140', 'AceCyber17297', 'GhostMiner3397',
                     'Shad0wBlaze9397', 'Julian804Drift3809', 'PixelByteStar4113', 'Fusi_onBlaze', 'SkyPixel3675',
                     'GraceGa_mer6097', 'CyberRider1711', 'Lucky120Miner7650', 'Silv3r446Echo9226', 'ArrowNinja8187',
                     'LightNeon6217', 'SamuelNinja44400', 'Ven0mArr0wSky9436', 'CyberSpark462341',
                     'AlphaMysticAqua9187', 'VictoriaShadowStorm5', 'AubreyCode5112', 'DanielA_lpha6867',
                     'AceGhost84071', 'ChillMinerAce265838', 'Alpha481Code', 'CodeMoon6049', 'Vickycrhzk03124',
                     'Dasyacdtbu93011', 'Dorrirnzta88037', 'Issyqnoqs46505', 'Joufved28632', 'Fifineupkbl45408',
                     'Ryannnbzjy98893', 'Atheneoufmx71159', 'Jessygcwez87832', 'Prismqqou16382', 'Gustiqnolo50776',
                     'Leoineslsrc00245', 'Caylavxmks67700', 'Lexinejnijl28698', 'Ianthevqnbs29887', 'Alidaeajtb72990',
                     'Hazelqyepc66050', 'Wileenldprt26624', 'Timmiuqjah93364', 'Timtjwbt88670', 'Gretamvquc92035',
                     'Josyhmimy03102', 'Cammietoljx77878', 'Phebehlvdl46100', 'Cornieqjmgd39001', 'Stormmvuwj68221',
                     'Mirannngvk74674', 'Ulalzhge40682', 'Bobbiexccmr69280', 'Daliladqgrx39818', 'Cloettfn73393',
                     'Libbiwurt26411', 'Daffienmzkn53076', 'Roslynekucs82596', 'Alixpbgdt26951', 'Brittekosyc34816',
                     'Debraodoub06571', 'Tessymvyix99968', 'Jeannepglyy74018', 'Donicagspti25942', 'Vivclgad64197',
                     'Karleeurbcy52599', 'Kettinzafn66492', 'Jodieszhop89946', 'Jessieccwkl79457', 'Moirabmcmy65897',
                     'Kirbyzhwml32284', 'Maxilyryo88069', 'Mollikygal31556', 'Eagl3Mo_on6305', 'Elena459Moon',
                     'Block479Neon', 'KinsleyShadow9392', 'BellaSky37433', 'BellaCyber6044', 'Pix3lShadow7126',
                     'James083M00n', 'Aiden418Flash8001', 'EthanMoon25921', 'CrystalStorm8617', 'Alex_anderLucky5191',
                     'Asher185Flame1677', 'EllaOrbit831335', 'Ad3lin3Arr0wFlas_h58', 'Nora650Hero3294', 'TurboHero6273',
                     'LukeDawn2563', 'DanielCyber2717', 'Eagle717Prism', 'Sar_ah200Rocket8702', 'PixelRocket7173',
                     'NinjaCraftLion3571', 'AcePixelHyper3146', 'BlazeRocket2790', 'Michael005Gamer', 'FlameWolf4963',
                     'DriftFire5819', 'DriftPrism4080', 'HeroFire2268', 'LuckyHy_per5430', 'ShadowDawn3392',
                     'DylanGamer75524', 'Timkitia57752', 'Norinecwgsk25011', 'Maddieekmsb61437', 'Difwnkd93864',
                     'Bilibkfpd21130', 'The0d0reBlaze2841', 'KennedySt0rm3187', 'CyberPhoenix9252', 'DylanRocket84807',
                     'NinjaEcho7093', 'PrismCyber951Star548', 'AuroraStorm60659', 'LincolnSilver2739', 'HeroFrost61823',
                     'HenryCraft1419', 'AubreyAce471Flash119', 'LucyCode40', 'SparkAce38500', 'Moon445Hero1038',
                     'RocketEchoCyber28', 'AsherAce8629', 'Jonathan349Crystal48', 'AquaOrbitMystic4880',
                     'DylanFoxNinja3925', 'WolfHero531640', 'CodeMoon33155', 'AquaStorm229635', 'Olivia067Cyber4861',
                     'GabrielDrift5025', 'AvaPhoenix59550', 'ArrowTurbo4145', 'CyberMoon17526', 'RyanF_ox2372',
                     'CrystalMystic1941', 'Gabriella970Cyber712', 'M_iaByte5782', 'Ryan967Chill',
                     'JulianChillFlame6866', 'FlameGamer58332', 'Ryan_HyperCode37', 'SarahRider1270',
                     'Edithaseufm27937', 'Bertieywdmv90794', 'Lonanqnil44666', 'Eddyrvhcu92702', 'Finazpglx83119',
                     'Pammieakbdj70385', 'Aerielwboqf13467', 'Beckyokvii63354', 'Ebaimurx97944', 'Pruexscgb92444',
                     'Traciefkyrt20695', 'Isobelxinfn13537', 'Carlyecxyrd93899', 'Carynbarox39527', 'Cliolcwbo45220',
                     'Fansxjab88436', 'Ailinattlru69981', 'Rickicpihw35829', 'Evawhrho57423', 'PhoenixFlash10544',
                     'MichaelPrismEcho8770', 'BlazeBlock5156', 'Ch1llByte', 'Al_lisonHeroBuilder5',
                     'SparkRiderEagle49113', 'HenryTurboVenom2917', 'SebastianStar4240', 'TurboLi_ght',
                     'CarterL1ghtFlash', 'LoganTurbo720Aqua', 'JamesRocket3220', 'IsaiahNinja59032',
                     'Ethan587Venom2191', 'Moon307Storm', 'IsaacFr0s_t5068', 'S3bas_tianPrism4157', 'OliviaFlash151331',
                     'CharlesRider39570', 'Stella444Fusion8334', 'GhostSky7202', 'Lucky121Spark503025',
                     'HenryOrbit492Ace', 'Byte204LuckyAqua', 'Robbiujnar71199', 'Oreliezhbbe83061', 'Joaneiytps97759',
                     'Maggiebkbje65938', 'Kippscftg45552', 'Mandipnyld59240', 'Alveraxgvhc29768', 'Fancietdzfn08459',
                     'Bekkiyrqtc65855', 'Ardenqtmgo65308', 'Elitaadwno34230', 'Raneeipxzz65563', 'NovaTurbo67821',
                     'PenelopeStormShadow8', 'DriftFlame59647', 'FlashBlaz36045', 'Hen_ryHero', 'AquaCyberEcho1650',
                     'BuilderFlash4296', 'OliverHyper48924', 'PrismMiner62921', 'Drift387Turbo38', 'Hyper205Chill32',
                     'LucyMiner2512', 'Turb0Shad0w215631', 'FoxSilver124Byte', 'AvaLucky40605', 'GhostStar7920',
                     'AndrewStarDawn4724', 'Block807Ninja1170', 'PixelEcho385042', 'IsaacFlame6536', 'PixelFusion6437',
                     'ByteAqua463823', 'NinjaHero10097', 'GhostCraft4379', 'Rider898Mystic8428', 'ScarlettF0x8014',
                     'Gabri3l160Spark4967', 'LeoPrism31392', 'EmmaAlphaArrow4678', 'NathanSpark1476', 'IsaiahByte6238',
                     'Siselyeaqkc76741', 'Moiralsqaa90584', 'Philhlqua79172', 'Dyannxhemb81291', 'Marenulvem35933',
                     'Darbzndqx89267', 'Pperkzrid69001', 'Neillaqscpp14150', 'Sherrzshg48361', 'Breebeikk74463',
                     'Trudieizjgw68418', 'Corielgcti33403', 'Yoshiphokm79243', 'Luzgnmoo79309', 'Lizaqzmts38663',
                     'Valerydvqwg42436', 'Lynettwyone75123', 'Donicapbkkz68908', 'Ninaxwoms33892', 'Staciaziaqz28650',
                     'Jerrieljflh64172', 'Shantarrpbe85003', 'Orellepjuxb44107', 'Ollyimrmf79545', 'Alyspfibo46711',
                     'Cherryfpnlt81955', 'Auroregwuyh78705', 'Daffiblzou36717', 'Aleecemxfys73458', 'Zeldaygnhd75293',
                     'Brinaupauj50032', 'Farrahvzsaq75891', 'Mellierlthd77614', 'Andieflkfu09640', 'Kerringuetj15266',
                     'Ingridqcvla71822', 'Elenivsmgy68562', 'Cherflguy33838', 'Janythbgu23811', 'Peggiecpybk98699',
                     'Blisseldcpo83361', 'Ailisvjwoc08760', 'Daceyipvll23527', 'Casseyvurlx08225', 'Adoraxwkjg16822',
                     'Rahelmcbmw77641', 'Janithjhfbz33506', 'Altamrryc28919', 'Vandaclwao83187', 'Livamonme77121',
                     'Raventpomx02690', 'Lydaegwjq94914', 'Chadcilwi69008', 'Mashaflgsq75651', 'Heddiogfoh35046',
                     'Lesyayoger94056', 'Lannirdkaf32391', 'Lettadpnjn82156', 'Shanieklasb32947', 'Kippujolh58093',
                     'Sonjajbgeo08441', 'Daleophlg45459', 'Gracelmtqb71588', 'Eydiemaoyc23555', 'Maudiernmlw55535',
                     'Alexinkjjw36882', 'Babbieuskmj64912', 'Adriamlthl99854', 'Nellgtddg75098', 'Dawnaqvbnl93281',
                     'Jinnygxgdy19944', 'Moreeneftab12563', 'Dinnyxgone10230', 'Ianthevugjq24491', 'Shainaqtgun72093',
                     'Ashilydqjv29598', 'Neilenertw95097', 'Jodyyyoby46102', 'Lindyhylul44410', 'Palomalbffq51430',
                     'Elsasnyly36431', 'Ofeliyiajg70774', 'Alyceuqgms89293', 'Reggiegjhsr11660', 'Idelleaijwu87014',
                     'Lizqwoxf08476', 'ChillGamer487527', 'EthanLionAce6852', 'ChillAquaVenom7656',
                     'Ven0mHyperBlaze4718', 'FrostHero16289', 'Gh_ostHero4063', 'ElijahOrbit9798', 'CraftLi0n34',
                     'AndrewBuilderGhost26', 'FlameByte8384', 'ScarlettDawn6088', 'C0deEagle4390', 'ZoeyByte467731',
                     'MysticPhoenix50188', 'OrbitTurbo089Ace', 'AsherLuckyStar1070', 'Rianonbkhzv42886',
                     'Bertxwrkk42142', 'Muireozrbh03716', 'Cybilynqwg21367', 'Sarazkzcu82297', 'Kippygfujs10944',
                     'Mollixyszs97338', 'Vallyulkbc12047', 'Mattyezjwm84715', 'Noniectujm53691', 'Calleyuvbyc87629',
                     'Ernachmky54463', 'Neliawfoja12450', 'Sandiephdig77725', 'Kareacwyp32155', 'Danioossm02679',
                     'Orelfmkvs16269', 'Aynolajx83164', 'Daronkoqgk22829', 'Pepijqyff50893', 'Edeeidbas32414',
                     'Arleenuupdx07520', 'Karonwwvhd00465', 'Abbyeohtyg37716', 'Mureilaagxx86247', 'Kipvkcfz90121',
                     'Sonnitdnay09069', 'Charinxxgea00030', 'Elinorbtepl63830', 'Fayeojkeg07569', 'Romonaxjngl78075',
                     'Nickixwsuf37142', 'Carmaimkod38997', 'Magdanific37650', 'Hanayrzxt32689', 'Shandyagddw05259',
                     'Finasklrd45512', 'Cathiwuwvm19250', 'Wallisnusoh19207', 'Bambiekqawa45112', 'Libbybwdzl64729',
                     'Sharylccsie53419', 'Ayncizij39560', 'Trudyueqsh30579', 'Arlenzdcdh54016', 'Cherysgrrk64641',
                     'Rickybozee92578', 'Caseytvbgq55465', 'Abbixpjss68111', 'Regantbqgq50130', 'Lindywrkfz97281',
                     'Timmiekwndx25292', 'Laniewbaum12602', 'Siouxxvuwg03631', 'Doricedeyqy91242', 'Finaupodw15187',
                     'Rafjdajb28142', 'Sydneyxdsrz20005', 'Mandymwjii36629', 'Lannaxgcpc27746', 'Daffikvefo12453',
                     'Jojosceun03860', 'Billyqyezf91017', 'Elkeexemb44225', 'Dorisedhdrs88002', 'Lottyqghlb99378',
                     'Neelyansjn61341', 'Margygyhgk45019', 'Lorrilzpzh99741', 'Joaneiabrh09682', 'Sonjawwhgm96846',
                     'Lannadkjac81410', 'Olagjrov06088', 'Lynorfks67231', 'Kellialozcj41290', 'Marylnkgay67873',
                     'Sandieiomow36369', 'Loriaeyjhc44708', 'Angywavyl19549', 'Carlavkhwj71949', 'Kennatnetu41461',
                     'Maxinevvwmi18600', 'Celievxwzp13845', 'Ettavzjky24263', 'Sarahnsdkh43233', 'Eilispqycy70441',
                     'Mableeiyuy59704', 'Ibbypibbk45092', 'Helynmvcch50902', 'Velvetfylpn16685', 'Oneidanpxit55868',
                     'Vinnidvocm05445', 'Liadnvde99253', 'Brandeorqpx15265', 'Milziedjeqf28999', 'Jolynfkune59526',
                     'Cordirowim74499', 'Julietgfqkg69364', 'Tobyekqjfl52356', 'Emmiefediu31087', 'Salppvxk69687',
                     'Sheliaggpkt18595', 'Debbiuxczs23251', 'Loneegohdk61355', 'Brittaycpcb25306', 'Sibrgfef71505',
                     'Glyniscfpef81000', 'Connieguwnr01498', 'Antheaijrzf68012', 'Rachelmehvg66770', 'Trudylfgkq24132',
                     'Vinniiilir33212', 'Lucewmwcy11782', 'Gustigtpjl95144', 'Milziebzonk98830', 'Andreaygwid53402',
                     'Barbyhddnz38657', 'Anneykusr89334', 'Stacialnqte66379', 'Kettyinzel92554', 'Addiyfugs13864',
                     'Elnorafbucg65615', 'Tonydzxcj11669', 'Sonyawwjvp65538', 'Jennyammrt51886', 'Adriaqaycq27875',
                     'Rosinablizw84573', 'Gretnafpfrx17198', 'Reikoiphet77467', 'Kathiexnvmq15053', 'Kooptpka68351',
                     'Patsyhutra71696', 'Valegoqlj81004', 'Meadeslrfr34373', 'Maggieuszbz64757', 'Reaqglmu38410',
                     'Leonacikcb91045', 'Nertazcbc42685', 'Beakvbpo82333', 'Manonexiiw09897', 'Annigikdj07449',
                     'Dollikltov94451', 'Joyeqzsfy70736', 'Jilliezjysl71434', 'Timmizxndl42764', 'Billitgykk62850',
                     'Pepidxezl99303', 'Toveptgia84740', 'Senaygder84172', 'Caresaaxzzl99333', 'Goldagvsxy95641',
                     'Aureagtynz86809', 'Shanehufqt90310', 'Lorinezfzfb77916', 'Vanyyigw48732', 'Cordiejkiuu88080',
                     'Dianekfiwn03198', 'Grettaeasle55509', 'AcePhoenixLion482130', 'LucyLightEcho6068',
                     'Noa_h555Builder5249', 'MoonLion450937', 'DavidSky33903', 'OrbitBuilder2221', 'BlockPrism2636',
                     'CyberRider37527', 'AnthonyFlame6167', 'Bl0ckLi0nChill6322', 'EvelynPixe_l6650', 'RiderChi_ll',
                     'FireTurbo28961', 'ChristianBuilderCybe', 'IsaiahFlash1667', 'Ph0enixLi0nShad0w329',
                     'DriftArrow5976', 'ChloeMo_onRocket', 'EchoCrystal4626', 'CodePhoenix22813', 'PixelVenom52687',
                     'SparkBuilder1277', 'RiderBuilder7417', 'NinjaStorm8915', 'Samant_haNinja34', 'AriaLuckySky1394',
                     'Mystic090Fusion', 'NathanSparkVenom3716', 'SamanthaCraft2165', 'AllisonMoon5252',
                     'SamuelNinja7308', 'Estatkyft33626', 'Candinuafx33727', 'Gabieaopnc52277', 'Coreykopht34120',
                     'Willowigayc80525', 'Ardenikwms97965', 'Piapjncp32239', 'Jolykbifp07218', 'Livgtvly53972',
                     'Pammypgowg08485', 'Kandyausrj30005', 'Linnxrewb51750', 'Nickypyomp97104', 'Wandisyylrm02335',
                     'Joannamnqan73442', 'Quintakqtpf97192', 'Hedvigpkpie98182', 'Rickyfetqg27211', 'Vallihjvou78067',
                     'JulianFlash48174', 'Chr_istopherVenom397', 'Lucas064Pixel9568', 'OliverR_ocket2483',
                     'Aubrey375M00n9408', 'GamerFusion18351', 'NeonBlock153026', 'WyattNeon2607',
                     'Sebastian433Miner746', 'Min3r926Storm', 'Joseph600Alpha8764', 'Li0nSt0rm5538',
                     'Carol1n3Orb1t5079', 'GabrielHeroStar8902', 'BuilderMoon36155', 'VioletPhoenixMystic6',
                     'Violet844Alpha', 'NathanByte87396', 'CrystalNova784Gamer4', 'F_lameRocket2144', 'VenomByte38010',
                     'Delsszfd67824', 'Leesepgmdl23689', 'Denyzefup42236', 'Ebbadwjmh03473', 'Suzyrgkxq13834',
                     'Bertheagfdg51792', 'Amilgomqn89793', 'Jennywxnxz55343', 'Nadagdgru64043', 'Dolleycagph29346',
                     'Korieoybxe36558', 'Helenaphnrw60313', 'Kasseyjgxkx23670', 'Eleneumqdg53342', 'Hilaryglvgn89136',
                     'Blinniofpun99735', 'MinerRiderWolf3490', 'BlazeShadow6510', 'Jayden575Flame',
                     'JaydenSkyOrbit7231', 'Light539Mystic1756', 'Charl3sGam3r9180', 'Her0318Crystal9304',
                     'HannahWolf2711', 'AceLucky2556', 'ZoeyMoon7278', 'SkyRider4011', 'AlphaDawnMystic1689',
                     'WolfFlash24223', 'LightLuckyLion9452', 'C_arolineCyber', 'Fox188Frost795521', 'NeonM_oon3466',
                     'Michael655Builder', 'OliviaHyper18440', 'Venom985Lucky', 'EchoPixel4335', 'ChloeStormHero1790',
                     'FlameMoon8908', 'BuilderWolf5381', 'HarperOrbit8966', 'AlphaGamer1913', 'HyperOrbit7474',
                     'Mystic017N_ova3271', 'Kaiazdbbz06128', 'Nydiadthgw42174', 'Pattibgplm38012', 'Sibelzoquo06164',
                     'Nadamsixh89453', 'Rhetagrkum50672', 'Daniqkbap00380', 'Kattiuaedx41940', 'Leahnljbx05529',
                     'Hedytzcsr39638', 'Prudiqboeg59443', 'Gretnardghu78635', 'Helgerqwjl85015', 'Zeaivgts19410',
                     'Meggiegicay94373', 'Gianaljqkx02298', 'Larineoqwlj74907', 'Dorristwhdq19525', 'Andyqgusq90617',
                     'Muirecnkpg02023', 'Iliselqqjn47316', 'Agnessmfzh50016', 'Ninadjrgo76712', 'Careyxhrba95573',
                     'Kathytmmsw32654', 'Sharaimxkjf44972', 'Januapvh11558', 'Floryftzib72314', 'Simonezbdim16346',
                     'Imogenpuegs83880', 'Velmazybtv11769', 'Sherigytrp21569', 'MichaelSilverSpark19', 'NovaGhost7614',
                     'Nathan907Hero4874', 'SamanthaMoon5650', 'JoshuaAqua27468', 'AquaSpark976038', 'CharlesMoon9015',
                     'Le0283Ne0n', 'Lottawkpyk12940', 'Janhvhui49511', 'Sareejaibi99783', 'Joyefjbmf15242',
                     'Bevdebmb62291', 'Simonecdtcn97802', 'Renaetwgu35058', 'Terrigpsom35502', 'Chickyhyncx99834',
                     'Edythcqwnf25972', 'OrbitFlame7978', 'HarperNinja17651', 'VioletFusion1466', 'AquaFlash2544',
                     'AquaFlame2062', 'LilyLucky7716', 'NeonFrost8782', 'Ryan033BuilderSpark', 'Block019Sky',
                     'E_lenaMiner6438', 'NovaChill6255', 'PrismSpark4148', 'GabrielShadow4453', 'SilverRider9342',
                     'Phoenix015Lucky', 'CrystalAqua77326', 'Charlotte956Star8774', 'Turb0R0cket240Miner5',
                     'AidenFusion7970', 'SebastianWolf8037', 'Mystic939Gamer', 'AriaLucky8509', 'FlameStorm440040',
                     'CrystalNeon31010', 'LincolnPrism16647', 'EthanBlaz34761', 'DriftRider11591', 'Blaz3Ar_row',
                     'RiderEcho7159', 'GabriellaCyber8834', 'EchoMiner8240', 'Alfiejwqlx91308', 'Kaceysxjnc95989',
                     'Wilowlkjzr56797', 'Elitahlynf47039', 'Ionaualnz88520', 'Allieqqqdm76989', 'Deenamtskr31005',
                     'Cyndiaeyzsg94000', 'Sonjamnxlx78634', 'Bryanatdulq58786', 'Raniceqjofn86277', 'Sararscew41924',
                     'Winnygsmhn57175', 'Rhetafzvud39705', 'Merciexzxqd44202', 'Sekauvzoy17334', 'Reeoipwd49959',
                     'Zeniajlygc41963', 'Lanienwhgs14419', 'Almaedquj69857', 'A_llisonAceCyber', 'Vi0letN0va6656',
                     'CrystalOrbit4917', 'HannahHyper5307', 'StellaCrystal8822', 'L_unaFlash', 'FusionAlpha6514',
                     'MiaStar7809', 'Liam076Hyper6104', 'MasonHero8248', 'LucasLuckyCrystal23', 'LuckyGhost299838',
                     'Liam215FusionMoon406', 'David513Fusion9350', 'ByteArrow49057', 'Noah200Orbit9630',
                     'Turbo847Star9892', 'GabriellaPrism114Hyp', 'Ja_ydenByte8791', 'LionC_raft', 'Elena709CyberLight',
                     'Carlyngvrwi67101', 'Onidarwvfg42513', 'Clareytlaew86144', 'Shircuvvu58186', 'Salliehouxs53469',
                     'Rebecabpzzz69895', 'Raneegikgd02003', 'Deannaxjcbo21723', 'Blancatojzy43584', 'Joniecnecc85384',
                     'Chelsyvtaos67703', 'Fredranygrz60492', 'Eveyuwfh16438', 'Peggyknpih06935', 'Shaunrjutv04949',
                     'Loisevkqbt47872', 'Maddiectybg89742', 'Pamvhimu18596', 'Wendieppknd11715', 'Lusalkopq12997',
                     'Bonitactycz66191', 'Kennasofwc71881', 'Tessycwbd87207', 'Elfiechswy28984', 'Kareltlvil35553',
                     'Cordiwjzvx29675', 'Kristywhdvz34216', 'Kittiefkwux10424', 'Tonyadzejf52422', 'Jessiocbky00440',
                     'Lyndyvbcci32832', 'Mercyemdpx55625', 'Winonaebzjy79766', 'Loisebosut55319', 'Hyndahcfvd05726',
                     'Barbyouthw98108', 'Tandiesxdnn67482', 'Mayeecghu57001', 'Karongbdbx58742', 'Dannyewlavz98267',
                     'Tommivmvhf41045', 'Daciecdkzv76155', 'Beccatcwpz26342', 'Genniecrdv08496', 'Amitieojfsv70724',
                     'Sandeibkak33046', 'Kialdmvzz63633', 'Andreakpjtj55159', 'Dannieyoyjr32638', 'Klaradnoxt12890',
                     'Correynsalc05114', 'Codieotpeg40268', 'Cordyszwwe48029', 'Jolyzckre42421', 'Hyndaihboy68833',
                     'Goldagfbpp90720', 'Mandaylxrl20897', 'Winnahplyml36215', 'Lulakiboz46867', 'Shariarwpcy47212',
                     'Maddiublvb79757', 'Barbemdadm24300', 'Wandaxanmk79523', 'Janyfwzxl53207', 'Chill437Frost41',
                     'JonathanMystic4912', 'Drift099Turb01120', 'EmmaDrif_t4919', 'St0rmFlash372340',
                     'GraysonBuilder8756', 'HyperPrism4342', 'DawnDrift9729', 'Frost139Neon9173', 'NeonDawn2398',
                     'JamesLight4459', 'Gaehoagj58993', 'Tandieungea26925', 'Rinawlvxs76129', 'Carmonargfy85880',
                     'Gillanpfvdl93641', 'Piargjqv77875', 'Utammthi68404', 'Darapsfef30134', 'Cleogsoky65457',
                     'Darceebedck79708', 'Lettyyicro46797', 'Rodadzavj60560', 'Fiannumbsq00862', 'Ilyssagegoo87260',
                     'Dellahsqu03189', 'Sallywbomd17364', 'Marysspast12586', 'Lilahhfyuv95888', 'Lindagnojk31478',
                     'Betseyepenm48773', 'Rianesfdwj84674', 'Gladysdwlzz19119', 'Floraspzjj93368', 'Kerryyhsmg99349',
                     'Cathieodqok10744', 'Naridhxge95210', 'Carynnslta95867', 'Gwynzyykn28444', 'Wilonexsnls82204',
                     'Shawnahmiqr99503', 'Laynedszjn00359', 'Tandymcpsw57409', 'Liukannynz92569', 'Maggirbsyc93166',
                     'Pippaoyvem31977', 'Florieknltn48962', 'Dathaagecn23196', 'Ardathbputz91428', 'Eilisfjwdr68012',
                     'Janayayoucj14995', 'Kacyibxhy86464', 'Alikauspbv66253', 'Susieoifwh24150', 'Devanlvwjy16125',
                     'Rafgtlas47534', 'Vixqdhb23760', 'Devahrcpn91817', 'Denysogjdz59952', 'Romyrgzpw58411',
                     'Mahalaywpig76607', 'Edithmyggi31911', 'Jeanerwyct83955', 'Honordtkyu89409', 'Candiedohwk83932',
                     'Vidaxeocn24735', 'Noreenbecwr11155', 'Tishhjogb83933', 'Margetkflyi47258', 'Euginehugpv34178',
                     'Hindasbbjc27749', 'Brigidbuibt73016', 'Genabwowb8091', 'Karlendyzod47525', 'Ashiloqcen81112',
                     'Remyinigb24601', 'Dollyapqqx53202', 'Kiragznva53340', 'Faythecfroo69000', 'Deeyndshzs83077',
                     'Dyanejnojg89356', 'Roriempny56384', 'Chereyvcru45092', 'Raqueliscss45018', 'Brennabztdv74318',
                     'Marisajmfxx16040', 'Hollyjavxh70313', 'Birdiedkrbv78648', 'Bibbiecbgwl03428', 'Megenlarvx60970',
                     'Goldiejszyj70779', 'Karilzzedk45129', 'Agneswryqv58284', 'Arlyejwtr64911', 'Jerrypftfr09276',
                     'Zolaufinv04728', 'Freidadudpg35520', 'Farahpvarf57559', 'Kellirhrcd11407', 'Rozinaabfan95846',
                     'Mablejccwy01442', 'Ameejhib92444', 'Faricaafdmx50804', 'Carriltmvy19662', 'Sarenebvofk98644',
                     'Kimmimpztj16778', 'Kyledfdhf77562', 'Gayevjmdx55134', 'Frannyjddjn03786', 'Darceycgzpl04117',
                     'Ranizmmhz68937', 'Maxielhiof61948', 'Lavinapltya45288', 'Olaymugk91500', 'Nertazqhwh48069',
                     'Jemmiegnhsb97513', 'Ebadkmxe57502', 'Beryletrqhb60651', 'Wandieajyql76170', 'Jillietkovn61986',
                     'Leshiaglrvr74000', 'Rickiofyrj75563', 'Barrymaluo53525', 'Winnahbwiev95841', 'Lizzyeqals84247',
                     'Stylegeibe188', 'Aedankmiec709', 'Totorak135', 'Embtkonyk79224', 'Munlfief14699', 'Moedtzevi7880',
                     'Haifalago1592', 'Carthour29693', 'Delnanena6518', 'Poursaliu548', 'Ervmoroz23968',
                     'Leylaralph8140', 'Kolzkarty860', 'Welinbaim1701', 'Vigkerle5565', 'Coblearnce7714',
                     'Doxeyferch18249', 'Meyertrilt517', 'Gedibaets886', 'Dukumotew3483', 'Dentiempie650',
                     'Peelepatty77383', 'Pautaskaar59037', 'Rapkolloid870', 'Sideyshido9055', 'Roddehamma45192',
                     'Noaksteva78692', 'Jeunnanik8528', 'Bossodusak7579', 'Moziephu854', 'Odlesorel1201', 'Capepaul137',
                     'Crannshian02433', 'Phyldaisi8231', 'Kamkagoin367', 'Telonsuski919', 'Closegose7750',
                     'Badrikepka124', 'Clairjac4897', 'Denaardon6880', 'Butowklee8392', 'Breanreaid128', 'Hittslsi1198',
                     'Garbyhuen77356', 'Whorlgabis31456', 'Dilgzam69446', 'Nallakindl800', 'Knickmoate997',
                     'Ricksjiya0530', 'Latkopipal77136', 'Lammtonna72535', 'Nadyewy766', 'Duroyrains747',
                     'Moscocronk5633', 'Lezkoch1277', 'Kloorbelan134', 'Gloordotta742', 'Stohsnayah38835',
                     'Padolaush56331', 'Kmettsumi167', 'Linniexbtnf07119', 'Hanahsqkk79625', 'Dedraefmtq33328',
                     'Catlinegzjk69777', 'Janithraqax50429', 'Robyntuivp67824', 'Deinajpxbc79124', 'Susieqwarv10542',
                     'Gracewddxy73466', 'Drusiicxvi52389', 'Delyvkbm66331', 'Oliathdzb25781', 'Catinqmqd60985',
                     'Timsjzbc59148', 'Denniixumk45650', 'Bariystlj22869', 'Sellamtfgi63988', 'Faunxrcsg96479',
                     'Janenefykjf85514', 'Pamvzctd44203', 'Roxixrrsj16525', 'Piamtkvj43088', 'Robbinxxyoe27032',
                     'Davidaokjlj27930', 'Daisywsxsj10116', 'Edythecfrla75455', 'Dorowoqhg44273', 'Karonnmnko51169',
                     'Hedituuhb35436', 'Cheryesmbcz27199', 'Devinaipyvb37795', 'Gretelbwhjh93208', 'Ebaivdeh73126',
                     'Dennieowpjs11184', 'Maddiefqgsc23144', 'Ellaryeki94820', 'Staceefqvmm02453', 'Xenacdtof63555',
                     'Cahracwbvf00760', 'Shaunafcpzs68954', 'Jainevbsil97902', 'Denyikvxr72170', 'Kataostvo20316',
                     'Sadieuurwx92995', 'Evonneiyobj64331', 'Ruthvybgj02960', 'Goldieraovu26079', 'Bennylyomo55327',
                     'Mayexhphc70117', 'Cynderxcdy43378', 'Andriaijkdy54911', 'Ashienoeyrw37930', 'Nellsqcub66840',
                     'Kerilvgpq62219', 'Pierrdxyf67259', 'Mellaqvawb65775', 'Ynezvlown02178', 'Tabbieiperc60982',
                     'Rochdzkyt89641', 'Karisitlm98617', 'Reazanqs77535', 'Natalarrmkc11108', 'Walliejehxo36550',
                     'Tonyelpmiz12382', 'Laniebtehn58867', 'Marijozxhib43547', 'Kylajindg80674', 'Cassieeyboe88138',
                     'Calleyhlehk40320', 'Wilmamzkwa83889', 'Neileruwte61372', 'Dasienqjee42466', 'Cybghqrv38420',
                     'Beckizwrdh50309', 'Kaseygejiq95644', 'Fredikknpk57557', 'Elfiesjzol06769', 'Brinnskzji34624',
                     'Lorievljhj26249', 'Crinsdyla46443', 'Jessmmdgn65422', 'Mignonbxhwt06049', 'Lonnaitxnj74520',
                     'Emmeyrjwiw00710', 'Joreyuhqjc66258', 'Debbijjvki10380', 'Mirakomur90358', 'Taraswesf86144',
                     'Lindybqgvb85330', 'Gillbwhqh28408', 'Sharicbril73342', 'Lucivhgfb63682', 'Sheltctss68586',
                     'Seanasuapo66902', 'Frediagtxtm34110', 'Marciinlue86309', 'Renniewqqio40575', 'Taffypvtos85433',
                     'Amataphsjy31606', 'Kassiamdvmu64471', 'Eydezqrqu65242', 'Grierrxebo88672', 'Vallicfidz21623',
                     'Hedvigwpngu01936', 'Ardathyolcm92698', 'Penhfgdr14213', 'Alinecwfyc18007', 'Aniapokce39058',
                     'Amatajjyal10980', 'Kassiaitxus00721', 'Neilengeil57289', 'Calleyvmhjn20037', 'Katgjlmm55755',
                     'Nannymubnb47521', 'Coraxmlib30012', 'Odessaghdqm69859', 'Elitacyufv06434', 'Caroymvgg81765',
                     'Abbyemufdz60612', 'Tashaodatt37937', 'Enrikaxldui69892', 'Jillydjqtg59888', 'Fifigedfb40241',
                     'Druzxlpu09090', 'Calcndfg73353', 'Tammauaqnw94274', 'Sammyeyxut90784', 'Kiragrpav37336',
                     'Eugineuusdr61103', 'Birdiewddqi49579', 'Arleenagosh54645', 'Ailiegehe17209', 'Robbylppxk48970',
                     'Candiespstu90178', 'Jessaxsdmo94859', 'Winibdyph13474', 'Pammykanas60418', 'Vickykjnrn79416',
                     'Cleoruerc28143', 'Saideebhaoj54440', 'Terixzqaw29499', 'Cornyloukq64590', 'Lottabzlii97731',
                     'Pattiykzwa33992', 'Tressaztfbj89779', 'Rowebbuts38936', 'Noelleamnss04257', 'Sharieswph84336',
                     'Thedakkzuj28340', 'Bertezvwir06949', 'Jannelbmzxn78538', 'Nanniicmfy40297', 'Theklayaetp00255',
                     'Tammyutmta48055', 'Ilkaymccr81012', 'Almirapplbu41741', 'Helenelqnpm72080', 'Theklahzwwt20653',
                     'Sandikrfrp96498', 'Manonrzmgy94248', 'Loletafwwoj17621', 'Toryxrklj89426', 'Bonitaihcgp30758',
                     'Sibelizhsa30030', 'Kirbieiqwdx27090', 'Tillyovdvr24619', 'Bobinajlwuo21669', 'Edeelnvxm08436',
                     'Chrysazonbo85883', 'Aurielddhu41854', 'Hollyjmhbf57478', 'Vanniebjaar98280', 'Lonnieylqmj47080',
                     'Emmeyuptip57068', 'Bernieukkfx45322', 'Brithdbmo25252', 'Cieljboxq96694', 'Trudixuafa78945',
                     'Shirlkdzcm39618', 'Hermiaxqwlt31205', 'Irinaougnv22006', 'Eliehezzs56334', 'Heddinjyua79845',
                     'Tanaqzmts44928', 'Carolejycrc49383', 'Ruthebmnyb97320', 'Emilienxbtv57914', 'Sibleyygqej78005',
                     'Ledamgkee89072', 'Lucitantduu43940', 'Dottyuubkv92524', 'Brettccavv48103', 'Moravymse47925',
                     'Vanniebhzbg09916', 'Vivlxhgg38271', 'Norahfjsqa69549', 'Dorrisfdaxj42370', 'Bettyeoksxa47681',
                     'Neilaaxyba12860', 'Vykymfqoj96891', 'Merylddbjh00679', 'Sheritpbc80365', 'Esmebvihu70929',
                     'Gerrieaewah25269', 'Brittazcvsf02667', 'Criscxmkp22359', 'FrostChill25772', 'EllaAce64170',
                     'Luke702Li0n9195', 'WilliamFlashTurbo203', 'JosephAqua37688', 'NinjaPrism859131',
                     'Vict0riaPixel4547', 'RiderCode2309', 'AvaPhoenix33674', 'MysticSilverTurb0263', 'MasonH3ro4370',
                     'FlashAce6035', 'MoonCraft30056', 'LilyVenom9319', 'Chill281Alpha6600', 'LoganOrbit5679',
                     'AmeliaBuilder3862', 'OwenLion47381', 'EchoHyperCra_ft7229', 'EchoFox8975', 'Al3xand3r920Hyp3r357',
                     'Henriegldnw77312', 'Starrkhfm87083', 'Lydayhaex70069', 'Loubitoy99244', 'Jonilvqro93175',
                     'Shanieawskq89820', 'Chereyjxorm69931', 'Naomamjwmt33704', 'Vinitaeqtws52169', 'Amiislquj05786',
                     'Jaymeenjtxd71252', 'Dianneeuofq96636', 'Reggiexibjm81974', 'Doreenxgbku41341', 'Jamimadrqiw51311',
                     'Teddajvrxp84803', 'Lyndyobtof87226', 'Bellwnspb23367', 'Betseyjktke58309', 'Teriqljgf06318',
                     'Billieaxshk77593', 'Joanzwabu36793', 'Dulceawvsgw83466', 'Taliajdldz64531', 'Danelljvsod65659',
                     'Koriwnzbk22536', 'Cyber487Flash', 'L1ghtNeon24', 'AceSpark3130', 'StormLight86096',
                     'Lion094Alpha3543', 'PrismGamerSilver3183', 'ThomasMinerCraft33', 'DylanBlaze5462',
                     'FireMystic235936', 'SebastianStormNinja8', 'Lennajnrvh03484', 'Lornaegohy56707',
                     'Erckaefkfs28002', 'Dodyiamnj64866', 'Darbcnvsp42599', 'Kaialdzmn37132', 'Lynseymzflu35077',
                     'Zorahppaih79375', 'Kirbeerorlu05044', 'Veriledfisl27018', 'Jannawgybk29037', 'Zonnyamgxxs10695',
                     'Editallxtl57555', 'Donnigpyrw24407', 'Bettyeyhtga04284', 'Leonazkvcj89720', 'Toniwcbrv34448',
                     'Olivianjnpx53854', 'Bobinetrehe53194', 'Giuliaqdapw86737', 'Norinabklpo29474', 'Greteknpna87035',
                     'Alieeikyx09485', 'Wylmaysbza53465', 'Livviecwwfh54255', 'Ardisnlngj28024', 'Doricevfxds66352',
                     'Abraturvn46177', 'Jessiegdjse74209', 'Lettyvrixy21269', 'Kaylilhgxwi60049', 'Hollinxgty00052',
                     'Farahwdgnc42393', 'Agnolateuxo21624', 'Samyzgep10157', 'Jinnyrlush59435', 'Erminaidtwo35846',
                     'Dolliegrwln87978', 'Diannpldkm05969', 'Bobinazvaxc25096', 'Florrigqpui37516', 'Mureilnzqsc31970',
                     'Heddiedjocw08797', 'Flossikoiqb07886', 'Fredradzahi61743', 'Brynvhmnt93711', 'Carreevgtuu66706',
                     'Cleoqbyba52693', 'Goldyyypdx46579', 'Jessigkewj98658', 'Brynnjbojd74701', 'Shayhbjfg35463',
                     'Fiannalwqzd22422', 'Perlactddq71275', 'Shandydiaeq69433', 'Catieywyxt92544', 'TurboHero29155',
                     'Star813Eagle', 'The0d0reEagle30', 'DanielFire8867', 'ClaireAqua9776', 'LuckyFusion8467',
                     'AllisonRider7762', 'Silver343L_ion1897', 'CraftHyper4593', 'Ch1_ll680P1xel6144',
                     'StellaBuilder5754', 'Chi_llAqua33', 'AndrewBlaze6709', 'Cellefnmtz75894', 'Hedwigtqnlc95769',
                     'Charylkkpyj69041', 'Corinemkios67516', 'Sharyliuflq17088', 'Callirnuhc51548', 'Gledazbrrk16711',
                     'Coleenmujzx07747', 'Ameliebyygq47690', 'Molleebfmnd25101', 'Jolineobcaf85330', 'Rhodakescj35233',
                     'Nickieibmcl45484', 'Ebbapiymv51600', 'Norinehmamr77112', 'Ruthipmive30165', 'Ailisgqvph52094',
                     'Orallannhbp57331', 'Saraowcje93990', 'Tresaxqwgc61111', 'Ursalarsfnl78379', 'Terzawhmza70322',
                     'Vonnieoggtt14998', 'Teriiclmj26997', 'Kattivxpit21761', 'Karilkopkg66421', 'Stellacamix42147',
                     'Timeartq66814', 'Sadyevmljv15246', 'Sonjayvtgi25932', 'Emaasjbf95934', 'Cybilaztlm45984',
                     'Faunieftaoh57605', 'Dannifjexa39308', 'Shaynahdvhf26480', 'Roxixzbid18078', 'Peguqzrx15928',
                     'Joeliehjjwx92805', 'Peggyxsylv96032', 'Didoueomm89188', 'Beckawhmrd13767', 'Neddazfvhx70496',
                     'Genaqfoks43833', 'Bertirkjcp20512', 'Sulacvnyd61661', 'Albinalpgha56893', 'Raynacxfue66036',
                     'Joyakkvnl05677', 'Brynnavykgy17278', 'Natkatexrh96271', 'Elysenajrw75615', 'Trennatmpvk93433',
                     'Orallejkjrl83634', 'Nickiekujee39683', 'Junieadkvm44304', 'Adoraqfmuq98633', 'Beccawatzb71348',
                     'Aurapxqsn85874', 'Lolauwhrn23107', 'Keelywixqn84587', 'Sarinenwysp62378', 'Ettyjvglj27446',
                     'Rethazniol32064', 'LuckyHyper3746', 'May_aDrift8488', 'TurboMiner3854', 'Violet294Flame',
                     'GamerC_rystal7373', 'Chris_tianLucky9939', 'Byte176Moon34', 'Elverawonby57441', 'Sibylqrrkv53314',
                     'Elnorepmspg54536', 'Eugineimrgs37773', 'Babpwqvf43731', 'Cammiexesho51421', 'Gussymsmsj60010',
                     'Dreddyvjnqh89860', 'Myriamdpsdd64461', 'Fawnezppfn12555', 'Faydralcxax99301', 'Dulciezhruv54630',
                     'Moreenpaurl83267', 'Florryeefdg26332', 'Ivorydttcb14097', 'Faeraqsx56907', 'Ginnijiwbw81831',
                     'Mabwxdan88389', 'Elinorpgrrh26763', 'Billyctjpo11095', 'D_riftBlaze', 'StormMiner2427',
                     'MichaelCraft4058', 'W_illiamLight1755', 'CamilaArrowPhoenix', 'ChillFire3008', 'JoshuaArrow9759',
                     'StormCode39', 'ChristopherChill1750', 'LucasPrism35457', 'AlphaPhoenix657924', 'N0_vaOrbit8017',
                     'EagleEcho36', 'IsaacFox3948', 'VictoriaPhoenix13878', 'ScarlettVenomMoon246', 'Prism367Spark1186',
                     'HenryDriftF_usion711', 'Dri_ftLight', 'LightEcho4528'}
local RECEIVER_LIST = {'Cherywnbsw28424', 'Jessybqslk61856', 'Faytheksolt19622', 'Bryntzuld94118', 'Melinaanfkl20920',
                       'Oliyitcdk00657', 'Bibbieihlts90004', 'Deaneeklkd66837', 'Kristagkygj26705', 'Terzazdvcq14170',
                       'Normawlnst37991', 'Roslyngajqx35951', 'Karyvofaf78047', 'Peggyftjvh71116', 'Danitsczvs74080',
                       'Lilliwmaqn52177', 'Lyndellulrk54810', 'Dorrimlbhq99051', 'Brendanurox06296', 'Aleencxfla16400',
                       'Deanneddpzq73704', 'Erenahjmjy69384', 'Danitpzaao69963', 'Jobixizga74881', 'Altarsndf15276',
                       'Deedeetfjnd37991', 'Sandyeyykip60092', 'Zeankvut98731', 'Zelmaralyi13247', 'Nonahvddua77850',
                       'Malvamclvo95300', 'Farandjnojp91933', 'Joriefexbd64238', 'Myrleobgfe83981', 'Caresamcgoh55462',
                       'Breekzmyp50355', 'Deborpejgl48882', 'Pennybygob81843', 'Arlenajgof14621', 'Ionazasin95602',
                       'Dulciawzycc75201', 'Sondranyhlt09114', 'Juninappnwc40897', 'Tarrayaglb41455', 'Onidasgzvo75567',
                       'Jennmlelr46911', 'Billiftmyr31363', 'Lulacpgfi51309', 'Kittypcubi18886', 'Siselyirjqk51668',
                       'Trixyytvqu24523', 'Bessyujjsw78498', 'Janinexbczh86653', 'Chariscosbb88688', 'Frediortvo10234',
                       'Suzannpsawe98210', 'Arabeltlypy14237', 'Steffiniubm88180', 'Vannaddzns98006', 'Berniwqajr15703',
                       'Joseezfbrz76511', 'Rosembqro12802', 'Theoaroal68343', 'Gabbietfiiy79221', 'Shellzcllu39445',
                       'Regansmxqe21213', 'Fanfykzr50987', 'Erinvqoar93536', 'Trishaurmzo98945', 'Saideeatgvv91621',
                       'Valekjqrg59408', 'Shalnarkywn06240', 'Ajaynuzyu74116', 'Norriytewf00304', 'Blithesqdmp39970',
                       'Timmyqwpue74987', 'Corrymdhlo48683', 'Caseyuzliq67708', 'Berridgntf51600', 'Sandehcogk48635',
                       'Amityehtmh99136', 'Kasseysrjfc87489', 'Corieeudby61560', 'Danelluldjk81340', 'Erdahdxoq39850',
                       'Monaekjbu98759', 'Mollielffky39905', 'Zorahyzmll12022', 'Brynnmxjyx08291', 'Leylaeqftg39049',
                       'Margityiucr78104', 'Daffihyebk61079', 'Rorieyidwu40663', 'Vinnieprqml54105', 'Margeobgsg75036',
                       'Shainecqtks40722', 'Illabthgp64655', 'Pansiertxne55150', 'Minnieacsqd37125', 'Blondymejvm32620',
                       'Tommiemaay28574', 'Bambyhyxsd85886', 'Ceilxssim35478', 'Nancicvlrr88075', 'Janisljwvb29487',
                       'Tobyesrsjt32584', 'Codeecpytz95363', 'Joseyhrfyd07893'}

-- ตัวแปรสำหรับการทำงาน
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local GuiService = game:GetService("GuiService")
local VirtualInputManager = game:GetService("VirtualInputManager")

-- ตัวแปรสำหรับ tracking
local currentStep = 0
local currentStepReceiver = 0 -- ตัวแปรแยกสำหรับ receiver mode
local isTrading = false
local tradePartner = nil

-- ตัวแปรสำหรับตรวจสอบสถานะการเพิ่มไอเทม
local shroomAdded = false
local tokenAdded = false
local creatureAdded = false

-- ตัวแปรควบคุมการเรียก remote (ป้องกันการเรียกซ้อน)
local isRemoteBusy = false
local lastRemoteCallTime = 0

-- ตัวแปรสำหรับ state-based tracking (เพิ่มใหม่)
local receiverCreatureStartTime = 0
local receiverCreatureRequested = false
local receiverAcceptStartTime = 0
local receiverAcceptRequested = false

-- ตัวแปรสำหรับ receiver timeout (เพิ่มใหม่)
local lastTradeRequestTime = tick()
local RECEIVER_TIMEOUT = 300 -- 5 นาที (300 วินาที)

-- ตัวแปรสำหรับ sender state-based tracking
local senderShroomStartTime = 0
local senderShroomRequested = false
local senderTokenStartTime = 0
local senderTokenRequested = false
local senderCreatureStartTime = 0
local senderCreatureRequested = false
local senderAcceptStartTime = 0
local senderAcceptRequested = false

-- ตัวแปรป้องกันการทำงานพร้อมกัน
local isSenderMainActive = false
local isSenderReceiverActive = false

-- ตัวแปรสำหรับ timeout การรอเริ่มเทรดหลังส่งคำขอหา receiver
local SENDER_REQUEST_TIMEOUT = 200 -- วินาที
local lastSentTargetName = nil
local lastSentTargetIsReceiver = false
local lastSentTime = 0

-- ฟังก์ชันช่วยเหลือ
local function IsInList(name, list)
    for _, listName in ipairs(list) do
        if name == listName then
            return true
        end
    end
    return false
end

local function Clicked_Ui(path)
    local success, error = pcall(function()
        GuiService.SelectedObject = path
    end)

    if not success then
        warn("❌ เกิดข้อผิดพลาดในการเลือก UI: " .. tostring(error))
    end
end

local function Click_NOW()
    local success, error = pcall(function()
        VirtualInputManager:SendKeyEvent(true, 13, false, game)
        wait(0.1)
        VirtualInputManager:SendKeyEvent(false, 13, false, game)
        task.wait(2)
        Clicked_Ui(nil)
    end)

    if not success then
        warn("❌ เกิดข้อผิดพลาดในการกดปุ่ม: " .. tostring(error))
    end
end

-- ฟังก์ชันวาร์ปไปยังตำแหน่งที่กำหนด
local function WarpToLocation()
    local success, error = pcall(function()
        local character = LocalPlayer.Character
        if character then
            character:PivotTo(CFrame.new(Vector3.new(-2132.24, 490.66, 1106.83)))
            print("✅ วาร์ปไปยังตำแหน่งที่กำหนดแล้ว")
        end
    end)

    if not success then
        warn("❌ เกิดข้อผิดพลาดในการวาร์ป: " .. tostring(error))
    end
end

-- ฟังก์ชันหาคู่เทรดที่ว่าง
local function FindValidReceiver()
    local result = nil
    local success, error = pcall(function()
        -- ตรวจสอบ coins ก่อน
        local coinsValue = LocalPlayer.Data.Coins.Value
        if coinsValue <= 20 then
            print("💰 Coins ไม่เพียงพอ (" .. coinsValue .. " <= 20) ไม่ทำการเทรด")
            return nil
        end
        
        print("🔍 กำลังค้นหาคู่เทรดที่ว่าง...")

        -- ค้นหา receiver ที่ว่าง
        local validReceivers = {}
        local getPlayersSuccess = pcall(function()
            for _, player in pairs(Players:GetPlayers()) do
                if IsInList(player.Name, RECEIVER_LIST) then
                    local isAvailable = false
                    local tradingValue = nil
                    local checkSuccess = pcall(function()
                        if player and player:FindFirstChild("Settings") and player.Settings:FindFirstChild("Trading") then
                            tradingValue = player.Settings.Trading.Value
                            isAvailable = (tradingValue == false)
                        else
                            isAvailable = true
                            tradingValue = "unknown"
                        end
                    end)

                    if not checkSuccess then
                        print(
                            "⚠️ เกิดข้อผิดพลาดในการเช็คสถานะ " ..
                                player.Name .. " สมมติว่าว่าง...")
                        isAvailable = true
                        tradingValue = "error"
                    end

                    if isAvailable then
                        print("✅ พบ receiver ที่ว่าง: " .. player.Name .. " (Trading.Value = " ..
                                  tostring(tradingValue) .. ")")
                        table.insert(validReceivers, player)
                    else
                        print("❌ Receiver " .. player.Name ..
                                  " กำลังเทรดอยู่ (Trading.Value = " .. tostring(tradingValue) ..
                                  ")")
                    end
                end
            end
        end)

        if not getPlayersSuccess then
            print(
                "❌ เกิดข้อผิดพลาดในการดึงรายชื่อผู้เล่น")
            return nil
        end

        -- ถ้ามี receiver ว่าง ให้เลือกหนึ่งคน
        if #validReceivers > 0 then
            local selected = validReceivers[math.random(1, #validReceivers)]
            print("🎯 เลือก receiver: " .. selected.Name)
            result = selected
            return
        end

        -- ถ้าไม่มี receiver ว่าง ให้ค้นหา sender อื่นที่ว่าง
        print("ไม่มี receiver ว่าง กำลังค้นหา sender อื่น...")
        local validSenders = {}
        for _, player in pairs(Players:GetPlayers()) do
            if IsInList(player.Name, SENDER_LIST) and player.Name ~= LocalPlayer.Name then
                local isAvailable = false
                local tradingValue = nil
                pcall(function()
                    tradingValue = player.Settings.Trading.Value
                    isAvailable = (tradingValue == false)
                end)

                if isAvailable then
                    print("✅ พบ sender ที่ว่าง: " .. player.Name .. " (Trading.Value = " ..
                              tostring(tradingValue) .. ")")
                    table.insert(validSenders, player)
                else
                    print(
                        "❌ Sender " .. player.Name .. " กำลังเทรดอยู่ (Trading.Value = " ..
                            tostring(tradingValue) .. ")")
                end
            end
        end

        if #validSenders > 0 then
            local selected = validSenders[math.random(1, #validSenders)]
            print("🎯 เลือก sender เพื่อเทรดด้วย: " .. selected.Name)
            result = selected
            return
        end

        print("❌ ไม่พบคู่เทรดที่ว่าง")
    end)
    if not success then
        warn("❌ เกิดข้อผิดพลาดในฟังก์ชัน FindValidReceiver: " ..
                 tostring(error))
    end
    return result
end

-- ฟังก์ชันส่ง trade request
local function SendTradeRequest(receiverName)
    local success, error = pcall(function()
        local args = {"SendRequest", game:GetService("Players"):WaitForChild(receiverName)}
        game:GetService("Players").LocalPlayer:WaitForChild("Remotes"):WaitForChild("TradeRequestRemote"):FireServer(
            unpack(args))
        print("📤 ส่ง trade request ไปยัง " .. receiverName)
    end)

    if not success then
        warn("❌ เกิดข้อผิดพลาดในการส่ง trade request: " .. tostring(error))
        return false
    end

    return true
end

-- ฟังก์ชันหาผู้เล่น sender ที่ว่าง (ค้นหาเฉพาะ sender)
local function FindAvailableSender()
    local result = nil
    local success, error = pcall(function()
        print("🔍 กำลังค้นหา sender ที่ว่าง...")

        local validSenders = {}
        for _, player in pairs(Players:GetPlayers()) do
            if IsInList(player.Name, SENDER_LIST) and player.Name ~= LocalPlayer.Name then
                local isAvailable = false
                local tradingValue = nil
                pcall(function()
                    if player and player:FindFirstChild("Settings") and player.Settings:FindFirstChild("Trading") then
                        tradingValue = player.Settings.Trading.Value
                        isAvailable = (tradingValue == false)
                    else
                        isAvailable = true
                        tradingValue = "unknown"
                    end
                end)

                if isAvailable then
                    print("✅ พบ sender ที่ว่าง: " .. player.Name .. " (Trading.Value = " .. tostring(tradingValue) .. ")")
                    table.insert(validSenders, player)
                else
                    print("❌ Sender " .. player.Name .. " กำลังเทรดอยู่ (Trading.Value = " .. tostring(tradingValue) .. ")")
                end
            end
        end

        if #validSenders > 0 then
            local selected = validSenders[math.random(1, #validSenders)]
            print("🎯 เลือก sender: " .. selected.Name)
            result = selected
            return
        end

        print("❌ ไม่พบ sender ที่ว่าง")
    end)
    if not success then
        warn("❌ เกิดข้อผิดพลาดในฟังก์ชัน FindAvailableSender: " .. tostring(error))
    end
    return result
end

-- ฟังก์ชัน add shroom
local function AddShroom()
    local tradeGuiSafe = LocalPlayer.PlayerGui and LocalPlayer.PlayerGui:FindFirstChild("TradeGui")
    if not (tradeGuiSafe and tradeGuiSafe.Enabled) then
        print("❌ TradeGui ไม่เปิดใช้งาน")
        return false
    end

    local success, error = pcall(function()
        -- ตรวจสอบ coins ก่อน
        local coinsValue = LocalPlayer.Data.Coins.Value
        if coinsValue <= 20 then
            print("💰 Coins ไม่เพียงพอ (" .. coinsValue .. " <= 20) ไม่สามารถเพิ่ม shroom ได้")
            return false
        end
        
        local tradeGui = LocalPlayer.PlayerGui.TradeGui
        local containerFrame = tradeGui.ContainerFrame
        local theirsFrame = containerFrame.Theirs
        local displayNameLabel = theirsFrame.DisplayNameLabel
        local userNameLabel = displayNameLabel.UserNameLabel
        local opponentName = userNameLabel.Text

        opponentName = opponentName:gsub("@", "")
        local localPlayerName = LocalPlayer.Name

        local amount = coinsValue - 20
        if amount > 500000 then
            amount = 500000
        end
        if amount < 0 then
            amount = 0
        end

        local args = {"AddTradeItem", {
            Overwrite = true,
            ItemType = "Currency",
            Name = "Shooms",
            Amount = amount
        }}

        if not LocalPlayer.PlayerGui.TradeGui.Enabled then
            print("❌ TradeGui ถูกปิดระหว่าง AddShroom, reset currentStep")
            currentStep = 0
            return false
        end

        local remote1Name = localPlayerName .. "-" .. opponentName .. "TradeRemote"
        local remote1 = ReplicatedStorage:FindFirstChild("Remotes") and
                            ReplicatedStorage.Remotes:FindFirstChild(remote1Name)
        if not remote1 then
            print("❌ ไม่พบ remote1: " .. tostring(remote1Name))
            currentStep = 0
            return false
        end
        remote1:InvokeServer(unpack(args))
        print("⏳ รอ 3 วินาทีหลังใช้ remote1...")
        wait(3)

        local remote2Name = opponentName .. "-" .. localPlayerName .. "TradeRemote"
        local remote2 = ReplicatedStorage:FindFirstChild("Remotes") and
                            ReplicatedStorage.Remotes:FindFirstChild(remote2Name)
        if not remote2 then
            print("❌ ไม่พบ remote2: " .. tostring(remote2Name))
            currentStep = 0
            return false
        end
        remote2:InvokeServer(unpack(args))
        print("⏳ รอ 3 วินาทีหลังใช้ remote2...")
        wait(3)

        print("✅ เพิ่ม " .. amount .. " Shrooms ในการเทรดกับ " .. opponentName)
        return true
    end)

    if not success then
        warn("❌ เกิดข้อผิดพลาดในฟังก์ชัน AddShroom: " ..
                 tostring(error))
        currentStep = 0
        return false
    end

    return true
end

-- ฟังก์ชัน add token
local function AddToken()
    local tradeGuiSafe = LocalPlayer.PlayerGui and LocalPlayer.PlayerGui:FindFirstChild("TradeGui")
    if not (tradeGuiSafe and tradeGuiSafe.Enabled) then
        print("❌ TradeGui ไม่เปิดใช้งาน")
        return false
    end

    -- ตรวจสอบว่า remote กำลังใช้งานอยู่หรือไม่
    if isRemoteBusy then
        print("⚠️ Remote กำลังใช้งานอยู่ รอสักครู่...")
        return false
    end

    local tokenList = {'ChangeCreatureColorsToken', 'CreatureReviveToken', 'FullGrowToken', 'PartialGrowToken',
                       'FreeSpinToken', 'RandomStoredCreatureToken','DeathGachaToken'}

    local success, error = pcall(function()
        local tradeGui = LocalPlayer.PlayerGui.TradeGui
        local containerFrame = tradeGui.ContainerFrame
        local theirsFrame = containerFrame.Theirs
        local displayNameLabel = theirsFrame.DisplayNameLabel
        local userNameLabel = displayNameLabel.UserNameLabel
        local opponentName = userNameLabel.Text

        opponentName = opponentName:gsub('@', '')
        local localPlayerName = LocalPlayer.Name

        -- ตั้งค่า remote กำลังใช้งาน
        isRemoteBusy = true

        for i, tokenName in ipairs(tokenList) do
            if not LocalPlayer.PlayerGui.TradeGui.Enabled then
                print("❌ TradeGui ถูกปิดระหว่าง AddToken, reset currentStep")
                isRemoteBusy = false
                currentStep = 0
                return false
            end

            local args = {'AddTradeItem', {
                Overwrite = true,
                ItemType = 'Tokens',
                Name = tokenName,
                Amount = 150
            }}

            local remoteName = localPlayerName .. '-' .. opponentName .. 'TradeRemote'
            local remote = ReplicatedStorage:FindFirstChild('Remotes') and
                               ReplicatedStorage.Remotes:FindFirstChild(remoteName)
            if not remote then
                print('❌ ไม่พบ remote: ' .. tostring(remoteName))
                isRemoteBusy = false
                currentStep = 0
                return false
            end

            print("📤 กำลังเพิ่ม " .. tokenName .. " (" .. i .. "/" .. #tokenList .. ")...")

            local remoteSuccess, remoteError = pcall(function()
                remote:InvokeServer(unpack(args))
            end)

            if not remoteSuccess then
                warn(
                    "❌ เกิดข้อผิดพลาดในการเรียก remote สำหรับ " ..
                        tokenName .. ": " .. tostring(remoteError))
                isRemoteBusy = false
                currentStep = 0
                return false
            end

            print('✅ เพิ่ม ' .. tokenName .. ' ในการเทรดกับ ' .. opponentName)

            -- รอ 3 วินาทีหลังใช้ remote
            print("⏳ รอ 3 วินาทีหลังใช้ remote สำหรับ " .. tokenName ..
                      "...")
            wait(3)
        end

        -- ปลดล็อค remote
        isRemoteBusy = false
        print('✅ เพิ่ม token ทั้งหมดเสร็จสิ้น')
        return true
    end)

    if not success then
        warn("❌ เกิดข้อผิดพลาดในฟังก์ชัน AddToken: " ..
                 tostring(error))
        isRemoteBusy = false
        currentStep = 0
        return false
    end

    return true
end

-- ฟังก์ชัน add creature สำหรับ Receiver แบบปลอดภัย
local function AddCreatureReceiver()
    local tradeGuiSafe = LocalPlayer.PlayerGui and LocalPlayer.PlayerGui:FindFirstChild("TradeGui")
    if not (tradeGuiSafe and tradeGuiSafe.Enabled) then
        print("❌ TradeGui ไม่เปิดใช้งาน")
        return false
    end

    -- ตรวจสอบว่า remote กำลังใช้งานอยู่หรือไม่
    if isRemoteBusy then
        print("⚠️ Remote กำลังใช้งานอยู่ รอสักครู่...")
        return false
    end

    local success, error = pcall(function()
        local Unlocks = LocalPlayer.Data and LocalPlayer.Data.Unlocks
        local creatureName = nil

        if LocalPlayer and LocalPlayer.Data and LocalPlayer.Data.Unlocks then
            for _, child in pairs(Unlocks:GetChildren()) do
                if not LocalPlayer.PlayerGui.TradeGui.Enabled then
                    print('❌ TradeGui ถูกปิดระหว่าง AddCreatureReceiver, reset currentStep')
                    currentStepReceiver = 0
                    return false
                end
                if child:IsA('ValueBase') and tonumber(child.Value) and tonumber(child.Value) > 0 then
                    if child.Name ~= "Vin'rou" and child.Name ~= 'Eulopii' then
                        creatureName = child.Name
                        break
                    end
                end
            end

            if not creatureName then
                warn('❌ ไม่พบ creature ที่ตรงเงื่อนไข')
                currentStepReceiver = 0
                return false
            end

            local theirLabel = LocalPlayer.PlayerGui and LocalPlayer.PlayerGui:FindFirstChild('TradeGui') and
                                   LocalPlayer.PlayerGui.TradeGui.ContainerFrame.Theirs.DisplayNameLabel.UserNameLabel

            if not theirLabel or not theirLabel.Text then
                warn('❌ ไม่พบชื่อฝ่ายตรงข้าม')
                currentStepReceiver = 0
                return false
            end

            local otherPlayerName = theirLabel.Text
            if string.sub(otherPlayerName, 1, 1) == '@' then
                otherPlayerName = string.sub(otherPlayerName, 2)
            end

            local remoteName = otherPlayerName .. '-' .. LocalPlayer.Name .. 'TradeRemote'
            local remotes = ReplicatedStorage:FindFirstChild('Remotes')
            if not remotes then
                print('❌ ไม่พบ Remotes folder')
                currentStepReceiver = 0
                return false
            end

            local remote = remotes:FindFirstChild(remoteName)
            if not remote then
                print('❌ ไม่พบ remote: ' .. tostring(remoteName))
                currentStepReceiver = 0
                return false
            end

            if not LocalPlayer.PlayerGui.TradeGui.Enabled then
                print('❌ TradeGui ถูกปิดระหว่าง AddCreatureReceiver, reset currentStep')
                currentStepReceiver = 0
                return false
            end

            -- ตรวจสอบเวลาที่ผ่านไปตั้งแต่ remote call ล่าสุด
            local timeSinceLastCall = tick() - lastRemoteCallTime
            if timeSinceLastCall < 3 then
                local waitTime = 3 - timeSinceLastCall
                print("⏳ รอ " .. string.format("%.1f", waitTime) ..
                          " วินาทีก่อนเรียก remote สำหรับ creature...")
                wait(waitTime)
            end

            -- ตั้งค่า remote กำลังใช้งาน
            isRemoteBusy = true
            lastRemoteCallTime = tick()

            local args = {'AddTradeItem', {
                Overwrite = true,
                ItemType = 'Creatures',
                Name = creatureName,
                Amount = 1
            }}

            print("📤 กำลังเพิ่ม creature: " .. creatureName .. "...")

            local remoteSuccess, remoteError = pcall(function()
                remote:InvokeServer(unpack(args))
            end)

            if not remoteSuccess then
                warn('❌ เกิดข้อผิดพลาดในการเรียก Remote: ' ..
                         tostring(remoteError))
                isRemoteBusy = false
                currentStepReceiver = 0
                return false
            else
                print('✅ เพิ่ม creature สำเร็จ!')
                lastRemoteCallTime = tick()

                -- รอ 3 วินาทีหลังใช้ remote
                print("⏳ รอ 3 วินาทีหลังใช้ remote สำหรับ creature...")
                wait(3)

                -- ปลดล็อค remote
                isRemoteBusy = false
                return true
            end
        else
            print('❌ ไม่สามารถเข้าถึง Data.Unlocks ได้')
            currentStepReceiver = 0
            return false
        end
    end)

    if not success then
        warn('❌ เกิดข้อผิดพลาดในฟังก์ชัน AddCreatureReceiver: ' ..
                 tostring(error))
        isRemoteBusy = false
        currentStepReceiver = 0
        return false
    end

    return true
end

-- ฟังก์ชัน add creature
local function AddCreature(isReceiver)
    local tradeGuiSafe = LocalPlayer.PlayerGui and LocalPlayer.PlayerGui:FindFirstChild("TradeGui")
    if not (tradeGuiSafe and tradeGuiSafe.Enabled) then
        print("❌ TradeGui ไม่เปิดใช้งาน")
        return false
    end

    -- ตรวจสอบว่า remote กำลังใช้งานอยู่หรือไม่
    if isRemoteBusy then
        print("⚠️ Remote กำลังใช้งานอยู่ รอสักครู่...")
        return false
    end

    local success, error = pcall(function()
        local Unlocks = LocalPlayer.Data and LocalPlayer.Data.Unlocks
        local creatureName = nil

        if LocalPlayer and LocalPlayer.Data and LocalPlayer.Data.Unlocks then
            for _, child in pairs(Unlocks:GetChildren()) do
                if not LocalPlayer.PlayerGui.TradeGui.Enabled then
                    print('❌ TradeGui ถูกปิดระหว่าง AddCreature, reset currentStep')
                    currentStep = 0
                    return false
                end
                if child:IsA('ValueBase') and tonumber(child.Value) and tonumber(child.Value) > 0 then
                    if child.Name ~= "Vin'rou" and child.Name ~= 'Eulopii' then
                        creatureName = child.Name
                        break
                    end
                end
            end

            if not creatureName then
                warn('❌ ไม่พบ creature ที่ตรงเงื่อนไข')
                currentStep = 0
                return false
            end

            local theirLabel = LocalPlayer.PlayerGui and LocalPlayer.PlayerGui:FindFirstChild('TradeGui') and
                                   LocalPlayer.PlayerGui.TradeGui.ContainerFrame.Theirs.DisplayNameLabel.UserNameLabel

            if not theirLabel or not theirLabel.Text then
                warn('❌ ไม่พบชื่อฝ่ายตรงข้าม')
                currentStep = 0
                return false
            end

            local otherPlayerName = theirLabel.Text
            if string.sub(otherPlayerName, 1, 1) == '@' then
                otherPlayerName = string.sub(otherPlayerName, 2)
            end

            local remoteName
            if isReceiver then
                remoteName = otherPlayerName .. '-' .. LocalPlayer.Name .. 'TradeRemote'
            else
                remoteName = LocalPlayer.Name .. '-' .. otherPlayerName .. 'TradeRemote'
            end
            local remote = ReplicatedStorage:FindFirstChild('Remotes') and
                               ReplicatedStorage.Remotes:FindFirstChild(remoteName)
            if not remote then
                print('❌ ไม่พบ remote: ' .. tostring(remoteName))
                currentStep = 0
                return false
            end

            if not LocalPlayer.PlayerGui.TradeGui.Enabled then
                print('❌ TradeGui ถูกปิดระหว่าง AddCreature, reset currentStep')
                currentStep = 0
                return false
            end

            -- ตรวจสอบเวลาที่ผ่านไปตั้งแต่ remote call ล่าสุด
            local timeSinceLastCall = tick() - lastRemoteCallTime
            if timeSinceLastCall < 3 then
                local waitTime = 3 - timeSinceLastCall
                print("⏳ รอ " .. string.format("%.1f", waitTime) ..
                          " วินาทีก่อนเรียก remote สำหรับ creature...")
                wait(waitTime)
            end

            -- ตั้งค่า remote กำลังใช้งาน
            isRemoteBusy = true
            lastRemoteCallTime = tick()

            local args = {'AddTradeItem', {
                Overwrite = true,
                ItemType = 'Creatures',
                Name = creatureName,
                Amount = 1
            }}

            print("📤 กำลังเพิ่ม creature: " .. creatureName .. "...")

            local remoteSuccess, remoteError = pcall(function()
                remote:InvokeServer(unpack(args))
            end)

            if not remoteSuccess then
                warn('❌ เกิดข้อผิดพลาดในการเรียก Remote: ' ..
                         tostring(remoteError))
                isRemoteBusy = false
                currentStep = 0
                return false
            else
                print('✅ เพิ่ม creature สำเร็จ!')
                lastRemoteCallTime = tick()

                -- รอ 3 วินาทีหลังใช้ remote
                print("⏳ รอ 3 วินาทีหลังใช้ remote สำหรับ creature...")
                wait(3)

                -- ปลดล็อค remote
                isRemoteBusy = false
                return true
            end
        else
            print('❌ ไม่สามารถเข้าถึง Data.Unlocks ได้')
            currentStep = 0
            return false
        end
    end)

    if not success then
        warn('❌ เกิดข้อผิดพลาดในฟังก์ชัน AddCreature: ' ..
                 tostring(error))
        isRemoteBusy = false
        currentStep = 0
        return false
    end

    return true
end

-- ฟังก์ชันกด accept สำหรับ Receiver แบบปลอดภัย
local function ClickAcceptReceiver()
    local success, error = pcall(function()
        if not LocalPlayer.PlayerGui.TradeGui.Enabled then
            print("❌ TradeGui ไม่เปิดใช้งาน")
            return false
        end

        -- ตรวจสอบว่า remote กำลังใช้งานอยู่หรือไม่
        if isRemoteBusy then
            print(
                "⚠️ Remote ยังใช้งานอยู่ ไม่สามารถกด accept ได้!")
            return false
        end

        local tradeGui = LocalPlayer.PlayerGui:FindFirstChild("TradeGui")
        if not tradeGui then
            print("❌ ไม่พบ TradeGui")
            return false
        end

        local containerFrame = tradeGui:FindFirstChild("ContainerFrame")
        if not containerFrame then
            print("❌ ไม่พบ ContainerFrame")
            return false
        end

        local acceptButton = containerFrame:FindFirstChild("AcceptButton")
        if not acceptButton then
            print("❌ ไม่พบ AcceptButton")
            return false
        end

        local upperLabel = acceptButton:FindFirstChild("UpperLabel")
        if not upperLabel then
            print("❌ ไม่พบ UpperLabel")
            return false
        end

        Clicked_Ui(upperLabel)
        task.wait(.1)
        Click_NOW()
        print("✅ กด accept แล้ว")
        return true
    end)

    if not success then
        warn("❌ เกิดข้อผิดพลาดในการกด accept: " .. tostring(error))
        return false
    end

    return true
end

-- ฟังก์ชันกด accept
local function ClickAccept()
    local success, error = pcall(function()
        if not LocalPlayer.PlayerGui.TradeGui.Enabled then
            print("❌ TradeGui ไม่เปิดใช้งาน")
            return false
        end

        -- ตรวจสอบว่า remote กำลังใช้งานอยู่หรือไม่
        if isRemoteBusy then
            print(
                "⚠️ Remote ยังใช้งานอยู่ ไม่สามารถกด accept ได้!")
            return false
        end

        Clicked_Ui(LocalPlayer.PlayerGui.TradeGui.ContainerFrame.AcceptButton.UpperLabel)
        task.wait(.1)
        Click_NOW()
        print("✅ กด accept แล้ว")
        return true
    end)

    if not success then
        warn("❌ เกิดข้อผิดพลาดในการกด accept: " .. tostring(error))
        return false
    end

    return true
end

-- ฟังก์ชันกด cancel
local function ClickCancel()
    local success, error = pcall(function()
        Clicked_Ui(LocalPlayer.PlayerGui.TradeGui.ContainerFrame.CancelButton.UpperLabel)
        task.wait(.1)
        Click_NOW()
        print("❌ ยกเลิกการเทรด")
    end)

    if not success then
        warn("❌ เกิดข้อผิดพลาดในการกด cancel: " .. tostring(error))
    end
end

-- ฟังก์ชันเช็คชื่อคู่เทรด
local function CheckTradePartner()
    local success, error = pcall(function()
        if not LocalPlayer.PlayerGui.TradeGui.Enabled then
            return false
        end

        local theirLabel = LocalPlayer.PlayerGui.TradeGui.ContainerFrame.Theirs.DisplayNameLabel.UserNameLabel
        if not theirLabel or not theirLabel.Text then
            return false
        end

        local opponentName = theirLabel.Text:gsub("@", "")

        -- เช็คว่าชื่อตรงกับในรายชื่อหรือไม่
        if IsInList(opponentName, RECEIVER_LIST) or IsInList(opponentName, SENDER_LIST) then
            print("✅ ชื่อคู่เทรดถูกต้อง: " .. opponentName)
            return true
        else
            print("❌ ชื่อคู่เทรดไม่ตรงกับรายชื่อ: " ..
                      opponentName)
            ClickCancel()
            return false
        end
    end)

    if not success then
        warn(
            "❌ เกิดข้อผิดพลาดในการเช็คชื่อคู่เทรด: " ..
                tostring(error))
        return false
    end

    return true
end

-- ฟังก์ชัน accept trade request สำหรับ Sender
local function AcceptTradeRequestForSender()
    local success, error = pcall(function()
        local requestsGui = LocalPlayer.PlayerGui:FindFirstChild('RequestsGui')
        if not requestsGui then
            return false
        end

        local requestsFrame = requestsGui:FindFirstChild('RequestsFrame')
        if not requestsFrame then
            return false
        end

        local mobileFrame = requestsFrame:FindFirstChild('Mobile')
        if mobileFrame then
            for _, child in pairs(mobileFrame:GetChildren()) do
                if string.find(child.Name, "^Trade") then
                    local senderName = child.Name:sub(6) -- ตัด "Trade" ออก
                    -- Sender สามารถรับ trade request จาก sender อื่นได้
                    if IsInList(senderName, SENDER_LIST) then
                        print("✅ Sender พบ trade request แบบ Mobile จาก " .. senderName .. " กำลัง accept...")

                        -- อัปเดตเวลาสุดท้ายที่ได้รับ trade request (เพิ่มใหม่)
                        lastTradeRequestTime = tick()

                        Clicked_Ui(child.AcceptButton.UpperLabel)
                        task.wait(.1)
                        Click_NOW()
                        return true
                    else
                        print("❌ Trade request แบบ Mobile จาก " .. senderName ..
                              " ไม่ตรงกับรายชื่อ กำลัง decline...")
                        Clicked_Ui(child.DeclineButton.UpperLabel)
                        task.wait(.1)
                        Click_NOW()
                    end
                end
            end
        end

        local otherFrame = requestsFrame:FindFirstChild('Other')
        if not otherFrame then
            return false
        end

        for _, child in pairs(otherFrame:GetChildren()) do
            if string.find(child.Name, "^Trade") then
                local senderName = child.Name:sub(6) -- ตัด "Trade" ออก
                -- Sender สามารถรับ trade request จาก sender อื่นได้
                if IsInList(senderName, SENDER_LIST) then
                    print("✅ Sender พบ trade request แบบ Other จาก " .. senderName .. " กำลัง accept...")

                    -- อัปเดตเวลาสุดท้ายที่ได้รับ trade request (เพิ่มใหม่)
                    lastTradeRequestTime = tick()

                    Clicked_Ui(child.AcceptButton.UpperLabel)
                    task.wait(.1)
                    Click_NOW()
                    return true
                else
                    print("❌ Trade request จาก " .. senderName ..
                              " ไม่ตรงกับรายชื่อ กำลัง decline...")
                    Clicked_Ui(child.DeclineButton.UpperLabel)
                    task.wait(.1)
                    Click_NOW()
                end
            end
        end

        return false
    end)

    if not success then
        warn(
            "❌ เกิดข้อผิดพลาดในการ accept trade request สำหรับ Sender: " ..
                tostring(error))
        return false
    end

    return true
end

-- ฟังก์ชัน accept trade request สำหรับ Receiver แบบปลอดภัย
local function AcceptTradeRequestReceiver()
    local success, error = pcall(function()
        local requestsGui = LocalPlayer.PlayerGui:FindFirstChild('RequestsGui')
        if not requestsGui then
            return false
        end

        local requestsFrame = requestsGui:FindFirstChild('RequestsFrame')
        if not requestsFrame then
            return false
        end

        local mobileFrame = requestsFrame:FindFirstChild('Mobile')
        if mobileFrame then
            for _, child in pairs(mobileFrame:GetChildren()) do
                if string.find(child.Name, "^Trade") then
                    local senderName = child.Name:sub(6) -- ตัด "Trade" ออก
                    if IsInList(senderName, SENDER_LIST) then
                        print("✅ Receiver พบ trade request แบบ Mobile จาก " .. senderName .. " กำลัง accept...")

                        -- อัปเดตเวลาสุดท้ายที่ได้รับ trade request (เพิ่มใหม่)
                        lastTradeRequestTime = tick()

                        Clicked_Ui(child.AcceptButton.UpperLabel)
                        task.wait(.1)
                        Click_NOW()
                        return true
                    else
                        print("❌ Trade request แบบ Mobile จาก " .. senderName ..
                                  " ไม่ตรงกับรายชื่อ กำลัง decline...")
                        Clicked_Ui(child.DeclineButton.UpperLabel)
                        task.wait(.1)
                        Click_NOW()
                    end
                end
            end
        end

        local otherFrame = requestsFrame:FindFirstChild('Other')
        if not otherFrame then
            return false
        end

        for _, child in pairs(otherFrame:GetChildren()) do
            if string.find(child.Name, "^Trade") then
                local senderName = child.Name:sub(6) -- ตัด "Trade" ออก
                if IsInList(senderName, SENDER_LIST) then
                    print("✅ Receiver พบ trade request แบบ Other จาก " .. senderName .. " กำลัง accept...")

                    -- อัปเดตเวลาสุดท้ายที่ได้รับ trade request (เพิ่มใหม่)
                    lastTradeRequestTime = tick()

                    Clicked_Ui(child.AcceptButton.UpperLabel)
                    task.wait(.1)
                    Click_NOW()
                    return true
                else
                    print("❌ Trade request จาก " .. senderName ..
                              " ไม่ตรงกับรายชื่อ กำลัง decline...")
                    Clicked_Ui(child.DeclineButton.UpperLabel)
                    task.wait(.1)
                    Click_NOW()
                end
            end
        end

        return false
    end)

    if not success then
        warn(
            "❌ เกิดข้อผิดพลาดในการ accept trade request สำหรับ Receiver: " ..
                tostring(error))
        return false
    end

    return true
end

-- ฟังก์ชัน accept trade request สำหรับ Receiver
local function AcceptTradeRequest()
    local success, error = pcall(function()
        local requestsGui = LocalPlayer.PlayerGui:FindFirstChild('RequestsGui')
        if not requestsGui then
            return false
        end

        local requestsFrame = requestsGui:FindFirstChild('RequestsFrame')
        if not requestsFrame then
            return false
        end

        local mobileFrame = requestsFrame:FindFirstChild('Mobile')
        if mobileFrame then
            for _, child in pairs(mobileFrame:GetChildren()) do
                if string.find(child.Name, "^Trade") then
                    local senderName = child.Name:sub(6) -- ตัด "Trade" ออก
                    if IsInList(senderName, SENDER_LIST) then
                        print("✅ Receiver พบ trade request แบบ Mobile จาก " .. senderName .. " กำลัง accept...")

                        -- อัปเดตเวลาสุดท้ายที่ได้รับ trade request (เพิ่มใหม่)
                        lastTradeRequestTime = tick()

                        Clicked_Ui(child.AcceptButton.UpperLabel)
                        task.wait(.1)
                        Click_NOW()
                        return true
                    else
                        print("❌ Trade request แบบ Mobile จาก " .. senderName ..
                                  " ไม่ตรงกับรายชื่อ กำลัง decline...")
                        Clicked_Ui(child.DeclineButton.UpperLabel)
                        task.wait(.1)
                        Click_NOW()
                    end
                end
            end
        end

        local otherFrame = requestsFrame:FindFirstChild('Other')
        if not otherFrame then
            return false
        end

        for _, child in pairs(otherFrame:GetChildren()) do
            if string.find(child.Name, "^Trade") then
                local senderName = child.Name:sub(6) -- ตัด "Trade" ออก
                if IsInList(senderName, SENDER_LIST) then
                    print("✅ Receiver พบ trade request แบบ Other จาก " .. senderName .. " กำลัง accept...")

                    -- อัปเดตเวลาสุดท้ายที่ได้รับ trade request (เพิ่มใหม่)
                    lastTradeRequestTime = tick()

                    Clicked_Ui(child.AcceptButton.UpperLabel)
                    task.wait(.1)
                    Click_NOW()
                    return true
                else
                    print("❌ Trade request จาก " .. senderName ..
                              " ไม่ตรงกับรายชื่อ กำลัง decline...")
                    Clicked_Ui(child.DeclineButton.UpperLabel)
                    task.wait(.1)
                    Click_NOW()
                end
            end
        end

        return false
    end)

    if not success then
        warn(
            "❌ เกิดข้อผิดพลาดในการ accept trade request สำหรับ Receiver: " ..
                tostring(error))
        return false
    end

    return true
end

-- ฟังก์ชัน Coroutine สำหรับ Sender ที่รับ trade request
local function SenderReceiverCoroutine()
    while true do
        local success, error = pcall(function()
            -- ตรวจสอบ coins ก่อน
            local coinsValue = LocalPlayer.Data.Coins.Value
            if coinsValue <= 20 then
                print("💰 Coins ไม่เพียงพอ (" .. coinsValue .. " <= 20) SenderReceiver ไม่ทำงาน")
                wait(10) -- รอ 10 วินาทีก่อนตรวจสอบใหม่
                return
            end
            
            if not LocalPlayer.PlayerGui.TradeGui.Enabled then
                -- รอ trade request
                AcceptTradeRequestForSender()

                -- ตรวจสอบ timeout สำหรับ Sender ที่ทำงานแบบ Receiver (เพิ่มใหม่)
                local timeSinceLastRequest = tick() - lastTradeRequestTime
                local timeRemaining = RECEIVER_TIMEOUT - timeSinceLastRequest

                if timeSinceLastRequest >= RECEIVER_TIMEOUT then
                    print("⚠️ Sender (Receiver mode) ไม่ได้รับ trade request นาน " ..
                              string.format("%.1f", timeSinceLastRequest) .. " วินาที (เกิน " ..
                              RECEIVER_TIMEOUT .. " วินาที)")
                    print(
                        "🔄 กำลังเปลี่ยนเซิร์ฟเวอร์เพื่อหาคู่เทรดใหม่...")

                    local success, error = pcall(function()
                        local TeleportService = game:GetService("TeleportService")
                        TeleportService:Teleport(14119723130)
                    end)

                    if not success then
                        warn(
                            "❌ เกิดข้อผิดพลาดในการเปลี่ยนเซิร์ฟเวอร์: " ..
                                tostring(error))
                        print("🚪 กำลังออกจากเกม...")
                        game:Shutdown()
                    end
                    return
                else
                    -- แสดงสถานะเวลาที่เหลือทุก 30 วินาที
                    if math.floor(timeSinceLastRequest) % 30 == 0 or timeRemaining <= 60 then
                        print(
                            "⏰ Sender (Receiver mode) รอ trade request... เหลือเวลาอีก " ..
                                string.format("%.0f", timeRemaining) ..
                                " วินาทีก่อนเปลี่ยนเซิร์ฟเวอร์")
                    end
                end

                -- รีเซ็ตสถานะเมื่อไม่ได้เทรด
                receiverCreatureStartTime = 0
                receiverCreatureRequested = false
                receiverAcceptStartTime = 0
                receiverAcceptRequested = false
                currentStepReceiver = 0
                isSenderReceiverActive = false
                wait(2)
            else
                -- กำลังเทรดอยู่ (เมื่อเป็น receiver)
                -- ตรวจสอบว่ามี trade request หรือไม่
                local hasTradeRequest = false
                local requestsFrame = LocalPlayer.PlayerGui.RequestsGui.RequestsFrame.Other
                if requestsFrame then
                    for _, child in pairs(requestsFrame:GetChildren()) do
                        if string.find(child.Name, "^Trade") then
                            hasTradeRequest = true
                            break
                        end
                    end
                end

                -- ถ้ามี trade request ให้ override main sender
                if hasTradeRequest then
                    print("📩 พบ trade request กำลัง override Main Sender...")
                    isSenderMainActive = false
                end

                -- ตรวจสอบว่า main sender loop กำลังทำงานอยู่หรือไม่
                if isSenderMainActive then
                    print(
                        "⏸️ Main Sender กำลังทำงานอยู่ SenderReceiver รอสักครู่...")
                    wait(1)
                    return
                end

                if currentStepReceiver == 0 then
                    -- เช็คชื่อคู่เทรดก่อน
                    if CheckTradePartner() then
                        isSenderReceiverActive = true
                        currentStepReceiver = 1
                        print(
                            "🚀 Sender เริ่มขั้นตอนที่ 1: Add Creature (โหมด Receiver)")
                    else
                        wait(1)
                    end
                elseif currentStepReceiver == 1 then
                    -- Add Creature - ใช้ state-based tracking
                    if not receiverCreatureRequested then
                        -- ตรวจสอบว่า remote กำลังใช้งานอยู่หรือไม่
                        if isRemoteBusy then
                            print(
                                "⏳ Remote กำลังใช้งานอยู่ รอสักครู่...")
                            wait(1)
                        else
                            print("🚀 เริ่ม Add Creature...")
                            -- เริ่มทำ AddCreature แบบไม่รอผลลัพธ์
                            spawn(function()
                                AddCreature(true)
                            end)
                            receiverCreatureRequested = true
                            receiverCreatureStartTime = tick()
                            print("⏳ รอให้ Add Creature เสร็จ...")
                        end
                    else
                        -- ตรวจสอบว่าผ่านไป 5 วินาทีแล้วหรือยัง
                        local elapsedTime = tick() - receiverCreatureStartTime
                        if elapsedTime >= 5 then
                            currentStepReceiver = 2
                            print(
                                "   Sender เริ่มขั้นตอนที่ 2: Click Accept (โหมด Receiver)")
                        else
                            print("⏳ รอ Add Creature เสร็จ... (" ..
                                      string.format("%.1f", 5 - elapsedTime) .. " วินาที)")
                        end
                    end
                elseif currentStepReceiver == 2 then
                    -- Click Accept - ใช้ state-based tracking
                    if not receiverAcceptRequested then
                        print("🚀 เริ่ม Click Accept...")
                        -- เริ่มทำ ClickAccept แบบไม่รอผลลัพธ์
                        spawn(function()
                            ClickAccept()
                        end)
                        receiverAcceptRequested = true
                        receiverAcceptStartTime = tick()
                        print("⏳ รอให้ Click Accept เสร็จ...")
                    else
                        -- ตรวจสอบว่าผ่านไป 3 วินาทีแล้วหรือยัง
                        local elapsedTime = tick() - receiverAcceptStartTime
                        if elapsedTime >= 3 then
                            currentStepReceiver = 0
                            print("✅ Sender เทรดเสร็จสิ้น (โหมด Receiver)")
                            -- รีเซ็ตสถานะ
                            receiverCreatureStartTime = 0
                            receiverCreatureRequested = false
                            receiverAcceptStartTime = 0
                            receiverAcceptRequested = false
                            isSenderReceiverActive = false
                        else
                            print("⏳ รอ Click Accept เสร็จ... (" ..
                                      string.format("%.1f", 3 - elapsedTime) .. " วินาที)")
                        end
                    end
                end
                wait(1)
            end
        end)

        if not success then
            warn("❌ เกิดข้อผิดพลาดใน SenderReceiverCoroutine: " .. tostring(error))
            currentStepReceiver = 0
            -- รีเซ็ตสถานะ
            receiverCreatureStartTime = 0
            receiverCreatureRequested = false
            receiverAcceptStartTime = 0
            receiverAcceptRequested = false
            isSenderReceiverActive = false
            wait(5) -- รอ 5 วินาทีก่อนลองใหม่
        end
    end
end

function TradeStepHandlerSender(step)
    if not LocalPlayer.PlayerGui.TradeGui.Enabled then
        -- ยังไม่ได้เทรด
        if step ~= 0 then
            print(
                "Trade ถูกยกเลิกหรือจบกลางคัน กำลัง reset step...")
            -- รีเซ็ตสถานะการเพิ่มไอเทม
            shroomAdded = false
            tokenAdded = false
            creatureAdded = false
            -- รีเซ็ตสถานะ sender tracking
            senderShroomStartTime = 0
            senderShroomRequested = false
            senderTokenStartTime = 0
            senderTokenRequested = false
            senderCreatureStartTime = 0
            senderCreatureRequested = false
            senderAcceptStartTime = 0
            senderAcceptRequested = false
            isSenderMainActive = false
            -- รีเซ็ตสถานะการส่งคำขอค้าง
            lastSentTargetName = nil
            lastSentTargetIsReceiver = false
            lastSentTime = 0
            step = 0
        end

        -- ตรวจสอบว่า SenderReceiver กำลังทำงานอยู่หรือไม่
        if isSenderReceiverActive then
            print(
                "⏸️ SenderReceiver กำลังทำงานอยู่ Main Sender รอสักครู่...")
            return 0
        end

        -- ตรวจสอบ coins ก่อน
        local coinsValue = LocalPlayer.Data.Coins.Value
        if coinsValue <= 20 then
            print("💰 Coins ไม่เพียงพอ (" .. coinsValue .. " <= 20) ไม่ทำการเทรด")
            -- ถ้า coins ไม่เพียงพอ ให้ปลดล็อค main sender และรอ
            isSenderMainActive = false
            wait(10) -- รอ 10 วินาทีก่อนตรวจสอบใหม่
        else
            -- ถ้าส่งหา receiver ค้างไว้นานเกินกำหนด ให้ลองหา sender ที่ว่างแทน
            if lastSentTargetIsReceiver and lastSentTime > 0 then
                local elapsed = tick() - lastSentTime
                if elapsed >= SENDER_REQUEST_TIMEOUT then
                    print("⚠️ รอเริ่มเทรดกับ receiver (" .. tostring(lastSentTargetName) .. ") นานเกิน " .. SENDER_REQUEST_TIMEOUT .. " วินาที กำลังหา sender แทน...")
                    local fallbackSender = FindAvailableSender()
                    if fallbackSender then
                        SendTradeRequest(fallbackSender.Name)
                        lastSentTargetName = fallbackSender.Name
                        lastSentTargetIsReceiver = false
                        lastSentTime = tick()
                        return 0
                    else
                        -- ปรับเวลาเพื่อหลีกเลี่ยงการ spam ตรวจซ้ำทันที
                        lastSentTime = tick()
                    end
                end
            end

            local validPartner = FindValidReceiver()
            if validPartner then
                SendTradeRequest(validPartner.Name)
                -- บันทึกสถานะเป้าหมายล่าสุดที่ส่งคำขอ
                lastSentTargetName = validPartner.Name
                lastSentTargetIsReceiver = IsInList(validPartner.Name, RECEIVER_LIST)
                lastSentTime = tick()
            else
                -- ถ้าไม่มี partner ให้ปลดล็อค main sender
                isSenderMainActive = false
            end
        end
        return 0 -- reset step
    else
        -- กำลังเทรดอยู่
        -- เคลียร์สถานะการส่งคำขอค้างเมื่อเข้าสู่หน้าต่าง Trade จริง
        lastSentTargetName = nil
        lastSentTargetIsReceiver = false
        lastSentTime = 0
        if step == 0 then
            if CheckTradePartner() then
                print("🚀 เริ่มขั้นตอนที่ 1: Add Shroom")
                -- รีเซ็ตสถานะการเพิ่มไอเทมเมื่อเริ่มเทรดใหม่
                shroomAdded = false
                tokenAdded = false
                creatureAdded = false
                -- รีเซ็ตสถานะ sender tracking
                senderShroomStartTime = 0
                senderShroomRequested = false
                senderTokenStartTime = 0
                senderTokenRequested = false
                senderCreatureStartTime = 0
                senderCreatureRequested = false
                senderAcceptStartTime = 0
                senderAcceptRequested = false
                return 1
            end
        elseif step == 1 then
            if not LocalPlayer.PlayerGui.TradeGui.Enabled then
                print("TradeGui ถูกปิดระหว่าง AddShroom, reset step")
                return 0
            end
            -- Add Shroom - ใช้ state-based tracking
            if not senderShroomRequested then
                -- ตรวจสอบว่า remote กำลังใช้งานอยู่หรือไม่
                if isRemoteBusy then
                    print("⏳ Remote กำลังใช้งานอยู่ รอสักครู่...")
                    return 1
                else
                    print("🚀 เริ่ม Add Shroom...")
                    senderShroomRequested = true
                    senderShroomStartTime = tick()
                    isSenderMainActive = true -- ตั้ง active เมื่อเริ่มเทรดจริง
                    -- เรียก AddShroom แบบ synchronous และหยุด loop
                    print("⏸️ หยุด loop เพื่อรอ Add Shroom เสร็จ...")
                    local shroomSuccess = AddShroom()
                    if shroomSuccess then
                        shroomAdded = true
                        print("✅ Add Shroom เสร็จสิ้น")
                        print("🚀 เริ่มขั้นตอนที่ 2: Add Token")
                        return 2
                    else
                        print("❌ Add Shroom ล้มเหลว")
                        senderShroomRequested = false
                        isSenderMainActive = false
                        return 0
                    end
                end
            else
                -- ถ้า shroom ยังไม่เสร็จ แต่เวลาผ่านไปมากเกินไป
                local elapsedTime = tick() - senderShroomStartTime
                if elapsedTime >= 10 then
                    print(
                        "⚠️ Add Shroom ใช้เวลานานเกินไป กำลังข้ามไป step 2")
                    shroomAdded = true
                    return 2
                else
                    print("⏳ รอ Add Shroom เสร็จ... (" .. string.format("%.1f", 10 - elapsedTime) ..
                              " วินาที)")
                    return 1
                end
            end
        elseif step == 2 then
            if not LocalPlayer.PlayerGui.TradeGui.Enabled then
                print("TradeGui ถูกปิดระหว่าง AddToken, reset step")
                return 0
            end
            -- Add Token - ใช้ state-based tracking
            if not senderTokenRequested then
                -- ตรวจสอบว่า remote กำลังใช้งานอยู่หรือไม่
                if isRemoteBusy then
                    print("⏳ Remote กำลังใช้งานอยู่ รอสักครู่...")
                    return 2
                else
                    print("🚀 เริ่ม Add Token...")
                    senderTokenRequested = true
                    senderTokenStartTime = tick()
                    -- เรียก AddToken แบบ synchronous และหยุด loop
                    print("⏸️ หยุด loop เพื่อรอ Add Token เสร็จ...")
                    local tokenSuccess = AddToken()
                    if tokenSuccess then
                        tokenAdded = true
                        print("✅ Add Token เสร็จสิ้น")
                        print("🚀 เริ่มขั้นตอนที่ 3: Add Creature")
                        return 3
                    else
                        print("❌ Add Token ล้มเหลว")
                        senderTokenRequested = false
                        return 0
                    end
                end
            else
                -- ถ้า token ยังไม่เสร็จ แต่เวลาผ่านไปมากเกินไป
                local elapsedTime = tick() - senderTokenStartTime
                if elapsedTime >= 30 then
                    print(
                        "⚠️ Add Token ใช้เวลานานเกินไป กำลังข้ามไป step 3")
                    tokenAdded = true
                    return 3
                else
                    print("⏳ รอ Add Token เสร็จ... (" .. string.format("%.1f", 30 - elapsedTime) ..
                              " วินาที)")
                    return 2
                end
            end
        elseif step == 3 then
            if not LocalPlayer.PlayerGui.TradeGui.Enabled then
                print("TradeGui ถูกปิดระหว่าง AddCreature, reset step")
                return 0
            end
            -- Add Creature - ใช้ state-based tracking
            if not senderCreatureRequested then
                -- ตรวจสอบว่า remote กำลังใช้งานอยู่หรือไม่
                if isRemoteBusy then
                    print("⏳ Remote กำลังใช้งานอยู่ รอสักครู่...")
                    return 3
                else
                    print("🚀 เริ่ม Add Creature...")
                    senderCreatureRequested = true
                    senderCreatureStartTime = tick()
                    -- เรียก AddCreature แบบ synchronous และหยุด loop
                    print("⏸️ หยุด loop เพื่อรอ Add Creature เสร็จ...")
                    local creatureSuccess = AddCreature(false)
                    if creatureSuccess then
                        creatureAdded = true
                        print("✅ Add Creature เสร็จสิ้น")
                        print("🚀 เริ่มขั้นตอนที่ 4: Click Accept")
                        return 4
                    else
                        print("❌ Add Creature ล้มเหลว")
                        senderCreatureRequested = false
                        return 0
                    end
                end
            else
                -- ถ้า creature ยังไม่เสร็จ แต่เวลาผ่านไปมากเกินไป
                local elapsedTime = tick() - senderCreatureStartTime
                if elapsedTime >= 10 then
                    print(
                        "⚠️ Add Creature ใช้เวลานานเกินไป กำลังข้ามไป step 4")
                    creatureAdded = true
                    return 4
                else
                    print("⏳ รอ Add Creature เสร็จ... (" .. string.format("%.1f", 10 - elapsedTime) ..
                              " วินาที)")
                    return 3
                end
            end
        elseif step == 4 then
            if not LocalPlayer.PlayerGui.TradeGui.Enabled then
                print("TradeGui ถูกปิดระหว่าง ClickAccept, reset step")
                return 0
            end
            -- Click Accept - ใช้ state-based tracking
            if not senderAcceptRequested then
                -- ตรวจสอบว่าทุกขั้นตอนเสร็จสิ้นแล้ว
                if shroomAdded and tokenAdded and creatureAdded then
                    print("🔍 ตรวจสอบสถานะ: Shroom=" .. tostring(shroomAdded) .. ", Token=" ..
                              tostring(tokenAdded) .. ", Creature=" .. tostring(creatureAdded))

                    -- ตรวจสอบว่า remote ยังใช้งานอยู่หรือไม่
                    if isRemoteBusy then
                        print(
                            "⚠️ Remote ยังใช้งานอยู่ ไม่สามารถกด accept ได้! รอสักครู่...")
                        return 4 -- ยังคงอยู่ใน step 4
                    end
                    print("🚀 เริ่ม Click Accept...")
                    senderAcceptRequested = true
                    senderAcceptStartTime = tick()
                    -- เรียก ClickAccept แบบ synchronous และหยุด loop
                    print("⏸️ หยุด loop เพื่อรอ Click Accept เสร็จ...")
                    local acceptSuccess = ClickAccept()
                    if acceptSuccess then
                        print("✅ เทรดเสร็จสิ้น")
                        -- รีเซ็ตสถานะการเพิ่มไอเทม
                        shroomAdded = false
                        tokenAdded = false
                        creatureAdded = false
                        -- รีเซ็ตสถานะ sender tracking
                        senderShroomStartTime = 0
                        senderShroomRequested = false
                        senderTokenStartTime = 0
                        senderTokenRequested = false
                        senderCreatureStartTime = 0
                        senderCreatureRequested = false
                        senderAcceptStartTime = 0
                        senderAcceptRequested = false
                        isSenderMainActive = false
                        return 0
                    else
                        print("❌ Click Accept ล้มเหลว")
                        senderAcceptRequested = false
                        return 0
                    end
                else
                    print(
                        "⚠️ ยังมีขั้นตอนที่ยังไม่เสร็จ: Shroom=" ..
                            tostring(shroomAdded) .. ", Token=" .. tostring(tokenAdded) .. ", Creature=" ..
                            tostring(creatureAdded))
                    -- กลับไปทำขั้นตอนที่ยังไม่เสร็จ
                    if not shroomAdded then
                        print("🔄 กลับไปทำ Add Shroom")
                        return 1
                    elseif not tokenAdded then
                        print("🔄 กลับไปทำ Add Token")
                        return 2
                    elseif not creatureAdded then
                        print("🔄 กลับไปทำ Add Creature")
                        return 3
                    end
                end
            else
                -- ถ้า accept ยังไม่เสร็จ แต่เวลาผ่านไปมากเกินไป
                local elapsedTime = tick() - senderAcceptStartTime
                if elapsedTime >= 5 then
                    print(
                        "⚠️ Click Accept ใช้เวลานานเกินไป กำลังจบเทรด")
                    print("✅ เทรดเสร็จสิ้น")
                    -- รีเซ็ตสถานะการเพิ่มไอเทม
                    shroomAdded = false
                    tokenAdded = false
                    creatureAdded = false
                    -- รีเซ็ตสถานะ sender tracking
                    senderShroomStartTime = 0
                    senderShroomRequested = false
                    senderTokenStartTime = 0
                    senderTokenRequested = false
                    senderCreatureStartTime = 0
                    senderCreatureRequested = false
                    senderAcceptStartTime = 0
                    senderAcceptRequested = false
                    isSenderMainActive = false
                    return 0
                else
                    print("⏳ รอ Click Accept เสร็จ... (" .. string.format("%.1f", 5 - elapsedTime) ..
                              " วินาที)")
                    return 4
                end
            end
        end
    end
    return step
end

-- เรียกใช้งานแบบ timer (ทุก 1 วินาที)
local function StartSenderStepLoop()
    spawn(function()
        while true do
            local success, err = pcall(function()
                local previousStep = currentStep
                currentStep = TradeStepHandlerSender(currentStep)

                -- ถ้า step เปลี่ยน แสดงว่าขั้นตอนเสร็จแล้ว
                if previousStep ~= currentStep then
                    print("🔄 ขั้นตอนเปลี่ยนจาก " .. previousStep ..
                              " เป็น " .. currentStep)
                end
            end)
            if not success then
                warn("❌ เกิดข้อผิดพลาดใน TradeStepHandlerSender: " .. tostring(err))
                currentStep = 0
                -- รีเซ็ตสถานะ sender tracking
                senderShroomStartTime = 0
                senderShroomRequested = false
                senderTokenStartTime = 0
                senderTokenRequested = false
                senderCreatureStartTime = 0
                senderCreatureRequested = false
                senderAcceptStartTime = 0
                senderAcceptRequested = false
                isSenderMainActive = false
            end

            -- รอ 1 วินาทีแล้ววนใหม่
            wait(1)
        end
    end)
end

-- Coroutine สำหรับ Receiver แบบปลอดภัย
local function ReceiverCoroutine()
    while true do
        local success, error = pcall(function()
            -- ตรวจสอบ coins ก่อน
            local coinsValue = LocalPlayer.Data.Coins.Value
            if coinsValue <= 20 then
                print("💰 Coins ไม่เพียงพอ (" .. coinsValue .. " <= 20) Receiver ไม่ทำงาน")
                wait(10) -- รอ 10 วินาทีก่อนตรวจสอบใหม่
                return
            end
            
            -- ตรวจสอบ TradeGui อย่างปลอดภัย
            local tradeGuiEnabled = false
            local tradeGui = LocalPlayer.PlayerGui:FindFirstChild("TradeGui")
            if tradeGui then
                tradeGuiEnabled = tradeGui.Enabled
            end

            if not tradeGuiEnabled then
                -- รอ trade request
                AcceptTradeRequestReceiver()

                -- ตรวจสอบ timeout (เพิ่มใหม่)
                local timeSinceLastRequest = tick() - lastTradeRequestTime
                local timeRemaining = RECEIVER_TIMEOUT - timeSinceLastRequest

                if timeSinceLastRequest >= RECEIVER_TIMEOUT then
                    print("⚠️ Receiver ไม่ได้รับ trade request นาน " ..
                              string.format("%.1f", timeSinceLastRequest) .. " วินาที (เกิน " ..
                              RECEIVER_TIMEOUT .. " วินาที)")
                    print(
                        "🔄 กำลังเปลี่ยนเซิร์ฟเวอร์เพื่อหาคู่เทรดใหม่...")

                    local success, error = pcall(function()
                        local TeleportService = game:GetService("TeleportService")
                        TeleportService:Teleport(14119723130)
                    end)

                    if not success then
                        warn(
                            "❌ เกิดข้อผิดพลาดในการเปลี่ยนเซิร์ฟเวอร์: " ..
                                tostring(error))
                        print("🚪 กำลังออกจากเกม...")
                        game:Shutdown()
                    end
                    return
                else
                    -- แสดงสถานะเวลาที่เหลือทุก 30 วินาที
                    if math.floor(timeSinceLastRequest) % 30 == 0 or timeRemaining <= 60 then
                        print("⏰ Receiver รอ trade request... เหลือเวลาอีก " ..
                                  string.format("%.0f", timeRemaining) ..
                                  " วินาทีก่อนเปลี่ยนเซิร์ฟเวอร์")
                    end
                end

                -- รีเซ็ตสถานะเมื่อไม่ได้เทรด
                receiverCreatureStartTime = 0
                receiverCreatureRequested = false
                receiverAcceptStartTime = 0
                receiverAcceptRequested = false
                currentStepReceiver = 0
                wait(2)
            else
                -- กำลังเทรดอยู่
                if currentStepReceiver == 0 then
                    -- เช็คชื่อคู่เทรดก่อน
                    if CheckTradePartner() then
                        currentStepReceiver = 1
                        print("🚀 Receiver เริ่มขั้นตอนที่ 1: Add Creature")
                        -- รีเซ็ตสถานะก่อนเริ่มใหม่
                        receiverCreatureStartTime = 0
                        receiverCreatureRequested = false
                        receiverAcceptStartTime = 0
                        receiverAcceptRequested = false
                    else
                        wait(1)
                    end
                elseif currentStepReceiver == 1 then
                    -- Add Creature - ใช้ state-based tracking แบบปรับปรุง
                    if not receiverCreatureRequested then
                        -- ตรวจสอบว่า remote กำลังใช้งานอยู่หรือไม่
                        if isRemoteBusy then
                            print(
                                "⏳ Receiver: Remote กำลังใช้งานอยู่ รอสักครู่...")
                            wait(1)
                        else
                            print("🚀 Receiver เริ่ม Add Creature...")
                            receiverCreatureRequested = true
                            receiverCreatureStartTime = tick()

                            -- เรียก AddCreatureReceiver แบบ synchronous พร้อม error handling
                            local creatureSuccess = false
                            local attemptSuccess, attemptError = pcall(function()
                                creatureSuccess = AddCreatureReceiver()
                            end)

                            if attemptSuccess and creatureSuccess then
                                print("✅ Receiver Add Creature เสร็จสิ้น")
                                currentStepReceiver = 2
                                print("🚀 Receiver เริ่มขั้นตอนที่ 2: Click Accept")
                            else
                                warn("❌ Receiver Add Creature ล้มเหลว: " .. tostring(attemptError))
                                -- รีเซ็ตเพื่อลองใหม่
                                receiverCreatureRequested = false
                                receiverCreatureStartTime = 0
                                wait(2) -- รอก่อนลองใหม่
                            end
                        end
                    else
                        -- ตรวจสอบว่าผ่านไป 10 วินาทีแล้วหรือยัง (เพิ่มเวลา)
                        local elapsedTime = tick() - receiverCreatureStartTime
                        if elapsedTime >= 10 then
                            print(
                                "⚠️ Receiver Add Creature ใช้เวลานานเกินไป กำลังข้ามไป step 2")
                            currentStepReceiver = 2
                            print("🚀 Receiver เริ่มขั้นตอนที่ 2: Click Accept")
                        else
                            print("⏳ Receiver รอ Add Creature เสร็จ... (" ..
                                      string.format("%.1f", 10 - elapsedTime) .. " วินาที)")
                        end
                    end
                elseif currentStepReceiver == 2 then
                    -- Click Accept - ใช้ state-based tracking แบบปรับปรุง
                    if not receiverAcceptRequested then
                        -- ตรวจสอบว่า remote ยังใช้งานอยู่หรือไม่
                        if isRemoteBusy then
                            print(
                                "⚠️ Receiver: Remote ยังใช้งานอยู่ ไม่สามารถกด accept ได้! รอสักครู่...")
                            wait(1)
                        else
                            print("🚀 Receiver เริ่ม Click Accept...")
                            receiverAcceptRequested = true
                            receiverAcceptStartTime = tick()

                            -- เรียก ClickAcceptReceiver แบบ synchronous พร้อม error handling
                            local acceptSuccess = false
                            local attemptSuccess, attemptError = pcall(function()
                                acceptSuccess = ClickAcceptReceiver()
                            end)

                            if attemptSuccess and acceptSuccess then
                                print("✅ Receiver เทรดเสร็จสิ้น")
                                currentStepReceiver = 0
                                -- รีเซ็ตสถานะ
                                receiverCreatureStartTime = 0
                                receiverCreatureRequested = false
                                receiverAcceptStartTime = 0
                                receiverAcceptRequested = false
                            else
                                warn("❌ Receiver Click Accept ล้มเหลว: " .. tostring(attemptError))
                                -- รีเซ็ตเพื่อลองใหม่
                                receiverAcceptRequested = false
                                receiverAcceptStartTime = 0
                                wait(2) -- รอก่อนลองใหม่
                            end
                        end
                    else
                        -- ตรวจสอบว่าผ่านไป 5 วินาทีแล้วหรือยัง (เพิ่มเวลา)
                        local elapsedTime = tick() - receiverAcceptStartTime
                        if elapsedTime >= 5 then
                            print(
                                "⚠️ Receiver Click Accept ใช้เวลานานเกินไป กำลังจบเทรด")
                            print("✅ Receiver เทรดเสร็จสิ้น")
                            currentStepReceiver = 0
                            -- รีเซ็ตสถานะ
                            receiverCreatureStartTime = 0
                            receiverCreatureRequested = false
                            receiverAcceptStartTime = 0
                            receiverAcceptRequested = false
                        else
                            print("⏳ Receiver รอ Click Accept เสร็จ... (" ..
                                      string.format("%.1f", 5 - elapsedTime) .. " วินาที)")
                        end
                    end
                end
                wait(1)
            end
        end)

        if not success then
            warn("❌ เกิดข้อผิดพลาดใน ReceiverCoroutine: " .. tostring(error))
            currentStepReceiver = 0
            -- รีเซ็ตสถานะ
            receiverCreatureStartTime = 0
            receiverCreatureRequested = false
            receiverAcceptStartTime = 0
            receiverAcceptRequested = false
            wait(5) -- รอ 5 วินาทีก่อนลองใหม่
        end
    end
end

-- Coroutine ปิดหน้าต่าง CreatureInventoryFrame อัตโนมัติ (ทำงานเบื้องหลังตลอดเวลา)
local function InventoryCloserCoroutine()
    spawn(function()
        while true do
            local success, error = pcall(function()
                local playerGui = LocalPlayer and LocalPlayer.PlayerGui
                if not playerGui then return end

                local tradeHudGui = playerGui:FindFirstChild("TradeHUDGui")
                if not tradeHudGui then return end

                local bottomFrame = tradeHudGui:FindFirstChild("BottomFrame")
                if not bottomFrame then return end

                local creatureInventoryFrame = bottomFrame:FindFirstChild("CreatureInventoryFrame")
                if not creatureInventoryFrame then return end

                if creatureInventoryFrame.Visible == true then
                    local closeButton = creatureInventoryFrame:FindFirstChild("CloseButton")
                    local upperLabel = closeButton and closeButton:FindFirstChild("UpperLabel")
                    if upperLabel then
                        local safetyCounter = 0
                        while creatureInventoryFrame.Visible == true and safetyCounter < 30 do
                            Clicked_Ui(upperLabel)
                            task.wait(0.1)
                            Click_NOW()
                            task.wait(0.2)
                            safetyCounter = safetyCounter + 1
                        end
                    end
                end
            end)
            if not success then
                warn("❌ เกิดข้อผิดพลาดใน InventoryCloserCoroutine: " .. tostring(error))
            end
            wait(0.5)
        end
    end)
end

-- ฟังก์ชันหลัก
local function Main()
    local success, error = pcall(function()
        print("🎮 เริ่มต้นสคริปต์ Trade")

        -- วาร์ปไปยังตำแหน่งที่กำหนด
        WarpToLocation()

        -- เริ่ม coroutine ปิด CreatureInventoryFrame อัตโนมัติ
        InventoryCloserCoroutine()

        -- ตรวจสอบว่าเป็น Sender หรือ Receiver
        local isSender = IsInList(LocalPlayer.Name, SENDER_LIST)
        local isReceiver = IsInList(LocalPlayer.Name, RECEIVER_LIST)

        if isSender then
            print("👤 ทำงานในโหมด Sender")
            -- รีเซ็ตเวลาเริ่มต้นสำหรับ sender (สำหรับโหมด receiver) (เพิ่มใหม่)
            lastTradeRequestTime = tick()
            StartSenderStepLoop()
            -- เพิ่มการทำงานแบบ Receiver สำหรับ Sender
            coroutine.wrap(SenderReceiverCoroutine)()
        elseif isReceiver then
            print("👤 ทำงานในโหมด Receiver")
            -- รีเซ็ตเวลาเริ่มต้นสำหรับ receiver (เพิ่มใหม่)
            lastTradeRequestTime = tick()
            coroutine.wrap(ReceiverCoroutine)()
        else
            print("❌ ชื่อผู้เล่นไม่ตรงกับรายชื่อใดๆ")
        end
    end)

    if not success then
        warn("❌ เกิดข้อผิดพลาดในฟังก์ชันหลัก: " ..
                 tostring(error))
        -- ลองรันใหม่หลังจาก 10 วินาที
        wait(10)
        Main()
    end
end

-- เริ่มต้นสคริปต์
Main()
