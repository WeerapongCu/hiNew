-- ตัวแปรสำหรับรายชื่อผู้เล่น
local SENDER_LIST = {'THRomonamgjr84244', 'ZQSukimphl05329', 'FBLeilarius25137', 'PRLorenannuq73324',
                     'LEEddieqljz52758', 'NDEdeeklfq38249', 'UMLivavumm17634', 'GNLethialmkq51440', 'THLeolayxlp99328',
                     'UKAletagfin91766', 'CPRheabwyu64295', 'TYAndyqojn37721', 'OANoellwenl96817', 'MAJilliqdxy36489',
                     'VJOliveimlh29513', 'QABertanzua59273', 'ELDaiseygssd10152', 'XWLetazoid77479', 'MGLeannrmwi03592',
                     'JXAdorneaekb13706', 'GUAmaliefboh77637', 'YHKarypoqb35691', 'DFJoyefltx75034',
                     'ZYWilonarodr50438', 'QZCelenenvxw00995', 'BFSelinamjvj92664', 'SHAdeygfex89888',
                     'HUHedwigtnua74496', 'VAVilmawoxn99677', 'MOLiltial16565', 'DSCassyvysz57333', 'YWDorenekgqx87500',
                     'BQKarilplyd38416', 'KTPenniehwsz55255', 'CARenniejvqg59190', 'IQDosiiaqi09171',
                     'QVKallijbiv76309', 'ETDoriewskk42272', 'YQJewelsqvi46076', 'LJLiannakeyl66727', 'XXIngekvmp06686',
                     'TSDaisybcix38541', 'PLSandiewreu50124', 'WAAgnolanaeh86653', 'XYJuliencxt71723',
                     'OKMarjiezqbf11228', 'ZVAshienrutw83678', 'CIVivabmkq65988', 'WYDenicewdry61298',
                     'ZCMorawcxk84081', 'UUShariasfyf44114', 'YFKelsygocz58865', 'CACarryhzct91843',
                     'QAArdenepivv50680', 'RLKateygrod53359', 'CTBarbsqpz93927', 'VUSalomiovzn07360',
                     'NLElfiehsnk11158', 'NZLinnomkr25213', 'UONickyjdoa16694', 'KONaomimuug92816', 'OIShellurgw98154',
                     'BVCoratgcg67704', 'XLDonnazomp00013', 'ANTasiafsvs42428', 'PTTessizjj84698', 'AZSalliesvar24086',
                     'TMArlynyyid27178', 'PFDaphnebamj97448', 'UTPhebemezs91728', 'CMBekkiioof41068',
                     'URZondafrpz39428', 'SFHesterglcv94120', 'HHUrsacfbn62563', 'QPSibrwaz87783', 'YFDevifkja44356',
                     'XMVinnienipb82876', 'MOArlynedqbw06538', 'GGTammiexbfy96514', 'LVBelitaocth45623',
                     'KHIliseakcx99717', 'IVLusagmtq79820', 'CAJulitattxc22554', 'IWRonniexamo58959',
                     'FVRubiaesrz09096', 'YLCaylagwwp10126', 'VMCyndiaiaze58240', 'OCPruegyzt20867',
                     'XCMorenaagjc84906', 'QSVeriletftf12488', 'HKSharaoxdr002', 'ZUCodyhyyk10478', 'OXAuroreipls60727',
                     'GQElnoraqgbj69056', 'ZUJandyamrs28413', 'IIFaywdep38427', 'UXLibbeykvbs96396',
                     'HDCollierwbg12359', 'HEMalapcer91598', 'RFMeaganxzmz98359', 'BLAgnetagocy22394',
                     'ZKStacielrdh18944', 'VULauriwmta24163', 'LWSelineqnog52927', 'XKDianneooxy36899',
                     'FMOdettaozew05928', 'BOSuziezygy46615', 'NYEvonnezkrk29821', 'ERMerlakwwl50214',
                     'LKFredikjbh01632', 'RAAlizabnbg54236', 'QDTonyavjds53226', 'BPGerrietufe53937',
                     'DINelliecuch08295', 'HHSibylqksa44486', 'NVYettycuiw48972', 'ALAdahdjil45449',
                     'AWDanikauszj67013', 'LDBerylkrws35421', 'LOKitofqu13492', 'EHHerthaznra34399', 'YZAuriewmhk96273',
                     'BKAnissapygi93834', 'PJMaxineiego90872', 'IEHesterodon84235', 'MIKatexgef03219',
                     'SOLivvyhsfg55414', 'FAMissyhqrv45244', 'CRArleenywyn56350', 'AFTabbiedwak15344',
                     'WVTarraclrk46242', 'LVFriedakbkc51423', 'SGMeryltjxf28241', 'TYRobyowci55159', 'HQBinnisixu61342',
                     'NKDahlialmqm74521', 'VSLexiepolx26407', 'CZMaggywnrw77680', 'HALoneehvoy45996',
                     'VTBirgitufzt87259', 'QBGaylezvvx09109', 'WUBrandepvqq20021', 'VYMarjielgb90903',
                     'WMStarlarrmb17658', 'VVPeggizpcg71694', 'TZSibleytzxq96601', 'KAMindysuhk60382',
                     'EGNevsadjaj34662', 'CTBeulahufbq33564', 'TSBrynnajyuu33661', 'IPRobbinydlk08861',
                     'SBPericjid24368', 'BHJoliznhn79008', 'AMBarbenfq54000', 'XFBridiettpw19555', 'LYDorifcsn66964',
                     'BWGenniecmto37310', 'ICCarenaguqc79617', 'VQVinacubd48918', 'XPRoxyxaap21142', 'DCCyndesdun66534',
                     'BVElainemuus74640', 'REDaffiidyt12797', 'CEEvitavmen18087', 'KDSimonekcdx99056',
                     'PUMerislbwj46952', 'FXChrisslti61527', 'TJCindeehiwx40385', 'SVKamilalowz62018',
                     'CVCandisivx15607', 'PHLianahiiu82576', 'LERivypvlc23390', 'FMAverilfwuu71730', 'AYDonacdhj64978',
                     'LXDenacoyh53678', 'FOLettaoskr14737', 'PKSiannarnep20321', 'UTAnjelaynwg84546',
                     'QBGloryzvwc56279', 'SFDaynaipiv71448', 'OUTammieflre78770', 'NVNaomapdot49230',
                     'ILDaffieyuub67900', 'HYTifftsqv73289', 'WCAlayneoinp33851', 'RKDollubxb05711',
                     'SZGloriaozsh40709', 'VQVonnimqxj66576', 'NJArdenezemg49560', 'ICVinniealmj61204',
                     'QFCarlyetxdq76753', 'RSMuffinkaub64744', 'SZTrudeyxmeq64481', 'ESRandyhitp92908',
                     'NLKattiufyu01426', 'KRLindiesdym92650', 'IPAilisrrpb40690', 'DUNevsarqhc98418',
                     'TACatlintpkl43202', 'VFTwylaratp87693', 'ELMyraymwv46201', 'FMNalaniwslb54743',
                     'PKReynakjhp81158', 'PBZuzanattfz46120', 'LVTrudiyins97604', 'OVSusiehflv47486',
                     'EOAnettcbqh84091', 'VYEmmeyyvor95735', 'IDKiahceca76235', 'PLKessialhbi35816',
                     'MXMaggiezkpx72325', 'YHMarleelyup11259', 'WDTalliaurlz66344', 'FNLaneydhos74804',
                     'CDGillimdgi93082', 'RNRoslynsgst42477', 'MOMissydmrg83913', 'PBArlineerku21090', 'TALilwvxf41279',
                     'VQMarjievnkj11850', 'QAFloryciqk35350', 'YCPerripbmw86729', 'OUShaneefsq71987',
                     'BUAgnetaesjb14765', 'PBRayeduha88772', 'QJJaclineqol63398', 'JQRoisjmsx48834', 'HYHelendnzh80420',
                     'DMNaramded35249', 'VVCoreneided74875', 'AUCoralefqr62864', 'FRAntheancml52994',
                     'SCViolewfwz94298', 'QXKennanhph38450', 'LTDagmaryqzi97284', 'IKJulietadgj74179',
                     'BVNeilezwkl36903', 'JAJenismjb48668', 'QUDeeynktkm92323', 'LEJaninaiwif53701', 'QCAnyakyfe91266',
                     'ANKarlynjtxk93665', 'PBDarceymsnf17208', 'MVRhodiaabms67663', 'XGDominipmcd27968',
                     'UPLusagcrf38969', 'HRJackybwfr53818', 'LRRubiaxqdu24783', 'XSHeidannol65804', 'ZFWinnelvwk10476',
                     'VONellydcx74572', 'FVJanithlzah37110', 'YJVelmarygv11962', 'LHMarnicwhx48767', 'GPHaleyjhmy13211',
                     'WWJuliwzms91624', 'XYRickiklep77484', 'VXMargaptcg48501', 'XUAimilylgf10590', 'HVWilowirbz14491',
                     'ZOBrigiddpce56946', 'OXTildiuqrb75552', 'WSElliowim67777', 'XCAureagfqv83368',
                     'RNLaurieugms65917', 'JXSheenaokkg86070', 'DSKirbyhmbf52987', 'CNDasharcyn78534',
                     'GRVivauphu76035', 'UMGalexlyj73799', 'HWCristiesbb01741', 'QVJuninaseki56615',
                     'WRAarikarmwk40449', 'HACarreeoreb49295', 'LGHedauvqk44356', 'BSChloebnev19788', 'LJReaxicl03361',
                     'PXDennibhfc44066', 'OCGillieuqia80986', 'OZUrsoladqsr17571', 'JHAlikeevpjl05723',
                     'GCWanetaahlh54039', 'SYNertycots29454', 'PFBrynneavlh61232', 'CFDevaytjr90532', 'KBIvieycme73791',
                     'RITraceeqcah97208', 'XYLottievnab54930', 'MNAudraoify14267', 'FBSelaeupr78283',
                     'GKLoletawwjm36504', 'ZXLaynewtov38298', 'VVBerniekote81509', 'OUAmandymtst08985',
                     'LTWanidsjavu25317', 'PZJoyarttx72977', 'SOTobeymcpt06580', 'ZAMarinysfn13294',
                     'KISabinaeqrk06521', 'NPStephixldw83422', 'GMRoxineavkd28121', 'NFMarysxqa70243',
                     'CUFelizayedi47702', 'ADAgnahwjr88638', 'EZMamiekpga23263', 'XSYasminejex93010',
                     'SQCamilearrl35914', 'IHCyndekzdd68797', 'AJDahliaosqm10367', 'ATPriscaurni99082',
                     'VBFaytheyvqu57367', 'UYIrisvwuc43193', 'TMMaurabsrk19754', 'THMonikawhdk20304',
                     'LBLorainsaxx37659', 'IFLaureeqtfc98093', 'YCIssihdwe55208', 'WMShanibdip17983', 'UQJeangbfk12476',
                     'SKJanajuyb28167', 'RNMargitgzzk75421', 'YKAftonawdz34129', 'CUNaomawgvz84991', 'CBKorrykcrs91988',
                     'IULilasvals24548', 'EZBenniesot49456', 'HVAnnoranpmr20584', 'QBKylenzlmz05714', 'MDCaratjjv50033',
                     'BHIrisygsb90167', 'RKMetaacdn80941', 'BVRoxinepafe49088', 'NQFaythvchj29516', 'BCAnettncol73069',
                     'VPDalekttm51720', 'TFNicolaluww41679', 'BXFloyupg38376', 'YCIantheyonf30084', 'RPBrookssqmh83686',
                     'CSLeannancyd10034', 'KHMaryszney75633', 'DBFannifeid83473', 'IZElanaxknj47854',
                     'KDSalleekqfu35283', 'HUGaylavdva61595', 'UZLiaedrc01262', 'BXMityiwzd35137', 'HBellezdma46704',
                     'TSYvonnekmmu70009', 'VEShawnqnre83821', 'SFStarrobvj04587', 'HRVerilekfse52654',
                     'STJudiepsaf88997', 'ZNElyshafwha93349', 'CKJohnafrtu46538', 'FLCarlensxhg04450',
                     'IATybiehdcg15759', 'JYDorianrzcs82413', 'UHEdafqhh53603', 'DMLavinaedbi75240',
                     'ETHaileelkiu07838', 'MSMilllsi01912', 'NGNoreenikzg86328', 'DYDredipgge18206',
                     'KTEastercbpe56624', 'TYTrudiekuji03313', 'RCShelluyb14310', 'ZIMyrtlevnla90352',
                     'RHRanicebini30497', 'UGHildylsoy97171', 'FMCodyzsum26434', 'EDTerrajvyu56866', 'TVGreerkdhv02615',
                     'KZRoriewdsq27919', 'YGJanayaamax86154', 'YTUllashwf34699', 'WAAllintka86478', 'PWBrendazqlz38371',
                     'ILGwennyxddd73581', 'AMOrellecnlh31523', 'QPJaclynspqu79269', 'MXMaloryfhlm66948',
                     'EUAnthiacydj30520', 'YABeckiegifi98491', 'NKSilvieomco38672', 'TSJanevaeicd36619',
                     'PCWallyncmp26359', 'GIJanelajrtn67862', 'OUBibbyedfbd89761', 'YRBeryluvik09747',
                     'BDClaudeaabd43566', 'SURaekbtk21170', 'SKTerakyri51748', 'AZNeillactxk91610', 'LMDolliewtdf83706',
                     'DJOdelebypx00047', 'BYTimmyfftf25580', 'IZAbbiedlzv28058', 'ADKoriernbh85914',
                     'ADVivyanuvwn04249', 'BFAidanwncu58015', 'RWWiniejir84050', 'WVGladyspryb82010',
                     'QNAloisegmow72538', 'UAVilmaletk51640', 'OZAmitiezbrf40121', 'MLLeneewfwy19984',
                     'RLEdithfiqy41458', 'KLLiannexvrr18550', 'QYAlisawzpg90273', 'MZGlyndapngd00380',
                     'ONGustizfao99192', 'DOCyndeqbgd34222', 'NCSandeklxb18534', 'FSJewellyybc56451',
                     'CUElainahfje95512', 'HYBettanupi60335', 'DHPenupud46200', 'GICoreyfvzb53966', 'VZJanevajdra57247',
                     'YRLeilahjcr19069', 'ZUArdinexojb97693', 'GHRubynymm92241', 'GUCamlsrr07545', 'AQEditattas53056',
                     'QKEdythetzpg23429', 'TSShellyuolg81128', 'PSSandelwqi77145', 'LKFreidamipl78126',
                     'UVPearletinj15730', 'SIStaceohic00074', 'NYEnidakpx96883', 'NLPagenzgc16636', 'DNWinnywkzb21310',
                     'URAngelanoix01178', 'SJEtticzkk24441', 'VKDorianxgkl82154', 'IRNanciwino57949',
                     'HVKayladtqk16683', 'GKJennsdch92249', 'VJTamizcdf81140', 'NDWanetaigyi09986', 'DHShellibdij92232',
                     'TCBessiefvin84900', 'HELucierzuk33330', 'KRCindraqehb20916', 'URDirknm93721', 'XZPattieagkg95728',
                     'ZCKarleeimes41747', 'YBPippavcmq55913', 'DHKarlahbjt95140', 'GYMargitwhsn41575', 'ESNanswkr79571',
                     'EQEttadoyc54371', 'JRSeanadgkf43630', 'FPStarhhsu51940', 'PYMahalaghou90554', 'RTAdahntn66747',
                     'OLNertawotx65727', 'VYGabbeycbud86265', 'KWBrinyvvzr10502', 'TMPattynsqk48843',
                     'XRSophiauwlc28133', 'RYTonyaeazl67581', 'YRMaryaltsi79213', 'AGIdelletdjj39928',
                     'BRMareahnxza64425', 'BUJulietavcp30657', 'XSEricacxwx51107', 'BBXylinacokd39739',
                     'YLMarciatmfj48424', 'PRNanikjvm76431', 'YRKarylmtyb71679', 'QELiukapiyh58758',
                     'OTNertiegast02871', 'LHBrynajfqv98507', 'FWNatkaxavz96133', 'LQAudriejxuy88700',
                     'GYNeillarhbq47562', 'UCHeidietnkp30457', 'GHAvivavfhy23661', 'JQJessefws10615',
                     'URWinnilspx97253', 'BCShaylajjoe11676', 'BYGuitiks81938', 'OZJordanqccv10069', 'SDVitakbti77585',
                     'GCRickizens91785', 'GTDavidauoab55750', 'VRAstraqifs09546', 'FBKateehbcp63711',
                     'OCNessafqfe15186', 'TCLyndejvqy94870', 'DLMelesaluwy81148', 'IINelleelhy77498', 'NHRheasngh54254',
                     'AELeaxrdd06952', 'JSKlaraumyx80192', 'ISMaiappyg99252', 'ALOreliapode98083', 'JXLebbiedqkz38323',
                     'DWCyndihpnm25203', 'AWMarciqjfu24955', 'SJJeninebegl93675', 'QSGwynhbhd18586', 'QILinswhs42477',
                     'NXCelinafaul35888', 'VAShaunagmeb77901', 'VRDiannaawdz48802', 'LCVerilesxub96287',
                     'ZLShaylaolbc80680', 'OLSarenasocn97486', 'ENMickyqjmt77328', 'NFLilithsvdu01854',
                     'RPDedeyjvg32231', 'WVRhonaflhb18078', 'YLAverilsvov01519', 'TXJoetewjvq57312', 'HPHazelkteu40776',
                     'ASKelciemotz80383', 'DAYelenawqlp96387', 'RIJackijkzr87936', 'VEAshlizpyz81323',
                     'SVRoxineluxu16554', 'NTEvaniaejba62179', 'IULetaddnb81536', 'QICristavovk25722',
                     'DFAllystumn26112', 'NMKarlenjrxb45452', 'WULeshiazqlw15582', 'SOEvonnelaic06739',
                     'XJEmaplta78119', 'OKBrearocgl70800', 'YSConniwxve91209', 'GTDronaepoq61065', 'UYTriximugd38480',
                     'ECDionnebgna88382', 'XOBibbiedjsd18176', 'TPMeadagvz15056', 'DYAmberueia80850',
                     'UVMelanysgdi62739', 'CZMaeganzmiw95859', 'NELinelllmou63379', 'JWIngridhfxl98452',
                     'AKEvitavlyc49536', 'GYSuzanntktm16524', 'USAuroranrpj36524', 'QMDehliayfuo95049',
                     'HSEllieyskq91795', 'XLAlizahcbi88100', 'JJRayraus16937', 'FTBilidekb22084', 'MANettlehvol58940',
                     'EVValxqtn60420', 'XQMilziefkwd69328', 'PIKimmynpjv75469', 'AFKathievkzc19042', 'JALetticsbx16728',
                     'EFShanecnkc68658', 'LJFauniemgoh05153', 'ZEAddyivtr45490', 'YHNanonevip70699',
                     'KUKissieyzqo94308', 'QTBergetukcm93707', 'LYCatewwfb00829', 'BZTeddienpzr74167',
                     'FWKettymfsy03081', 'KWGillyfdit14995', 'EYLonnawssc78409', 'OOJuliddpg89383', 'DIBertdxjq65449',
                     'CXCharylwmue38288', 'VKTansyngsy64575', 'NFKarilgvof04832', 'GQAlbinaothy22948',
                     'VOLiesaurhy76993', 'WRJoicebpxg34194', 'UGRikiospg37680', 'JXLottyqfxt06684', 'MMRosanawvne40895',
                     'ZTKorneyftam31203', 'PGPepitamrff78501', 'WOAprilweti55475', 'TNWindylgwo50066',
                     'UQCorissflrl91928', 'XIMaliacknw25996', 'INBlithedbyl83161', 'BRJendaxqse03975',
                     'BBBelvafaez57849', 'MEFaunietivs85781', 'XGJuanabhyz28393', 'NTTiffyyzea55705',
                     'SPPollyglse40050', 'DPFrannylxek13039', 'ZVJaymepibt48183', 'ZOShelogia51308', 'FLVonnizpbl85435',
                     'MTAlicaqonx58336', 'SJJandywqqj52860', 'TMLinellkpbj05343', 'UBennjlhh32884', 'DXPhilisowod55680',
                     'GDJaniabprz11009', 'XCOlivesrst92862', 'PMRafcgbi70628', 'NVAshleelbgm12537', 'FQTrudiicfm72324',
                     'DNDarabwbi22517', 'IAStormycjrm40820', 'DBRhettaibai45849', 'CECleogowb17246',
                     'LPMaisiescrl20522', 'VTWillazlcf44920', 'RGDedefqzi90963', 'TKAshleequel75334', 'GSEmmivudp97108',
                     'QUKatitpoj06708', 'UKMaritashld85161', 'YJElynixit20826', 'VYZsazsazuoh71257', 'HSJewelnrss72791',
                     'DAClarymube27161', 'VWAbranqic89686', 'AASuzannlovg98271', 'XTPerlutxt71759', 'LQNadiyabvus23454',
                     'OCArlinazdez89065', 'GOShelbadzhn82115', 'ZLEnidpjmg10651', 'MYAllyidjj87416', 'DQTessivuyz59180',
                     'CUAlishaxoqy99322', 'SMMarylzhtu99069', 'ZPOpalkflv32197', 'NNMeghangith23318',
                     'OMNissiemnrb03926', 'PQTinamtda18554', 'EZVikkiexcg86600', 'ICGelyackmn09445',
                     'LXNicholjsmc20859', 'ANBibbyrgua61549', 'BPKatinabpwt83288', 'UMLoriezwrc39330',
                     'ERZarahjbne62257', 'PHEttyoodv34706', 'QRLibbieyvsp87276', 'ERJoleneyvef94175',
                     'LSNanceuzjd27967', 'ULBrennqhla48825', 'SHAdelleieir27745', 'LYTerrymyjl22182', 'YBEssaghxz01953',
                     'WKLannigltn44465', 'AUAndriayxuw97245', 'MAJoellgmqv92167', 'GNLonixjgn50881',
                     'NLAmeliejncy61633', 'OETomaashh16851', 'LQFeyetvu04163', 'UGTamikocnoo30996', 'CZLuellargim19665',
                     'NIJosiewkxn94694', 'WAHestiagzlo61582', 'ZTLaceynazq05894', 'RBDeeynmryu53529',
                     'PXThedaxjgt89670', 'YJBasiaeemi86560', 'SRCyndiamtal58063', 'EXPrueccpw09992',
                     'TJDeidreglgz34760', 'RKKendrewpbe09731', 'TDTabbiejfuh33784', 'CIAlmireasuh67979',
                     'RTNevsakirj35685', 'DRZorinemvfz21956', 'WFPippaggbn17586', 'EGJobyecbie88176',
                     'MPMerseywyih85516', 'RUEmilibfgn45559', 'NQNikkiemiev40517', 'XTAllisugjd26405',
                     'ZNKacynodn01376', 'ASBeeyjxc39296', 'GYEllynznry82940', 'XMMagdauqum88793', 'EHEsmaxmlv91807',
                     'HXTobyefuej92932', 'ZFDareenwytv31793', 'CRMaryskagg37832', 'GLCarolafsdv16472',
                     'DTKarynhruu39146', 'CHOpalxzap49090', 'JFFreddyyyzi39143', 'MCZenascls05326', 'BGDulseactei86252',
                     'KCMarjellvj10129', 'RBAnitraukmq44557', 'BZLindipzoo11220', 'XJJessievaym82588',
                     'VXLanazpgo64138', 'ZYYoshiqaiu65481', 'QCMayrwkh92760', 'ABTimmiewtav94694', 'SVJessiexshe94094',
                     'AZRuthmxaa76711', 'ZVHazelhjol79768', 'MEBobbeevyqb09709', 'GGEbbalexj09306', 'WYRanicebhys41217',
                     'ESTorieilvj65241', 'ELLibbiruqz62362', 'UBIssieokxg52261', 'OZLiannebklh11440',
                     'ZNTeddypdrc00178', 'LZCamalavakm57150', 'MBZanetassrl33145', 'XZTraciepcih26962',
                     'TTNaninebcsr10845', 'KINaribcgk22661', 'TTLindyvbks16270', 'VCAmyesqmx68670', 'CCIlkamwfl39895',
                     'NVMeggyfcsv94788', 'TMPauliuzdy95687', 'LMAlmakujn25515', 'BYRubymtvv89802', 'LJAudrerlel34110',
                     'BHNeliedwch30374', 'DYLilsgpy19247', 'JILeilaqheb00593', 'UYAdoreebcyh52691', 'LUEmawanq88947',
                     'BHRonnayimt39375', 'GASayrezaej03119', 'AADaryakdaq93564', 'VKBrookpgpz99128', 'MKTamardwuv26052',
                     'OZMargotbhzj64267', 'UZAndiethdx29768', 'GNRorasigk21950', 'DXJeannaabli80470',
                     'BYAgathautzy67766', 'TCDelanoxj54374', 'YCCarolaifqb88354', 'KLBarbiehrji30024',
                     'CNAndiefnlu26471', 'KFCarreexels86804', 'HEMilxldw62142', 'TKReevaqery34808', 'PTElliidxf18184',
                     'EXLiliaspema93083', 'EHIngegcvx57339', 'WPNorenewqql67307', 'DOAllxiyws56913', 'JZSueahcl50969',
                     'WFWinnaauog55306', 'XGSaideekfnd08846', 'YNChrysajiev93759', 'VLLelahmexo80317',
                     'SREdnafzei31975', 'IWAshliexxrj61930', 'UFJanetnbta06545', 'JWAdianagjpc57058',
                     'JDReineltdl41552', 'ZZLorinemjde10113', 'QALorenaayov79612', 'MFOrsaefva33130',
                     'LXFlossyjoqn39693', 'DRMabrnwp28619', 'MCVikkiaxyr25874', 'OEAlisunbmjl24799',
                     'VEErickacurk22419', 'ARKarlenmyhj29509', 'CQSeanhfcz75967', 'USJolikbwf39895', 'EYAilynuawk93631',
                     'VTStaceuofh37550', 'TQJennyloui63441', 'DQNelliqwys19810', 'OKSelenatcpj74421',
                     'ASDoritadhay14791', 'IPKattiegpej60791', 'XMLenatrhj21501', 'RPJamirloj22940',
                     'TJArethancav68506', 'GKDeeannqrfm20392', 'MBDodierewo51321', 'KQDnirendxwq52275',
                     'IUMaryjofbbt29479', 'ODDacysgir42592', 'ZQIlysaldxn79198', 'DCPetfoil26091', 'GRAnettalxrm10728',
                     'FQNellieswhj94512', 'LHLexinezmgj21798', 'VJJodincyb63581', 'WFAlixlzx02598', 'EGPrupggb80807',
                     'OULorrinhhgk26941', 'HADanellxhik49290', 'BMZilviaqigu46538', 'LYStefatnto94995',
                     'MLSunnydaqa37269', 'YDKarlartre74551', 'RTHalievwbl35052', 'ACRenatavpuc55899',
                     'DHBertepazx95326', 'CALizxkaq36700', 'YGShandasbqz19991', 'RYFarahgplk68315', 'HOBlitheitnc13127',
                     'XPJoliksxa94816', 'ETBrittaydyy41461', 'JYTimmicgpd63475', 'VWNickieqkob89790', 'OWHedyeeuw76509',
                     'HNCariafffp59158', 'LOPhyliskjhd56829', 'RWFiannudan32148', 'DNMollinuko21082',
                     'ZPFrediifqc72038', 'NLNikiyplx60878', 'JLPrudyujdb79836', 'IORandiehznt35983', 'WMMiranukc23304',
                     'GKAlanahsopx33933', 'JKAilinargee37316', 'HAJoeannngjf63896', 'EBPhilisaikq20139',
                     'URKippietqsx82210', 'ZVLissieemtl45670', 'HRUtawvdg49856', 'YSOrallebnij68502',
                     'QPHestiabuus98607', 'VIKiahnbxo40965', 'JTIritazgfg78055', 'SZEmmyegyrk81566', 'JOBenniliiz96036',
                     'LQSondrayqnl23544', 'FTSamyaej85070', 'OIDeyvmg19155', 'IXSeangber09811', 'VDKylilaoacu74859',
                     'HACheriewjcj37968', 'VXRalinaxdtk54363', 'UNBarbiuqke48632', 'YWBeebwpy87324', 'KLBernipnki96432',
                     'XXTimmyokzl45215', 'ZEJoelleujcs98946', 'VZAilinakgkd80007', 'APBeliapdeb08301',
                     'IKTonyairse63409', 'VCZoraswnk84194', 'ONLethiahaic57390', 'JWBobbyeqjqv75616',
                     'SSNertepjlm83536', 'LPDevonusvz21007', 'EEDebeefykh48066', 'FBPansieyazr87048',
                     'OPReinayfxx26382', 'WVDaceyilaw64525', 'TJSofietwjl99663', 'QHMinnablme03443', 'DLBeckafosu41976',
                     'ETJorriezdqo23651', 'KSBlisseemim48512', 'BYDaphnefpmv39554', 'EVRoztrlf67178',
                     'SICodeerusw55456', 'RIBeulahdomv18168', 'CSRivyhjve94805', 'BIKarolfbnu20899',
                     'UYShannaznmi21762', 'CFElliexcjt64093', 'BQRaneeohct31751', 'PHMarysaohmk75210',
                     'SHEssiexjfz22061', 'RGLynneadyze33191', 'GPDeniceibkd61664', 'KISharylcysp63450',
                     'SRPammietgzr00419', 'YQNellykqpu03185', 'IFLiannatxoz13707', 'NUMinnauawg82590',
                     'JLPerledcxr03331', 'EYRodimfxp46927', 'HLDredialge54166', 'AXLeanorozer79980',
                     'FNElmirawqnz40700', 'VDAlysacihe18601', 'EYDronauefp37436', 'MWGlenbyua85474', 'YSOliyksbo56819',
                     'IVHeathqcdg32680', 'WVLiracgag27305', 'ITTwilaibtn47662', 'RHLeonebsys37093', 'YLJoeliexmio30322',
                     'ABOneidavcrs42228', 'ASLulaahtv27326', 'VGOdettahqwu74095', 'BLJanieynhl68241',
                     'BCSavinajkqk40878', 'QOAnettexrpk59763', 'OTWendyjcgk89579', 'SRAnnoravqba27415',
                     'OSLilasctst33038', 'SOLilydctt87358', 'TTDonnietkyn70512', 'VBArlenegpft37664',
                     'GGShebaluqg76950', 'CNKendraizqt98585', 'BXRubiaesuv82164', 'XPEugineprhm45600',
                     'FDSofiedqez41058', 'AVGerdafsgh77538', 'MSNicolesjkz04553', 'HLSalleekhoi00537',
                     'HGCatleeqzeh89310', 'NVNeelyapes41929', 'PEDaniaonse31849', 'VAFernewczy70303', 'GTCamblcj75365',
                     'AODoniaqvda82780', 'DIRahalehzl75567', 'FULiraxnnm61392', 'UMSimonakqfl73208', 'WWIonaakyb77169',
                     'YAMadlinityg47309', 'OILenorapbpc92325', 'VJGlorigwts97917', 'ADDawnvccz14463',
                     'BDBreenauoyp74422', 'BEEydieojum38772', 'VMDellojeh14037', 'YCEmbcws84392', 'DEOnidabfni26160',
                     'WVLynseyusog91687', 'GBVykybjuk36529', 'PXMelaxjic79782', 'SVElsieqiwf67956', 'WTSalleequvq05303',
                     'RWPaulyvsmy79644', 'HDGeorgethya57182', 'SNNadyabqtb31776', 'MPAlikanxvp42236',
                     'WTTrinadjqr74122', 'PCMyrahcnfn23343', 'BCBuffypshs94084', 'JQFanyapthh90774',
                     'VZDanicaanlz05161', 'LQLauriegynu68969', 'JDStaciekcjt41278', 'FXDanicesjkb68613',
                     'MBUmekohbus32323', 'XSGlennliud38766', 'TTKieleqsrp62617', 'IVShelasinh87782',
                     'WLLucinepkef45277', 'GFAarikanryq40108', 'TFDalerwkr51034', 'ADMeggyddjf84455',
                     'HGYelenagvhb46885', 'NMAlysyajm07336', 'FBMyriamarao07092', 'GLMelinazpkp29335',
                     'NRVikkivjvs28155', 'XXAlexiaqzbz12360', 'EBAgnetaxsca89935', 'SOCathymdeo37256',
                     'XIReggieaquy08005', 'JZTawshahawa30521', 'YVPrispxob08520', 'NGMeadypsn25968', 'YUQuinnueky68294',
                     'LOCarlynjjoe96687', 'YADarseyyzae68208', 'CHCasimhlq33889', 'XWUtavclb32555', 'TKPaolaxdou54104',
                     'HPSelinawdgm06178', 'GQTammyrwsl43637', 'ZEBiankaswdy45063', 'WYAgathevekg43000',
                     'BWElsibkik99385', 'LNEddizput34922', 'VUMiriamfgxm69526', 'EDDanitvmtw78092', 'FCEydehlll91518',
                     'YFBrinamyvc45840', 'JINatalapxoa51836', 'RRMargitoqdx11256', 'IUSacharwry33121',
                     'DSSeanbwmj42857', 'UHEvonnehcnp48746', 'AXDruciefhpu57693', 'PCBrianaganf06449',
                     'FFVannaoflv52019', 'LRYvettearjd05792', 'XIBambievpke40270', 'XNLottenaan13501',
                     'BJLannyvbfi78208', 'NPLibbijhli57686', 'AMBambieawvc45432', 'TOJonellytpp39049',
                     'TFKarilixsl63635', 'ZRDorejqoh10880', 'WEKallybfwi59476', 'CLTristanuzp77509', 'KOLeneeexnw71926',
                     'IHLeannaufn14918', 'EXGabbiugrf79401', 'DNAshlanjucc07468', 'GTCallietdbl60022',
                     'ASTovaidrq82774', 'COAlanaktkg31403', 'WUBobineeyrm18720', 'ZPEmileebsai71796',
                     'THLissihwzm02015', 'GDElvavksn79699', 'HZRivaecfd01666', 'HGCesyaljxm29607', 'YBKarijgqi47367',
                     'FXStarrheig52304', 'MMNicoligtwu34974', 'GYBinnyflky47782', 'EDNanniamjl25593',
                     'AEAlviracvxp20819', 'OHFlorancrd56693', 'WEDaylejrhf58881', 'LDFauniedogu90210',
                     'VYReinefemb94074', 'OKAmeliayogf29263', 'IDFelitakpwz26760', 'ETMaireaysn60839',
                     'OYRobbymwzz79206', 'XKLaureeamei32968', 'EIDaphnegxvp22567', 'ETVerileqhmk93682',
                     'OHBryanagzcc90119', 'BMOrelnzeu87449', 'LJCatezrkn94910', 'ZNShainevmum97649', 'LJLizbouo23031',
                     'EXDottigkhm81275', 'LYHestiaxpvx17514', 'CLShelajxpg49902', 'LNNikkiexbrh79455',
                     'DPLinnqndw98967', 'BJLelandefkd79464', 'XGIreneyhpc63596', 'XQFidelabjit03153',
                     'QLYolanelrwx31271', 'ZXJulincwi96499', 'QRFidelacszv34907', 'LRDitahhak65157',
                     'HULucitahang08031', 'FLNoellawzpg66311', 'CWJoyancctx71561', 'ITLoryrjvk15072',
                     'IFCicilyyuwz55289', 'XTLuellaefru20031', 'LUDorenawdxp05904', 'WGTedxsmb49882',
                     'RHElenavnuh16914', 'ZEOrellagdzo77752', 'VFAurliehrmq09711', 'XTNettlendhr93142',
                     'PWAlexaeqod94221', 'VMDarylxged40317', 'UBYettyzxip55844', 'WYKarisavlqg34764', 'HBNonivlsw61647',
                     'AOLonnamucn79735', 'FLErinnwlkf36153', 'ANAbbeyellp98688', 'ZIKaliejteg25063', 'MGMoinauueb14237',
                     'TVFayinavnqi02352', 'ZDBrittrjhy32523', 'XZBobbidspk94311', 'OQRosyaidg13286',
                     'SBAllycevhfe33872', 'HZJewellczqs20978', 'OUMerolaahew81286', 'FBFawneebep97653',
                     'QOCathephzc21394', 'TRMaggiebkpg87602', 'ITZonnyavlqq20865', 'USSheilamgbd77194',
                     'NSDorrixofu30218', 'NNLuisaajdf04187', 'JGJanisjtuh48486', 'IXTansyrtmm16103', 'TQKerryyidc15284',
                     'WLAileynobw24180', 'AOHettyosdh89697', 'HYCicilybjpc21885', 'CJBrynozlm44432',
                     'EBTalliejvqc91147', 'DOBrandyqmsq84963', 'DKOlenkaomyu21887', 'BXMaudiwkn26781',
                     'KCBertygmye43471', 'VCJorryvcev76729', 'OCTalyazzwq92828', 'DPJulinawlpy78816',
                     'URMerlewwxp39943', 'WSGlennegbl39989', 'JYJemimazqpd50024', 'YIKesleyxsaq28727',
                     'QQSekaqdta19909', 'QTRebekaakql38049', 'LMLindixevc89788', 'RCLorainzrqd17591',
                     'VDOlwennwbs66618', 'HIFelitagqtc86882', 'IVBetsykbhf21394', 'NWOlianfnq00567',
                     'DZAllinaysih77637', 'BYCasieayqd59480', 'IQAuroraznip87234', 'ENSellaztlb28254',
                     'NGVanyanaxk07186', 'BVWilmaeysc85078', 'TUZandrapcjj37780', 'WXBlondyhlwy44625',
                     'XYAlikabpnp65623', 'AKBelitaijtx53822', 'USJeanwvlw20442', 'JSLenavkdu40816', 'ZUDinahxfab76232',
                     'CRRosenehhmb76550', 'ODDollieewlx17224', 'MKJessiervuc15491', 'HIRubinaipux37026',
                     'ZCMirnawjmv86019', 'PPAarikasanw21304', 'FSRowenaywai63928', 'UMLyndexibq26091',
                     'VKBreextxl99294', 'DPMerolaxuqa72469', 'GKGuiofov61692', 'DEMartadzwa87813', 'MRKallixssq48171',
                     'XWBrigidvnrs09875', 'KQCatleevhnx53297', 'LOHelgethdl67997', 'FGDottieogtq85628',
                     'KAWynnynrbi08875', 'ZDDeniceupwc80856', 'PVJeriuckx69918', 'XTBethvwfu80329', 'TVAlysonmhlq44649',
                     'TCTrixilvpy87920', 'UIMeghansghe44662', 'SRSiannasnws76114', 'AKFaydraaqga90309',
                     'BHNaomaopkc08024', 'KLMelbarrbx99172', 'AKMarcieanlp48828', 'YLRoseenwe28261', 'RXLorneuhrb74387',
                     'QSKalietknd76216', 'YFValliejdrv04856', 'WICarmanmvk56626', 'KOAureaiemd39419', 'GNCeilcmxt30792',
                     'FHCamilayvcs35610', 'YYAnissamgse55005', 'EELivigqa33808', 'SBRenatamglh41826',
                     'JYJoetejfkj89035', 'CARevkahlcts13310', 'ECTybieujap05756', 'NMRhondaqzzp50090',
                     'HDAlexisyfjt32547', 'HORosinavoxm00581', 'OTEddiegkme40415', 'ENUtainvp78309',
                     'WJOlympehidk68298', 'UHDenanokb87026', 'MODaceykxsx34268', 'DUDianneyflv22772',
                     'AAVaniatjgl60269', 'GOFayrelaff52054', 'LOCarlieotvv68587', 'HLElsaortx55528',
                     'ZEOdilialabj07292', 'LXWillahcgz11436', 'NTIlysethdm48520', 'IYEdinegnh70403', 'SBLaceejyyo80420',
                     'JRAlvirafgsq76550', 'JAVerlacbra90170', 'RTBirdiehaqi02170', 'TICariapcy23984',
                     'WLRosenebcbf29036', 'SIJackyokfd87297', 'EODeeannwwtq00075', 'JXAnnysnvh56604',
                     'IVAlysiajsrl88557', 'ZHElisayhfx75370', 'EWFarrahcpnt48402', 'OZLoisehznp53279',
                     'PEMaisiedkiu53991', 'YXAraovzd44261', 'WFLottieccca32194', 'CZGladysepnh68607', 'VLIlkazdpr10572',
                     'RHBunnitulo41789', 'DBGladyqfr73162', 'XDLoryrljt01824', 'MSGraziabghk92795', 'OCMargaphes82245',
                     'LVMarysapmg55151', 'QCDottiimgz53309', 'PIKelcyfswq26502', 'ZQGayewsea22345', 'UFRonnieviau60185',
                     'CTDyaniwrl75643', 'XKValeryyhtb06040', 'ZALanaupjr25740', 'ZLStaciexrre32916', 'QTMabpjqx67012',
                     'RULuisakzjq49112', 'MJPennicfdc95461', 'AXGoldiangit65039', 'YWCammierkrv59087',
                     'WWNevsaacaj30081', 'BBKimabjx44908', 'GPHelendllv79141', 'NPMelbaghga16169', 'XJJaniamhus59295',
                     'PHBillxhjq82405', 'GHAlmirednam69057', 'VSJoseynaiz34159', 'MBNeliamjpl21372',
                     'YLCornieosiy53455', 'BXJennrggk88159', 'MBDelilaeoan17200', 'FBKrissyzozk62584',
                     'OICaylafxdy77887', 'QTSandraxosp96896', 'RELishegwxu46773', 'LBOliviepmol64728', 'FZKaipkis65531',
                     'SNLucitayeta76324', 'NBNanonguea05866', 'QVHalliezwof45188', 'JGDalilafiwh29024',
                     'ZAAshienmoix48608', 'IDBabsojrn15477', 'VOClioyqjc06195', 'BNBreelckb93054', 'VKKarieyrbr98298',
                     'NAArdythkirj75604', 'THGiselepadg34595', 'NJRonnixzcp42498', 'MPTimefgp81408', 'XUDelrynh72845',
                     'NQSusanwubg84471', 'NQLeslybdrh50350', 'XGAllxkovy91746', 'QGDionnenbmx15069', 'EHDaffycgan38671',
                     'NJRethakspv55067', 'RHJackirwhu23789', 'KESiouxuvbf09973', 'MLElsetmeyr67982',
                     'RYDorenewybq56535', 'FGOnidamwbv84993', 'ZYFrediogqg61370', 'YDHedwigornu44173',
                     'HASiusanmtxl90874', 'XPTallouriyp20964', 'FPBunnieiicc56758', 'ALMaggeeqyqq84718',
                     'OALuladozu98588', 'DGMargewubk00953', 'WDAddaxosf21922', 'SESilvayypf76018', 'GLAleciadcan05541',
                     'BKCharohaiv72264', 'RZZolapezk50765', 'WCSimonenzck64760', 'IJIritarjsh67042', 'MNTonihkvd75948',
                     'JATrudyndeb07500', 'IZKajajxpf10129', 'UBAubrieathh58779', 'FPLyndeljuob63139',
                     'JCHollieqwpo55604', 'DHKarolagbrp30246', 'RKAlinadmqx32855', 'MALottajkfy73384',
                     'PFShawnaoauq23903', 'DVDacieaipk26129', 'LWLiukaztqm14551', 'UPKettijpij30060', 'LAAdanqcwi69983',
                     'MFRebecamjgh98361', 'ULHannisblld86555', 'ZIEmlynupqc35193', 'LNDebbybuvi27968',
                     'IVOreliessci50272', 'PLAudryedfgw40523', 'OMWilielaeq73746', 'TSAdriabal33243',
                     'QKMarniezmew50133', 'EKOlliesbsx66523', 'EHVerenarxlj94836', 'THSarinefktn62870',
                     'XSDoromxbm04417', 'PMRodinwlc68895', 'XCAnthemveq70442', 'ZFAvivahvzyb74630', 'JNEvitarmzh24867',
                     'KHMaryslddu89101', 'WNWileenkhbm20688', 'YEOlenkacheg22318', 'WXSofiatwtd39797',
                     'TBConnylitv27509', 'TYDreddyhcyd68900', 'YATressausjm82716', 'CASarafcbw18447', 'MEShirryrz95402',
                     'GZJannabnbh88296', 'YHSylviagsep91198', 'ENKristirtey89823', 'GZBarbmmbs19687',
                     'GBCarmenvceo17417', 'MCCarlencvnn59198', 'RYRakelgggp86687', 'PMQuintadbtg85379',
                     'YHNeilefikh24508', 'DQWrenkbpr64155', 'YKJoleechme04978', 'ZSSusiengij38785', 'GMElsiqtcv96076',
                     'OQDanarrfc34563', 'OALeanorqjbx19114', 'WMGretelbdad65252', 'SBDarcypvoy93158', 'KNCayetglv76764',
                     'HUValeneiiyf60827', 'KTGretelgtan37866', 'VVLelandiyvu19910', 'TCKyladtgo65802',
                     'IMElseyrbkt47734', 'HHJanayeyloz81758', 'CEValerabzev73578', 'BBDesiriazku01125',
                     'PQCatleejvlq96510', 'OJAnettehurz18089', 'QGCasstawa53925', 'LQEirenarusn10978',
                     'JEInnajkqj53035', 'MGSabajjqd18557', 'EDOdilleddkc01165', 'XHErickazcii80016', 'AVCodyprmw98473',
                     'YKAliceooqr86805', 'IPBenitavkrs26951', 'MJSindeehbkq24662', 'VIHelyngbel15284',
                     'TWCheredjze58269', 'ABToryqdks65021', 'NDMinniepzym35511', 'LBFaniadbip40042',
                     'WGKeeleyulwg89325', 'FMLoisnsny71476', 'GKMiranifzs69066', 'NHKeelyiicv11043', 'YCBobbeshhl57122',
                     'SCFredatxtg20308', 'ACKarrahpkxs41330', 'RVKirbeemmtz45851', 'YKAileeynqw87124',
                     'WXTamrazjyr68165', 'WOJoellaoaej21513', 'OVShealwzf29217', 'HNMarrismjpp08890',
                     'HNDrusyiwur63943', 'ZUArielemen95225', 'QVVioletjwrq32298', 'VBLezliesoak83882',
                     'MOPhedrachev01446', 'UACatleetlkv53020', 'AMJenineawou74579', 'HVReggieovbj38588',
                     'QAMalenanzlm59208', 'RSAdelerhyr49276', 'FGCherehpzj68736', 'DASuemmzo71853', 'DJMelliehbgx34731',
                     'XWZitajaxy85488', 'GFDolleyfmqi13744', 'TMDebnwox43240', 'NMYvettewwna28051', 'YHTomivvxl25446',
                     'USRosanaaskv75205', 'UEDynahrqlb04305', 'MOMichelepyj83728', 'MLVannieqwcq24772',
                     'QPTanyamglg53572', 'LKBobinavbec91157', 'SCLizzieflvq88922', 'UHSiusanxggo83597',
                     'XPBessycrnm00677', 'PQBuffycwdi51038', 'BBLydaelzw87215', 'IIAgnolakzjy47076',
                     'VDColliepcll41598', 'ODShandauyiy00002', 'QQMargivyag11730', 'LHKarenrnne09412',
                     'HTLenkazhks03110', 'AUKareakpi29543', 'FXDenijkgq16220', 'OIRobbylpbd66795', 'HVNanceermxz92260',
                     'KTLeannakxvr12234', 'MEArliedyjn58672', 'XZEmiliezfye90793', 'IIGailhwcr77168',
                     'IARutheddwu15908', 'VCSondrattkq84753', 'PGDorisekiyb79573', 'UDAmyepael10446',
                     'SLKalinamexe27479', 'UNCesyanwnh78330', 'SOIvetteqizj74775', 'BKIvorytzmy44508',
                     'VDTarahwkly41127', 'XDGavrajznw02644', 'VDCookieupqr70337', 'BPDeanahffr71095',
                     'SATaliardmj50562', 'TFMarcibvza09448', 'XOEmiliezhrm56324', 'LZSelleievc58860',
                     'IYAlvirafqqc02431', 'EFJosinapl91421', 'RWMalorymatk62737', 'UCDailexpwk06692',
                     'IRMitzixvos10526', 'LZAmandiyxls11479', 'UEDagmarbsif81478', 'URGlennqrwt73425',
                     'ESAvivahiqxr86792', 'ELKinnazypf50170', 'SIValerabxzi48329', 'JUAmabelpivu92768',
                     'SJJoyannrmyf37475', 'ZXRickybhcn43843', 'BDNolanaxhwc12188', 'PICookiewsty05796',
                     'NORethahvkr06591', 'SLShellyotpq95374', 'OSJemmyfwjw17659', 'PYJessieejri57040',
                     'YPWinnynazz57086', 'NCAlidiavbnk68471', 'NAJinnyrnlp11450', 'MIDeenajnfm38905', 'UPSusirskj30947',
                     'MOShebahqyw37873', 'UBCamilajsbm34055', 'NBAlysiamryy74883', 'VPCorrygoph60668',
                     'JMTamminscv33078', 'ISDrefgbm31326', 'ZGIvonneiwkk70792', 'JMLilaswyho06675', 'CQCaseyicqg80541',
                     'ZGSorchaugdc24319', 'HONettizzgp86102', 'AXHettilyvn22871', 'SLLettagrkc19440',
                     'YJSharacmca81338', 'QABritniloce13845', 'HPNalanifenr40210', 'LDUllatdoj78439',
                     'QKOnidaipcg86326', 'LGElvinabqci96473', 'XJRubikvdh53123', 'ZFKathahcmy22165', 'CFMoraeayd28056',
                     'RJXylinadwcy71148', 'UFJorriezwkr08083', 'JDSheryeapcs57433', 'DWRodaucns08381',
                     'JKMoreennhoa47372', 'WUKathyfmrp68953', 'FARhodietiat65217', 'RMBreenvqs90463', 'NUMaxykszd33541',
                     'MKHaileeocuf96740', 'IWOreliexz77080', 'VCMelladggq15220', 'QCMoiraundh83771', 'OIEdexdtt75170',
                     'UQHildyydlh89393', 'NKAsiajwwm04163', 'OABlissahmt90712', 'BNMaeganbxrw03824', 'TJChertxzl89995',
                     'XIDronaorbb11243', 'MPAlecialrsb05390', 'UMDinaysud38565', 'ZYCindieqjd84987', 'VQDaragfrh42197',
                     'JPJobyecbyz33599', 'QYHarlixbje42191', 'OZSandiicaa72433', 'XDPageqvzp92654', 'LMAlexylvg31752',
                     'VSNyssawyis61324', 'UXJudyzlth48708', 'OIKarliefucz79335', 'GPAddaotej95096', 'ONPearlcykp86656',
                     'DIIlsekfpp16044', 'EGWylmafzoj74942', 'RLJuleepgou64918', 'IYVedajled67526', 'JMLydiaipbd99882',
                     'NOIngriduxep01173', 'RMNadyuwzf32529', 'KARuthqasx50599', 'KRJosiebeym81779', 'DTEllynncmzr55445',
                     'KDCyndiesuke62994', 'GMArdiscsnh91085', 'SZBertnxpq89808', 'TEElnaoswi71580', 'MWLedatdlj67150',
                     'TDBillilnik93355', 'XVHarriuaap96735', 'ZZMiriammldv82899', 'EODarceetotl85753',
                     'XISiusanatup22832', 'UKVickijnjt83581', 'WNThaliatxzd47684', 'JFCandyzcjo76505', 'IDRosynqq04348',
                     'DLVilmaozte23172', 'HABabchiw72691', 'XEBonnykvuw45386', 'JGKateyyqxp34605', 'GRToniejaeh38753',
                     'KTKailauzxu51595', 'BGMartiegks73806', 'RFTeranxxs15680', 'IFChelsyxnru49966',
                     'MSCookiemmoz66136', 'SLNadiavuyb01000', 'EMShanonfbru08972', 'WMJacquifjlq97067',
                     'VZMiriamvave91735', 'MNMartiewlmn21562', 'GRRubiqdkx05644', 'FWRoxaneldfc94001',
                     'VMMyrtabakn07449', 'APSibealtnet88364', 'RELeighajhhw59322', 'AELannivntu86142',
                     'CFDelacopy56513', 'JSWalyjtpc10347', 'PDBrooksknpj35128', 'WEJenamoyk11277', 'HCTresamkxs65405',
                     'HUZorinappfx43054', 'CEJolenellsr04368', 'YPErynmorb29669', 'RPCornieejug12759',
                     'NBIdetteppmp40664', 'SUAngelankwt48811', 'TATasiaqfpi47665', 'CQDulseaelxn39985',
                     'AWUlricaolgc38265', 'OBMavraeqsv16486', 'LGEleensdjs21517', 'FSeggiejwx05499',
                     'AMMelonyeloo67559', 'PYCaryngrdf15993', 'HBTimiookp66217', 'HPGennibjiy23396',
                     'WXBabaraudrj22974', 'LOHestiamnkv30411', 'DHJojotiej91479', 'OWSayrebwxf30110',
                     'TZGaylewqfs11167', 'ULPansywwzd02657', 'PUCorallvmc78078', 'XQLonnieppjh90085',
                     'IQZariaoglv05757', 'GWRuthyscjf35993', 'UHBrynnntoc80943', 'VFGertirwaq82215', 'JFVykyuujs82378',
                     'EMBeckindsu05086', 'FQBernywpta60795', 'RLKalilaankf02424', 'ZTAnicaldse18814',
                     'ESSarinexyxf27692', 'ERTammisqdg00320', 'OIAimilsjre36512', 'XBAbbievmpt84502',
                     'XRElysiacsth49241', 'BKNessybryw98766', 'MLKarynwtsm62603', 'RXToniajcek62626',
                     'GYFranninxax47721', 'GYSybilujpp54152', 'QYSelarjqt75414', 'ABNettyliak00738', 'QFBrinanrpp45864',
                     'EYBrennaxcrk72278', 'PLSonjazzee46508', 'YRLannylymw55801', 'SILoneehsyz89914',
                     'FTRobbiesgdl28930', 'XTAbbeyftxb30020', 'IJLornexryz53756', 'OPNikivyiv46909',
                     'LYBidgetciyw90228', 'WGBrandeczlm38659', 'HSGennimmmm87534', 'AKBriayjlw31200', 'IBMimiohsq04710',
                     'DGDaciepjxl85991', 'FISayretiam29308', 'IRTeddyjfhf56463', 'ZSDoeguvy47191', 'ICJoyerxhm83590',
                     'DFIvetteeauh48346', 'LHDavidamjjc29944', 'KZHuldaeskf58438', 'GQToveozme35219',
                     'YOAurliephmt76864', 'LUSarahyjww21520', 'PJGaelopmc29428', 'FIAngelecfwl57917',
                     'GUCodeejgwj19532', 'ISKaileycfqb77297', 'HMDidijlsp39619', 'AJLillasuwu13418', 'LTAddympnb66536',
                     'JJCarokhkv27748', 'ZMTrudejamh92293', 'DWBarbeyimiv52413', 'QMGwennyutxz19954', 'VZIvyfcxh31782',
                     'NODagmartniz14988', 'CRBesskmpl00516', 'FZRobynnhpf70214', 'SCMilzieamch95197',
                     'DWTamararwux35657', 'Czakoomer08555', 'Irsikroney470', 'Rainmerza1912', 'Nurgecopes76459',
                     'Stuhtdunno263', 'Thiasrownd1571', 'Aysurein864', 'Oberckari365', 'Brielbalta1705',
                     'Cugnosoard77780', 'Patrakubel20278', 'Rohitalao34013', 'Remmyclipp53106', 'Rangoemre326',
                     'Ulleneuss36726', 'Albislivia430', 'Yennepopek714', 'Behalkynan42115', 'Dottokhau82917',
                     'Dogantree796', 'Smejadibra6430', 'Patatsai924', 'Kobismaack1939', 'Dysonmuzi30665',
                     'Oreyluke58971', 'Prusaunk70600', 'Chiounonan26284', 'Boumarios5977', 'Sanksehnis781',
                     'Yribeknabb497', 'Jesaltuba796', 'Chuopvitt0640', 'Capuaglica428', 'Sobeydigal519',
                     'Dedionyers466', 'Nunnmisch655', 'Sacconea0928', 'Jhaklus42398', 'Vorosdodoo959', 'Edandefoy41549',
                     'Owersdilly29274', 'Gecajgaud65422', 'Benoycayax267', 'Alchesley9110', 'Manieehly99029',
                     'TFUlricazckp60398', 'EJArleenhgpd98460', 'SWKirbieqcxw94425', 'YLOrlyfuej02313',
                     'UYKirstieldx08191', 'RTDnirenbmvs98032', 'SMBunniwmth15992', 'PCSheelasekp82415',
                     'CMTeddiextsq59888', 'UHRinawhwx44161', 'NACicelyrkuh15775', 'TJBrynnahljd37546',
                     'HWWalliemhma21017', 'GEHeddagkzo73753', 'WPNadyagioz62417', 'TFErminadhei99417',
                     'XLIlyssaozop79315', 'FMMoynaodxl33702', 'VMDacynpex12381', 'SEGretalghwo15498', 'CEDezlhr57013',
                     'MPLoreensdgl75002', 'LQThiamlhp27870', 'YHKacynkds59394', 'OHAnniirfy29650', 'ATMadlenshhm30069',
                     'BNNediaicj26907', 'JPAndeenbnl57567', 'TJMavisqqkm97752', 'UNGladysoftv91361',
                     'QMRoannehcss70490', 'EMHollyknbr10495', 'MTAddawzhw42880', 'PWTraceezwcl58525',
                     'RKBriergprr93162', 'XYDarinxda71919', 'JKDionisghch79322', 'WGBrittepoxi81211',
                     'DGHelgahgvw60177', 'OKAshlenwzbu08900', 'BXJaninaerwd52530', 'XMAlveraoklj84869', 'SYNanjipx13187'}
local RECEIVER_LIST = {'ODTonyxhnr46039', 'HREdinfqjk37009', 'MQAiliieur76721', 'MJCarmonjgnz61651',
                       'XMAloiseuouj17434', 'BOGoldiynef36220', 'ZOSabinepfaj62517', 'JIGaelojkv52611',
                       'BSAdeleuaob27873', 'MGJoanajkcb77033', 'HHLexisczlo99748', 'JSNonnawdft35030',
                       'OLTonyewjzu35924', 'FTRosenelfnd31876', 'BCRicidorf81716', 'VXPhilyshf73677',
                       'CUDavitavlua57279', 'ULCalinkqxv05839', 'JUAlverafgxk76780', 'UOEssydxzp99674',
                       'PJMarcyhqcw92568', 'RLGabbievroa10110', 'RYDinahexfm88256', 'XEChereyasrt59571',
                       'YMKelliobsl23786', 'HLOdelefgpz72305', 'SQCarlendvdh67513', 'NYBeliaevek16847',
                       'TTCelinegveu04334', 'JGValeraboys52273', 'WHTricialmwo47239', 'CZElishaldtk48161',
                       'SBMonaueni57434', 'WURhebadtuy15026', 'DVJodiexkpj56566', 'TDNevsawrzw82632', 'WUGiginjfz27645',
                       'ZECasirrhb30107', 'VVSelinaefiw32787', 'AOTobyeuzqw62656', 'BRDanniesedo86484',
                       'UMShaunxvkn95512', 'GEDaciaonzb51214', 'NVTallounqtx05948', 'OWAarensknk04767',
                       'EEShayvjpd92957', 'XKEmiliaptes66100', 'BTTonigpbr58321', 'OHSheliaexdj43809',
                       'UTMarshanvel47147', 'QTMariarojc40401', 'XZAlaneulwz24826', 'GVAliceacscr45055',
                       'MADevinjhhl99551', 'VYLonnietwlw65486', 'LBCelinehukw64907', 'WGRandyuwyb17410',
                       'SYEllenedyqn54274', 'IJAmaleaxvkh59734', 'CWElisefhmz26608', 'NIJodeeqipi42712',
                       'KUElsiuupv23267', 'GGPietraunst94164', 'MLSelinegcci04091', 'YSKerrieuokb89253',
                       'JSAnjelahcaw86009', 'KGLynnakwje34386', 'BMEllenexpga25205', 'KMNanmgjv21159',
                       'AQSibleyvxnc58521', 'VELornawmhu00611', 'KHJamienmsj58932', 'XVMelisaebwu76297',
                       'CQTrudyartq41341', 'LZTameralvog99497', 'DNLavinaxgzh03555', 'VIMarindcgh83981',
                       'VCFawniamahz61532', 'JWBeckihvwo80641', 'FNSerenenbdu92414', 'LJEddioeut77368',
                       'KXDevorabjff90239'}

-- ตัวแปรสำหรับการทำงาน
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local GuiService = game:GetService("GuiService")
local VirtualInputManager = game:GetService("VirtualInputManager")

-- ตัวแปรสำหรับ tracking
local currentStep = 0
local currentStepReceiver = 0 -- ตัวแปรแยกสำหรับ receiver mode
local isTrading = false
local tradePartner = nil

-- ตัวแปรสำหรับตรวจสอบสถานะการเพิ่มไอเทม
local shroomAdded = false
local tokenAdded = false
local creatureAdded = false

-- ตัวแปรควบคุมการเรียก remote (ป้องกันการเรียกซ้อน)
local isRemoteBusy = false
local lastRemoteCallTime = 0

-- ตัวแปรสำหรับ state-based tracking (เพิ่มใหม่)
local receiverCreatureStartTime = 0
local receiverCreatureRequested = false
local receiverAcceptStartTime = 0
local receiverAcceptRequested = false

-- ตัวแปรสำหรับ receiver timeout (เพิ่มใหม่)
local lastTradeRequestTime = tick()
local RECEIVER_TIMEOUT = 300 -- 5 นาที (300 วินาที)

-- ตัวแปรสำหรับ sender state-based tracking
local senderShroomStartTime = 0
local senderShroomRequested = false
local senderTokenStartTime = 0
local senderTokenRequested = false
local senderCreatureStartTime = 0
local senderCreatureRequested = false
local senderAcceptStartTime = 0
local senderAcceptRequested = false

-- ตัวแปรป้องกันการทำงานพร้อมกัน
local isSenderMainActive = false
local isSenderReceiverActive = false

-- ตัวแปรสำหรับ timeout การรอเริ่มเทรดหลังส่งคำขอหา receiver
local SENDER_REQUEST_TIMEOUT = 200 -- วินาที
local lastSentTargetName = nil
local lastSentTargetIsReceiver = false
local lastSentTime = 0

-- ฟังก์ชันช่วยเหลือ
local function IsInList(name, list)
    for _, listName in ipairs(list) do
        if name == listName then return true end
    end
    return false
end

local function Clicked_Ui(path)
    local success, error =
        pcall(function() GuiService.SelectedObject = path end)

    if not success then
        warn(
            "❌ เกิดข้อผิดพลาดในการเลือก UI: " ..
                tostring(error))
    end
end

local function Click_NOW()
    local success, error = pcall(function()
        VirtualInputManager:SendKeyEvent(true, 13, false, game)
        wait(0.1)
        VirtualInputManager:SendKeyEvent(false, 13, false, game)
        task.wait(2)
        Clicked_Ui(nil)
    end)

    if not success then
        warn(
            "❌ เกิดข้อผิดพลาดในการกดปุ่ม: " ..
                tostring(error))
    end
end

-- ฟังก์ชันวาร์ปไปยังตำแหน่งที่กำหนด
local function WarpToLocation()
    local targetPosition = Vector3.new(-2132.24, 490.66, 1106.83)
    local tolerance = 5 -- ระยะห่างที่ยอมรับได้ (studs)
    
    while true do
        local success, error = pcall(function()
            local character = LocalPlayer.Character
            if character and character:FindFirstChild("HumanoidRootPart") then
                local currentPosition = character.HumanoidRootPart.Position
                local distance = (currentPosition - targetPosition).Magnitude
                
                -- เช็คว่าอยู่ใกล้ตำแหน่งเป้าหมายหรือยัง
                if distance <= tolerance then
                    -- อยู่ที่ตำแหน่งแล้ว ไม่ต้องวาร์ป
                    return
                end
                
                -- ยังไม่ถึงตำแหน่ง วาร์ปไป
                character:PivotTo(CFrame.new(targetPosition))
                print("✅ วาร์ปไปยังตำแหน่งที่กำหนดแล้ว (ระยะห่าง: " .. math.floor(distance) .. " studs)")
            end
        end)

        if not success then
            warn(
                "❌ เกิดข้อผิดพลาดในการวาร์ป: " ..
                    tostring(error))
        end
        task.wait(5)
    end
end

-- ฟังก์ชันหาคู่เทรดที่ว่าง
local function FindValidReceiver()
    local result = nil
    local success, error = pcall(function()
        -- ตรวจสอบ coins ก่อน
        local coinsValue = LocalPlayer.Data.Coins.Value
        if coinsValue <= 20 then
            print("💰 Coins ไม่เพียงพอ (" .. coinsValue ..
                      " <= 20) ไม่ทำการเทรด")
            return nil
        end

        print(
            "🔍 กำลังค้นหาคู่เทรดที่ว่าง...")

        -- ค้นหา receiver ที่ว่าง
        local validReceivers = {}
        local getPlayersSuccess = pcall(function()
            for _, player in pairs(Players:GetPlayers()) do
                if IsInList(player.Name, RECEIVER_LIST) then
                    local isAvailable = false
                    local tradingValue = nil
                    local checkSuccess = pcall(function()
                        if player and player:FindFirstChild("Settings") and
                            player.Settings:FindFirstChild("Trading") then
                            tradingValue = player.Settings.Trading.Value
                            isAvailable = (tradingValue == false)
                        else
                            isAvailable = true
                            tradingValue = "unknown"
                        end
                    end)

                    if not checkSuccess then
                        print(
                            "⚠️ เกิดข้อผิดพลาดในการเช็คสถานะ " ..
                                player.Name ..
                                " สมมติว่าว่าง...")
                        isAvailable = true
                        tradingValue = "error"
                    end

                    if isAvailable then
                        print("✅ พบ receiver ที่ว่าง: " ..
                                  player.Name .. " (Trading.Value = " ..
                                  tostring(tradingValue) .. ")")
                        table.insert(validReceivers, player)
                    else
                        print("❌ Receiver " .. player.Name ..
                                  " กำลังเทรดอยู่ (Trading.Value = " ..
                                  tostring(tradingValue) .. ")")
                    end
                end
            end
        end)

        if not getPlayersSuccess then
            print(
                "❌ เกิดข้อผิดพลาดในการดึงรายชื่อผู้เล่น")
            return nil
        end

        -- ถ้ามี receiver ว่าง ให้เลือกหนึ่งคน
        if #validReceivers > 0 then
            local selected = validReceivers[math.random(1, #validReceivers)]
            print("🎯 เลือก receiver: " .. selected.Name)
            result = selected
            return
        end

        -- ถ้าไม่มี receiver ว่าง ให้ค้นหา sender อื่นที่ว่าง
        print(
            "ไม่มี receiver ว่าง กำลังค้นหา sender อื่น...")
        local validSenders = {}
        for _, player in pairs(Players:GetPlayers()) do
            if IsInList(player.Name, SENDER_LIST) and player.Name ~=
                LocalPlayer.Name then
                local isAvailable = false
                local tradingValue = nil
                pcall(function()
                    tradingValue = player.Settings.Trading.Value
                    isAvailable = (tradingValue == false)
                end)

                if isAvailable then
                    print("✅ พบ sender ที่ว่าง: " ..
                              player.Name .. " (Trading.Value = " ..
                              tostring(tradingValue) .. ")")
                    table.insert(validSenders, player)
                else
                    print("❌ Sender " .. player.Name ..
                              " กำลังเทรดอยู่ (Trading.Value = " ..
                              tostring(tradingValue) .. ")")
                end
            end
        end

        if #validSenders > 0 then
            local selected = validSenders[math.random(1, #validSenders)]
            print(
                "🎯 เลือก sender เพื่อเทรดด้วย: " ..
                    selected.Name)
            result = selected
            return
        end

        print("❌ ไม่พบคู่เทรดที่ว่าง")
    end)
    if not success then
        warn(
            "❌ เกิดข้อผิดพลาดในฟังก์ชัน FindValidReceiver: " ..
                tostring(error))
    end
    return result
end

-- ฟังก์ชันส่ง trade request
local function SendTradeRequest(receiverName)
    local success, error = pcall(function()
        local args = {
            "SendRequest", game:GetService("Players"):WaitForChild(receiverName)
        }
        game:GetService("Players").LocalPlayer:WaitForChild("Remotes")
            :WaitForChild("TradeRequestRemote"):FireServer(unpack(args))
        print("📤 ส่ง trade request ไปยัง " .. receiverName)
    end)

    if not success then
        warn(
            "❌ เกิดข้อผิดพลาดในการส่ง trade request: " ..
                tostring(error))
        return false
    end

    return true
end

-- ฟังก์ชันหาผู้เล่น sender ที่ว่าง (ค้นหาเฉพาะ sender)
local function FindAvailableSender()
    local result = nil
    local success, error = pcall(function()
        print(
            "🔍 กำลังค้นหา sender ที่ว่าง...")

        local validSenders = {}
        for _, player in pairs(Players:GetPlayers()) do
            if IsInList(player.Name, SENDER_LIST) and player.Name ~=
                LocalPlayer.Name then
                local isAvailable = false
                local tradingValue = nil
                pcall(function()
                    if player and player:FindFirstChild("Settings") and
                        player.Settings:FindFirstChild("Trading") then
                        tradingValue = player.Settings.Trading.Value
                        isAvailable = (tradingValue == false)
                    else
                        isAvailable = true
                        tradingValue = "unknown"
                    end
                end)

                if isAvailable then
                    print("✅ พบ sender ที่ว่าง: " ..
                              player.Name .. " (Trading.Value = " ..
                              tostring(tradingValue) .. ")")
                    table.insert(validSenders, player)
                else
                    print("❌ Sender " .. player.Name ..
                              " กำลังเทรดอยู่ (Trading.Value = " ..
                              tostring(tradingValue) .. ")")
                end
            end
        end

        if #validSenders > 0 then
            local selected = validSenders[math.random(1, #validSenders)]
            print("🎯 เลือก sender: " .. selected.Name)
            result = selected
            return
        end

        print("❌ ไม่พบ sender ที่ว่าง")
    end)
    if not success then
        warn(
            "❌ เกิดข้อผิดพลาดในฟังก์ชัน FindAvailableSender: " ..
                tostring(error))
    end
    return result
end

-- ฟังก์ชัน add shroom
local function AddShroom()
    local tradeGuiSafe = LocalPlayer.PlayerGui and
                             LocalPlayer.PlayerGui:FindFirstChild("TradeGui")
    if not (tradeGuiSafe and tradeGuiSafe.Enabled) then
        print("❌ TradeGui ไม่เปิดใช้งาน")
        return false
    end

    local success, error = pcall(function()
        -- ตรวจสอบ coins ก่อน
        local coinsValue = LocalPlayer.Data.Coins.Value
        if coinsValue <= 20 then
            print("💰 Coins ไม่เพียงพอ (" .. coinsValue ..
                      " <= 20) ไม่สามารถเพิ่ม shroom ได้")
            return false
        end

        local tradeGui = LocalPlayer.PlayerGui.TradeGui
        local containerFrame = tradeGui.ContainerFrame
        local theirsFrame = containerFrame.Theirs
        local displayNameLabel = theirsFrame.DisplayNameLabel
        local userNameLabel = displayNameLabel.UserNameLabel
        local opponentName = userNameLabel.Text

        opponentName = opponentName:gsub("@", "")
        local localPlayerName = LocalPlayer.Name

        local amount = coinsValue - 20
        if amount > 500000 then amount = 500000 end
        if amount < 0 then amount = 0 end

        local args = {
            "AddTradeItem",
            {
                Overwrite = true,
                ItemType = "Currency",
                Name = "Shooms",
                Amount = amount
            }
        }

        if not LocalPlayer.PlayerGui.TradeGui.Enabled then
            print(
                "❌ TradeGui ถูกปิดระหว่าง AddShroom, reset currentStep")
            currentStep = 0
            return false
        end

        local remote1Name = localPlayerName .. "-" .. opponentName ..
                                "TradeRemote"
        local remote1 = ReplicatedStorage:FindFirstChild("Remotes") and
                            ReplicatedStorage.Remotes:FindFirstChild(remote1Name)
        if not remote1 then
            print("❌ ไม่พบ remote1: " .. tostring(remote1Name))
            currentStep = 0
            return false
        end
        remote1:InvokeServer(unpack(args))
        print("⏳ รอ 3 วินาทีหลังใช้ remote1...")
        wait(3)

        local remote2Name = opponentName .. "-" .. localPlayerName ..
                                "TradeRemote"
        local remote2 = ReplicatedStorage:FindFirstChild("Remotes") and
                            ReplicatedStorage.Remotes:FindFirstChild(remote2Name)
        if not remote2 then
            print("❌ ไม่พบ remote2: " .. tostring(remote2Name))
            currentStep = 0
            return false
        end
        remote2:InvokeServer(unpack(args))
        print("⏳ รอ 3 วินาทีหลังใช้ remote2...")
        wait(3)

        print("✅ เพิ่ม " .. amount ..
                  " Shrooms ในการเทรดกับ " ..
                  opponentName)
        return true
    end)

    if not success then
        warn(
            "❌ เกิดข้อผิดพลาดในฟังก์ชัน AddShroom: " ..
                tostring(error))
        currentStep = 0
        return false
    end

    return true
end

-- ฟังก์ชัน add token
local function AddToken()
    local tradeGuiSafe = LocalPlayer.PlayerGui and
                             LocalPlayer.PlayerGui:FindFirstChild("TradeGui")
    if not (tradeGuiSafe and tradeGuiSafe.Enabled) then
        print("❌ TradeGui ไม่เปิดใช้งาน")
        return false
    end

    -- ตรวจสอบว่า remote กำลังใช้งานอยู่หรือไม่
    if isRemoteBusy then
        print(
            "⚠️ Remote กำลังใช้งานอยู่ รอสักครู่...")
        return false
    end

    local tokenList = {
        'ChangeCreatureColorsToken', 'CreatureReviveToken', 'FullGrowToken',
        'PartialGrowToken', 'FreeSpinToken', 'RandomStoredCreatureToken',
        'DeathGachaToken'
    }

    local success, error = pcall(function()
        local tradeGui = LocalPlayer.PlayerGui.TradeGui
        local containerFrame = tradeGui.ContainerFrame
        local theirsFrame = containerFrame.Theirs
        local displayNameLabel = theirsFrame.DisplayNameLabel
        local userNameLabel = displayNameLabel.UserNameLabel
        local opponentName = userNameLabel.Text

        opponentName = opponentName:gsub('@', '')
        local localPlayerName = LocalPlayer.Name

        -- ตั้งค่า remote กำลังใช้งาน
        isRemoteBusy = true

        for i, tokenName in ipairs(tokenList) do
            if not LocalPlayer.PlayerGui.TradeGui.Enabled then
                print(
                    "❌ TradeGui ถูกปิดระหว่าง AddToken, reset currentStep")
                isRemoteBusy = false
                currentStep = 0
                return false
            end

            local args = {
                'AddTradeItem',
                {
                    Overwrite = true,
                    ItemType = 'Tokens',
                    Name = tokenName,
                    Amount = 150
                }
            }

            local remoteName = localPlayerName .. '-' .. opponentName ..
                                   'TradeRemote'
            local remote = ReplicatedStorage:FindFirstChild('Remotes') and
                               ReplicatedStorage.Remotes:FindFirstChild(
                                   remoteName)
            if not remote then
                print('❌ ไม่พบ remote: ' .. tostring(remoteName))
                isRemoteBusy = false
                currentStep = 0
                return false
            end

            print("📤 กำลังเพิ่ม " .. tokenName .. " (" ..
                      i .. "/" .. #tokenList .. ")...")

            local remoteSuccess, remoteError = pcall(function()
                remote:InvokeServer(unpack(args))
            end)

            if not remoteSuccess then
                warn(
                    "❌ เกิดข้อผิดพลาดในการเรียก remote สำหรับ " ..
                        tokenName .. ": " .. tostring(remoteError))
                isRemoteBusy = false
                currentStep = 0
                return false
            end

            print('✅ เพิ่ม ' .. tokenName ..
                      ' ในการเทรดกับ ' .. opponentName)

            -- รอ 3 วินาทีหลังใช้ remote
            print(
                "⏳ รอ 3 วินาทีหลังใช้ remote สำหรับ " ..
                    tokenName .. "...")
            wait(3)
        end

        -- ปลดล็อค remote
        isRemoteBusy = false
        print(
            '✅ เพิ่ม token ทั้งหมดเสร็จสิ้น')
        return true
    end)

    if not success then
        warn(
            "❌ เกิดข้อผิดพลาดในฟังก์ชัน AddToken: " ..
                tostring(error))
        isRemoteBusy = false
        currentStep = 0
        return false
    end

    return true
end

-- ฟังก์ชัน add creature สำหรับ Receiver แบบปลอดภัย
local function AddCreatureReceiver()
    local tradeGuiSafe = LocalPlayer.PlayerGui and
                             LocalPlayer.PlayerGui:FindFirstChild("TradeGui")
    if not (tradeGuiSafe and tradeGuiSafe.Enabled) then
        print("❌ TradeGui ไม่เปิดใช้งาน")
        return false
    end

    -- ตรวจสอบว่า remote กำลังใช้งานอยู่หรือไม่
    if isRemoteBusy then
        print(
            "⚠️ Remote กำลังใช้งานอยู่ รอสักครู่...")
        return false
    end

    local success, error = pcall(function()
        local Unlocks = LocalPlayer.Data and LocalPlayer.Data.Unlocks
        local creatureName = nil

        if LocalPlayer and LocalPlayer.Data and LocalPlayer.Data.Unlocks then
            for _, child in pairs(Unlocks:GetChildren()) do
                if not LocalPlayer.PlayerGui.TradeGui.Enabled then
                    print(
                        '❌ TradeGui ถูกปิดระหว่าง AddCreatureReceiver, reset currentStep')
                    currentStepReceiver = 0
                    return false
                end
                if child:IsA('ValueBase') and tonumber(child.Value) and
                    tonumber(child.Value) > 0 then
                    if child.Name ~= "Vin'rou" and child.Name ~= 'Eulopii' then
                        creatureName = child.Name
                        break
                    end
                end
            end

            if not creatureName then
                warn(
                    '❌ ไม่พบ creature ที่ตรงเงื่อนไข')
                currentStepReceiver = 0
                return false
            end

            local theirLabel = LocalPlayer.PlayerGui and
                                   LocalPlayer.PlayerGui:FindFirstChild(
                                       'TradeGui') and
                                   LocalPlayer.PlayerGui.TradeGui.ContainerFrame
                                       .Theirs.DisplayNameLabel.UserNameLabel

            if not theirLabel or not theirLabel.Text then
                warn(
                    '❌ ไม่พบชื่อฝ่ายตรงข้าม')
                currentStepReceiver = 0
                return false
            end

            local otherPlayerName = theirLabel.Text
            if string.sub(otherPlayerName, 1, 1) == '@' then
                otherPlayerName = string.sub(otherPlayerName, 2)
            end

            local remoteName = otherPlayerName .. '-' .. LocalPlayer.Name ..
                                   'TradeRemote'
            local remotes = ReplicatedStorage:FindFirstChild('Remotes')
            if not remotes then
                print('❌ ไม่พบ Remotes folder')
                currentStepReceiver = 0
                return false
            end

            local remote = remotes:FindFirstChild(remoteName)
            if not remote then
                print('❌ ไม่พบ remote: ' .. tostring(remoteName))
                currentStepReceiver = 0
                return false
            end

            if not LocalPlayer.PlayerGui.TradeGui.Enabled then
                print(
                    '❌ TradeGui ถูกปิดระหว่าง AddCreatureReceiver, reset currentStep')
                currentStepReceiver = 0
                return false
            end

            -- ตรวจสอบเวลาที่ผ่านไปตั้งแต่ remote call ล่าสุด
            local timeSinceLastCall = tick() - lastRemoteCallTime
            if timeSinceLastCall < 3 then
                local waitTime = 3 - timeSinceLastCall
                print("⏳ รอ " .. string.format("%.1f", waitTime) ..
                          " วินาทีก่อนเรียก remote สำหรับ creature...")
                wait(waitTime)
            end

            -- ตั้งค่า remote กำลังใช้งาน
            isRemoteBusy = true
            lastRemoteCallTime = tick()

            local args = {
                'AddTradeItem',
                {
                    Overwrite = true,
                    ItemType = 'Creatures',
                    Name = creatureName,
                    Amount = 1
                }
            }

            print("📤 กำลังเพิ่ม creature: " ..
                      creatureName .. "...")

            local remoteSuccess, remoteError = pcall(function()
                remote:InvokeServer(unpack(args))
            end)

            if not remoteSuccess then
                warn(
                    '❌ เกิดข้อผิดพลาดในการเรียก Remote: ' ..
                        tostring(remoteError))
                isRemoteBusy = false
                currentStepReceiver = 0
                return false
            else
                print('✅ เพิ่ม creature สำเร็จ!')
                lastRemoteCallTime = tick()

                -- รอ 3 วินาทีหลังใช้ remote
                print(
                    "⏳ รอ 3 วินาทีหลังใช้ remote สำหรับ creature...")
                wait(3)

                -- ปลดล็อค remote
                isRemoteBusy = false
                return true
            end
        else
            print(
                '❌ ไม่สามารถเข้าถึง Data.Unlocks ได้')
            currentStepReceiver = 0
            return false
        end
    end)

    if not success then
        warn(
            '❌ เกิดข้อผิดพลาดในฟังก์ชัน AddCreatureReceiver: ' ..
                tostring(error))
        isRemoteBusy = false
        currentStepReceiver = 0
        return false
    end

    return true
end

-- ฟังก์ชัน add creature
local function AddCreature(isReceiver)
    local tradeGuiSafe = LocalPlayer.PlayerGui and
                             LocalPlayer.PlayerGui:FindFirstChild("TradeGui")
    if not (tradeGuiSafe and tradeGuiSafe.Enabled) then
        print("❌ TradeGui ไม่เปิดใช้งาน")
        return false
    end

    -- ตรวจสอบว่า remote กำลังใช้งานอยู่หรือไม่
    if isRemoteBusy then
        print(
            "⚠️ Remote กำลังใช้งานอยู่ รอสักครู่...")
        return false
    end

    local success, error = pcall(function()
        local Unlocks = LocalPlayer.Data and LocalPlayer.Data.Unlocks
        local creatureName = nil

        if LocalPlayer and LocalPlayer.Data and LocalPlayer.Data.Unlocks then
            for _, child in pairs(Unlocks:GetChildren()) do
                if not LocalPlayer.PlayerGui.TradeGui.Enabled then
                    print(
                        '❌ TradeGui ถูกปิดระหว่าง AddCreature, reset currentStep')
                    currentStep = 0
                    return false
                end
                if child:IsA('ValueBase') and tonumber(child.Value) and
                    tonumber(child.Value) > 0 then
                    if child.Name ~= "Vin'rou" and child.Name ~= 'Eulopii' then
                        creatureName = child.Name
                        break
                    end
                end
            end

            if not creatureName then
                warn(
                    '❌ ไม่พบ creature ที่ตรงเงื่อนไข')
                currentStep = 0
                return false
            end

            local theirLabel = LocalPlayer.PlayerGui and
                                   LocalPlayer.PlayerGui:FindFirstChild(
                                       'TradeGui') and
                                   LocalPlayer.PlayerGui.TradeGui.ContainerFrame
                                       .Theirs.DisplayNameLabel.UserNameLabel

            if not theirLabel or not theirLabel.Text then
                warn(
                    '❌ ไม่พบชื่อฝ่ายตรงข้าม')
                currentStep = 0
                return false
            end

            local otherPlayerName = theirLabel.Text
            if string.sub(otherPlayerName, 1, 1) == '@' then
                otherPlayerName = string.sub(otherPlayerName, 2)
            end

            local remoteName
            if isReceiver then
                remoteName = otherPlayerName .. '-' .. LocalPlayer.Name ..
                                 'TradeRemote'
            else
                remoteName = LocalPlayer.Name .. '-' .. otherPlayerName ..
                                 'TradeRemote'
            end
            local remote = ReplicatedStorage:FindFirstChild('Remotes') and
                               ReplicatedStorage.Remotes:FindFirstChild(
                                   remoteName)
            if not remote then
                print('❌ ไม่พบ remote: ' .. tostring(remoteName))
                currentStep = 0
                return false
            end

            if not LocalPlayer.PlayerGui.TradeGui.Enabled then
                print(
                    '❌ TradeGui ถูกปิดระหว่าง AddCreature, reset currentStep')
                currentStep = 0
                return false
            end

            -- ตรวจสอบเวลาที่ผ่านไปตั้งแต่ remote call ล่าสุด
            local timeSinceLastCall = tick() - lastRemoteCallTime
            if timeSinceLastCall < 3 then
                local waitTime = 3 - timeSinceLastCall
                print("⏳ รอ " .. string.format("%.1f", waitTime) ..
                          " วินาทีก่อนเรียก remote สำหรับ creature...")
                wait(waitTime)
            end

            -- ตั้งค่า remote กำลังใช้งาน
            isRemoteBusy = true
            lastRemoteCallTime = tick()

            local args = {
                'AddTradeItem',
                {
                    Overwrite = true,
                    ItemType = 'Creatures',
                    Name = creatureName,
                    Amount = 1
                }
            }

            print("📤 กำลังเพิ่ม creature: " ..
                      creatureName .. "...")

            local remoteSuccess, remoteError = pcall(function()
                remote:InvokeServer(unpack(args))
            end)

            if not remoteSuccess then
                warn(
                    '❌ เกิดข้อผิดพลาดในการเรียก Remote: ' ..
                        tostring(remoteError))
                isRemoteBusy = false
                currentStep = 0
                return false
            else
                print('✅ เพิ่ม creature สำเร็จ!')
                lastRemoteCallTime = tick()

                -- รอ 3 วินาทีหลังใช้ remote
                print(
                    "⏳ รอ 3 วินาทีหลังใช้ remote สำหรับ creature...")
                wait(3)

                -- ปลดล็อค remote
                isRemoteBusy = false
                return true
            end
        else
            print(
                '❌ ไม่สามารถเข้าถึง Data.Unlocks ได้')
            currentStep = 0
            return false
        end
    end)

    if not success then
        warn(
            '❌ เกิดข้อผิดพลาดในฟังก์ชัน AddCreature: ' ..
                tostring(error))
        isRemoteBusy = false
        currentStep = 0
        return false
    end

    return true
end

-- ฟังก์ชันกด accept สำหรับ Receiver แบบปลอดภัย
local function ClickAcceptReceiver()
    local success, error = pcall(function()
        if not LocalPlayer.PlayerGui.TradeGui.Enabled then
            print("❌ TradeGui ไม่เปิดใช้งาน")
            return false
        end

        -- ตรวจสอบว่า remote กำลังใช้งานอยู่หรือไม่
        if isRemoteBusy then
            print(
                "⚠️ Remote ยังใช้งานอยู่ ไม่สามารถกด accept ได้!")
            return false
        end

        local tradeGui = LocalPlayer.PlayerGui:FindFirstChild("TradeGui")
        if not tradeGui then
            print("❌ ไม่พบ TradeGui")
            return false
        end

        local containerFrame = tradeGui:FindFirstChild("ContainerFrame")
        if not containerFrame then
            print("❌ ไม่พบ ContainerFrame")
            return false
        end

        local acceptButton = containerFrame:FindFirstChild("AcceptButton")
        if not acceptButton then
            print("❌ ไม่พบ AcceptButton")
            return false
        end

        local upperLabel = acceptButton:FindFirstChild("UpperLabel")
        if not upperLabel then
            print("❌ ไม่พบ UpperLabel")
            return false
        end

        Clicked_Ui(upperLabel)
        task.wait(.1)
        Click_NOW()
        print("✅ กด accept แล้ว")
        return true
    end)

    if not success then
        warn(
            "❌ เกิดข้อผิดพลาดในการกด accept: " ..
                tostring(error))
        return false
    end

    return true
end

-- ฟังก์ชันกด accept
local function ClickAccept()
    local success, error = pcall(function()
        if not LocalPlayer.PlayerGui.TradeGui.Enabled then
            print("❌ TradeGui ไม่เปิดใช้งาน")
            return false
        end

        -- ตรวจสอบว่า remote กำลังใช้งานอยู่หรือไม่
        if isRemoteBusy then
            print(
                "⚠️ Remote ยังใช้งานอยู่ ไม่สามารถกด accept ได้!")
            return false
        end

        Clicked_Ui(LocalPlayer.PlayerGui.TradeGui.ContainerFrame.AcceptButton
                       .UpperLabel)
        task.wait(.1)
        Click_NOW()
        print("✅ กด accept แล้ว")
        return true
    end)

    if not success then
        warn(
            "❌ เกิดข้อผิดพลาดในการกด accept: " ..
                tostring(error))
        return false
    end

    return true
end

-- ฟังก์ชันกด cancel
local function ClickCancel()
    local success, error = pcall(function()
        Clicked_Ui(LocalPlayer.PlayerGui.TradeGui.ContainerFrame.CancelButton
                       .UpperLabel)
        task.wait(.1)
        Click_NOW()
        print("❌ ยกเลิกการเทรด")
    end)

    if not success then
        warn(
            "❌ เกิดข้อผิดพลาดในการกด cancel: " ..
                tostring(error))
    end
end

-- ฟังก์ชันเช็คชื่อคู่เทรด
local function CheckTradePartner()
    local success, error = pcall(function()
        if not LocalPlayer.PlayerGui.TradeGui.Enabled then return false end

        local theirLabel = LocalPlayer.PlayerGui.TradeGui.ContainerFrame.Theirs
                               .DisplayNameLabel.UserNameLabel
        if not theirLabel or not theirLabel.Text then return false end

        local opponentName = theirLabel.Text:gsub("@", "")

        -- เช็คว่าชื่อตรงกับในรายชื่อหรือไม่
        if IsInList(opponentName, RECEIVER_LIST) or
            IsInList(opponentName, SENDER_LIST) then
            print(
                "✅ ชื่อคู่เทรดถูกต้อง: " ..
                    opponentName)
            return true
        else
            print(
                "❌ ชื่อคู่เทรดไม่ตรงกับรายชื่อ: " ..
                    opponentName)
            ClickCancel()
            return false
        end
    end)

    if not success then
        warn(
            "❌ เกิดข้อผิดพลาดในการเช็คชื่อคู่เทรด: " ..
                tostring(error))
        return false
    end

    return true
end

-- ฟังก์ชัน accept trade request สำหรับ Sender
local function AcceptTradeRequestForSender()
    local success, error = pcall(function()
        local requestsGui = LocalPlayer.PlayerGui:FindFirstChild('RequestsGui')
        if not requestsGui then return false end

        local requestsFrame = requestsGui:FindFirstChild('RequestsFrame')
        if not requestsFrame then return false end

        local mobileFrame = requestsFrame:FindFirstChild('Mobile')
        if mobileFrame then
            for _, child in pairs(mobileFrame:GetChildren()) do
                if string.find(child.Name, "^Trade") then
                    local senderName = child.Name:sub(6) -- ตัด "Trade" ออก
                    -- Sender สามารถรับ trade request จาก sender อื่นได้
                    if IsInList(senderName, SENDER_LIST) then
                        print(
                            "✅ Sender พบ trade request แบบ Mobile จาก " ..
                                senderName .. " กำลัง accept...")

                        -- อัปเดตเวลาสุดท้ายที่ได้รับ trade request (เพิ่มใหม่)
                        lastTradeRequestTime = tick()

                        Clicked_Ui(child.AcceptButton.UpperLabel)
                        task.wait(.1)
                        Click_NOW()
                        return true
                    else
                        print("❌ Trade request แบบ Mobile จาก " ..
                                  senderName ..
                                  " ไม่ตรงกับรายชื่อ กำลัง decline...")
                        Clicked_Ui(child.DeclineButton.UpperLabel)
                        task.wait(.1)
                        Click_NOW()
                    end
                end
            end
        end

        local otherFrame = requestsFrame:FindFirstChild('Other')
        if not otherFrame then return false end

        for _, child in pairs(otherFrame:GetChildren()) do
            if string.find(child.Name, "^Trade") then
                local senderName = child.Name:sub(6) -- ตัด "Trade" ออก
                -- Sender สามารถรับ trade request จาก sender อื่นได้
                if IsInList(senderName, SENDER_LIST) then
                    print(
                        "✅ Sender พบ trade request แบบ Other จาก " ..
                            senderName .. " กำลัง accept...")

                    -- อัปเดตเวลาสุดท้ายที่ได้รับ trade request (เพิ่มใหม่)
                    lastTradeRequestTime = tick()

                    Clicked_Ui(child.AcceptButton.UpperLabel)
                    task.wait(.1)
                    Click_NOW()
                    return true
                else
                    print("❌ Trade request จาก " .. senderName ..
                              " ไม่ตรงกับรายชื่อ กำลัง decline...")
                    Clicked_Ui(child.DeclineButton.UpperLabel)
                    task.wait(.1)
                    Click_NOW()
                end
            end
        end

        return false
    end)

    if not success then
        warn(
            "❌ เกิดข้อผิดพลาดในการ accept trade request สำหรับ Sender: " ..
                tostring(error))
        return false
    end

    return true
end

-- ฟังก์ชัน accept trade request สำหรับ Receiver แบบปลอดภัย
local function AcceptTradeRequestReceiver()
    local success, error = pcall(function()
        local requestsGui = LocalPlayer.PlayerGui:FindFirstChild('RequestsGui')
        if not requestsGui then return false end

        local requestsFrame = requestsGui:FindFirstChild('RequestsFrame')
        if not requestsFrame then return false end

        local mobileFrame = requestsFrame:FindFirstChild('Mobile')
        if mobileFrame then
            for _, child in pairs(mobileFrame:GetChildren()) do
                if string.find(child.Name, "^Trade") then
                    local senderName = child.Name:sub(6) -- ตัด "Trade" ออก
                    if IsInList(senderName, SENDER_LIST) then
                        print(
                            "✅ Receiver พบ trade request แบบ Mobile จาก " ..
                                senderName .. " กำลัง accept...")

                        -- อัปเดตเวลาสุดท้ายที่ได้รับ trade request (เพิ่มใหม่)
                        lastTradeRequestTime = tick()

                        Clicked_Ui(child.AcceptButton.UpperLabel)
                        task.wait(.1)
                        Click_NOW()
                        return true
                    else
                        print("❌ Trade request แบบ Mobile จาก " ..
                                  senderName ..
                                  " ไม่ตรงกับรายชื่อ กำลัง decline...")
                        Clicked_Ui(child.DeclineButton.UpperLabel)
                        task.wait(.1)
                        Click_NOW()
                    end
                end
            end
        end

        local otherFrame = requestsFrame:FindFirstChild('Other')
        if not otherFrame then return false end

        for _, child in pairs(otherFrame:GetChildren()) do
            if string.find(child.Name, "^Trade") then
                local senderName = child.Name:sub(6) -- ตัด "Trade" ออก
                if IsInList(senderName, SENDER_LIST) then
                    print(
                        "✅ Receiver พบ trade request แบบ Other จาก " ..
                            senderName .. " กำลัง accept...")

                    -- อัปเดตเวลาสุดท้ายที่ได้รับ trade request (เพิ่มใหม่)
                    lastTradeRequestTime = tick()

                    Clicked_Ui(child.AcceptButton.UpperLabel)
                    task.wait(.1)
                    Click_NOW()
                    return true
                else
                    print("❌ Trade request จาก " .. senderName ..
                              " ไม่ตรงกับรายชื่อ กำลัง decline...")
                    Clicked_Ui(child.DeclineButton.UpperLabel)
                    task.wait(.1)
                    Click_NOW()
                end
            end
        end

        return false
    end)

    if not success then
        warn(
            "❌ เกิดข้อผิดพลาดในการ accept trade request สำหรับ Receiver: " ..
                tostring(error))
        return false
    end

    return true
end

-- ฟังก์ชัน accept trade request สำหรับ Receiver
local function AcceptTradeRequest()
    local success, error = pcall(function()
        local requestsGui = LocalPlayer.PlayerGui:FindFirstChild('RequestsGui')
        if not requestsGui then return false end

        local requestsFrame = requestsGui:FindFirstChild('RequestsFrame')
        if not requestsFrame then return false end

        local mobileFrame = requestsFrame:FindFirstChild('Mobile')
        if mobileFrame then
            for _, child in pairs(mobileFrame:GetChildren()) do
                if string.find(child.Name, "^Trade") then
                    local senderName = child.Name:sub(6) -- ตัด "Trade" ออก
                    if IsInList(senderName, SENDER_LIST) then
                        print(
                            "✅ Receiver พบ trade request แบบ Mobile จาก " ..
                                senderName .. " กำลัง accept...")

                        -- อัปเดตเวลาสุดท้ายที่ได้รับ trade request (เพิ่มใหม่)
                        lastTradeRequestTime = tick()

                        Clicked_Ui(child.AcceptButton.UpperLabel)
                        task.wait(.1)
                        Click_NOW()
                        return true
                    else
                        print("❌ Trade request แบบ Mobile จาก " ..
                                  senderName ..
                                  " ไม่ตรงกับรายชื่อ กำลัง decline...")
                        Clicked_Ui(child.DeclineButton.UpperLabel)
                        task.wait(.1)
                        Click_NOW()
                    end
                end
            end
        end

        local otherFrame = requestsFrame:FindFirstChild('Other')
        if not otherFrame then return false end

        for _, child in pairs(otherFrame:GetChildren()) do
            if string.find(child.Name, "^Trade") then
                local senderName = child.Name:sub(6) -- ตัด "Trade" ออก
                if IsInList(senderName, SENDER_LIST) then
                    print(
                        "✅ Receiver พบ trade request แบบ Other จาก " ..
                            senderName .. " กำลัง accept...")

                    -- อัปเดตเวลาสุดท้ายที่ได้รับ trade request (เพิ่มใหม่)
                    lastTradeRequestTime = tick()

                    Clicked_Ui(child.AcceptButton.UpperLabel)
                    task.wait(.1)
                    Click_NOW()
                    return true
                else
                    print("❌ Trade request จาก " .. senderName ..
                              " ไม่ตรงกับรายชื่อ กำลัง decline...")
                    Clicked_Ui(child.DeclineButton.UpperLabel)
                    task.wait(.1)
                    Click_NOW()
                end
            end
        end

        return false
    end)

    if not success then
        warn(
            "❌ เกิดข้อผิดพลาดในการ accept trade request สำหรับ Receiver: " ..
                tostring(error))
        return false
    end

    return true
end

-- ฟังก์ชัน Coroutine สำหรับ Sender ที่รับ trade request
local function SenderReceiverCoroutine()
    while true do
        local success, error = pcall(function()
            -- ตรวจสอบ coins ก่อน
            local coinsValue = LocalPlayer.Data.Coins.Value
            if coinsValue <= 20 then
                print("💰 Coins ไม่เพียงพอ (" ..
                          coinsValue ..
                          " <= 20) SenderReceiver ไม่ทำงาน")
                wait(10) -- รอ 10 วินาทีก่อนตรวจสอบใหม่
                return
            end

            if not LocalPlayer.PlayerGui.TradeGui.Enabled then
                -- รอ trade request
                AcceptTradeRequestForSender()

                -- ตรวจสอบ timeout สำหรับ Sender ที่ทำงานแบบ Receiver (เพิ่มใหม่)
                local timeSinceLastRequest = tick() - lastTradeRequestTime
                local timeRemaining = RECEIVER_TIMEOUT - timeSinceLastRequest

                if timeSinceLastRequest >= RECEIVER_TIMEOUT then
                    print(
                        "⚠️ Sender (Receiver mode) ไม่ได้รับ trade request นาน " ..
                            string.format("%.1f", timeSinceLastRequest) ..
                            " วินาที (เกิน " ..
                            RECEIVER_TIMEOUT .. " วินาที)")
                    print(
                        "🔄 กำลังเปลี่ยนเซิร์ฟเวอร์เพื่อหาคู่เทรดใหม่...")

                    local success, error = pcall(function()
                        local TeleportService = game:GetService(
                                                    "TeleportService")
                        TeleportService:Teleport(14119723130)
                    end)

                    if not success then
                        warn(
                            "❌ เกิดข้อผิดพลาดในการเปลี่ยนเซิร์ฟเวอร์: " ..
                                tostring(error))
                        print(
                            "🚪 กำลังออกจากเกม...")
                        game:Shutdown()
                    end
                    return
                else
                    -- แสดงสถานะเวลาที่เหลือทุก 30 วินาที
                    if math.floor(timeSinceLastRequest) % 30 == 0 or
                        timeRemaining <= 60 then
                        print(
                            "⏰ Sender (Receiver mode) รอ trade request... เหลือเวลาอีก " ..
                                string.format("%.0f", timeRemaining) ..
                                " วินาทีก่อนเปลี่ยนเซิร์ฟเวอร์")
                    end
                end

                -- รีเซ็ตสถานะเมื่อไม่ได้เทรด
                receiverCreatureStartTime = 0
                receiverCreatureRequested = false
                receiverAcceptStartTime = 0
                receiverAcceptRequested = false
                currentStepReceiver = 0
                isSenderReceiverActive = false
                wait(2)
            else
                -- กำลังเทรดอยู่ (เมื่อเป็น receiver)
                -- ตรวจสอบว่ามี trade request หรือไม่
                local hasTradeRequest = false
                local requestsFrame = LocalPlayer.PlayerGui.RequestsGui
                                          .RequestsFrame.Other
                if requestsFrame then
                    for _, child in pairs(requestsFrame:GetChildren()) do
                        if string.find(child.Name, "^Trade") then
                            hasTradeRequest = true
                            break
                        end
                    end
                end

                -- ถ้ามี trade request ให้ override main sender
                if hasTradeRequest then
                    print(
                        "📩 พบ trade request กำลัง override Main Sender...")
                    isSenderMainActive = false
                end

                -- ตรวจสอบว่า main sender loop กำลังทำงานอยู่หรือไม่
                if isSenderMainActive then
                    print(
                        "⏸️ Main Sender กำลังทำงานอยู่ SenderReceiver รอสักครู่...")
                    wait(1)
                    return
                end

                if currentStepReceiver == 0 then
                    -- เช็คชื่อคู่เทรดก่อน
                    if CheckTradePartner() then
                        isSenderReceiverActive = true
                        currentStepReceiver = 1
                        print(
                            "🚀 Sender เริ่มขั้นตอนที่ 1: Add Creature (โหมด Receiver)")
                    else
                        wait(1)
                    end
                elseif currentStepReceiver == 1 then
                    -- Add Creature - ใช้ state-based tracking
                    if not receiverCreatureRequested then
                        -- ตรวจสอบว่า remote กำลังใช้งานอยู่หรือไม่
                        if isRemoteBusy then
                            print(
                                "⏳ Remote กำลังใช้งานอยู่ รอสักครู่...")
                            wait(1)
                        else
                            print("🚀 เริ่ม Add Creature...")
                            -- เริ่มทำ AddCreature แบบไม่รอผลลัพธ์
                            spawn(function()
                                AddCreature(true)
                            end)
                            receiverCreatureRequested = true
                            receiverCreatureStartTime = tick()
                            print(
                                "⏳ รอให้ Add Creature เสร็จ...")
                        end
                    else
                        -- ตรวจสอบว่าผ่านไป 5 วินาทีแล้วหรือยัง
                        local elapsedTime = tick() - receiverCreatureStartTime
                        if elapsedTime >= 5 then
                            currentStepReceiver = 2
                            print(
                                "   Sender เริ่มขั้นตอนที่ 2: Click Accept (โหมด Receiver)")
                        else
                            print(
                                "⏳ รอ Add Creature เสร็จ... (" ..
                                    string.format("%.1f", 5 - elapsedTime) ..
                                    " วินาที)")
                        end
                    end
                elseif currentStepReceiver == 2 then
                    -- Click Accept - ใช้ state-based tracking
                    if not receiverAcceptRequested then
                        print("🚀 เริ่ม Click Accept...")
                        -- เริ่มทำ ClickAccept แบบไม่รอผลลัพธ์
                        spawn(function() ClickAccept() end)
                        receiverAcceptRequested = true
                        receiverAcceptStartTime = tick()
                        print(
                            "⏳ รอให้ Click Accept เสร็จ...")
                    else
                        -- ตรวจสอบว่าผ่านไป 3 วินาทีแล้วหรือยัง
                        local elapsedTime = tick() - receiverAcceptStartTime
                        if elapsedTime >= 3 then
                            currentStepReceiver = 0
                            print(
                                "✅ Sender เทรดเสร็จสิ้น (โหมด Receiver)")
                            -- รีเซ็ตสถานะ
                            receiverCreatureStartTime = 0
                            receiverCreatureRequested = false
                            receiverAcceptStartTime = 0
                            receiverAcceptRequested = false
                            isSenderReceiverActive = false
                        else
                            print(
                                "⏳ รอ Click Accept เสร็จ... (" ..
                                    string.format("%.1f", 3 - elapsedTime) ..
                                    " วินาที)")
                        end
                    end
                end
                wait(1)
            end
        end)

        if not success then
            warn(
                "❌ เกิดข้อผิดพลาดใน SenderReceiverCoroutine: " ..
                    tostring(error))
            currentStepReceiver = 0
            -- รีเซ็ตสถานะ
            receiverCreatureStartTime = 0
            receiverCreatureRequested = false
            receiverAcceptStartTime = 0
            receiverAcceptRequested = false
            isSenderReceiverActive = false
            wait(5) -- รอ 5 วินาทีก่อนลองใหม่
        end
    end
end

function TradeStepHandlerSender(step)
    if not LocalPlayer.PlayerGui.TradeGui.Enabled then
        -- ยังไม่ได้เทรด
        if step ~= 0 then
            print(
                "Trade ถูกยกเลิกหรือจบกลางคัน กำลัง reset step...")
            -- รีเซ็ตสถานะการเพิ่มไอเทม
            shroomAdded = false
            tokenAdded = false
            creatureAdded = false
            -- รีเซ็ตสถานะ sender tracking
            senderShroomStartTime = 0
            senderShroomRequested = false
            senderTokenStartTime = 0
            senderTokenRequested = false
            senderCreatureStartTime = 0
            senderCreatureRequested = false
            senderAcceptStartTime = 0
            senderAcceptRequested = false
            isSenderMainActive = false
            -- รีเซ็ตสถานะการส่งคำขอค้าง
            lastSentTargetName = nil
            lastSentTargetIsReceiver = false
            lastSentTime = 0
            step = 0
        end

        -- ตรวจสอบว่า SenderReceiver กำลังทำงานอยู่หรือไม่
        if isSenderReceiverActive then
            print(
                "⏸️ SenderReceiver กำลังทำงานอยู่ Main Sender รอสักครู่...")
            return 0
        end

        -- ตรวจสอบ coins ก่อน
        local coinsValue = LocalPlayer.Data.Coins.Value
        if coinsValue <= 20 then
            print("💰 Coins ไม่เพียงพอ (" .. coinsValue ..
                      " <= 20) ไม่ทำการเทรด")
            -- ถ้า coins ไม่เพียงพอ ให้ปลดล็อค main sender และรอ
            isSenderMainActive = false
            wait(10) -- รอ 10 วินาทีก่อนตรวจสอบใหม่
        else
            -- ถ้าส่งหา receiver ค้างไว้นานเกินกำหนด ให้ลองหา sender ที่ว่างแทน
            if lastSentTargetIsReceiver and lastSentTime > 0 then
                local elapsed = tick() - lastSentTime
                if elapsed >= SENDER_REQUEST_TIMEOUT then
                    print(
                        "⚠️ รอเริ่มเทรดกับ receiver (" ..
                            tostring(lastSentTargetName) ..
                            ") นานเกิน " .. SENDER_REQUEST_TIMEOUT ..
                            " วินาที กำลังหา sender แทน...")
                    local fallbackSender = FindAvailableSender()
                    if fallbackSender then
                        SendTradeRequest(fallbackSender.Name)
                        lastSentTargetName = fallbackSender.Name
                        lastSentTargetIsReceiver = false
                        lastSentTime = tick()
                        return 0
                    else
                        -- ปรับเวลาเพื่อหลีกเลี่ยงการ spam ตรวจซ้ำทันที
                        lastSentTime = tick()
                    end
                end
            end

            local validPartner = FindValidReceiver()
            if validPartner then
                SendTradeRequest(validPartner.Name)
                -- บันทึกสถานะเป้าหมายล่าสุดที่ส่งคำขอ
                lastSentTargetName = validPartner.Name
                lastSentTargetIsReceiver =
                    IsInList(validPartner.Name, RECEIVER_LIST)
                lastSentTime = tick()
            else
                -- ถ้าไม่มี partner ให้ปลดล็อค main sender
                isSenderMainActive = false
            end
        end
        return 0 -- reset step
    else
        -- กำลังเทรดอยู่
        -- เคลียร์สถานะการส่งคำขอค้างเมื่อเข้าสู่หน้าต่าง Trade จริง
        lastSentTargetName = nil
        lastSentTargetIsReceiver = false
        lastSentTime = 0
        if step == 0 then
            if CheckTradePartner() then
                print(
                    "🚀 เริ่มขั้นตอนที่ 1: Add Shroom")
                -- รีเซ็ตสถานะการเพิ่มไอเทมเมื่อเริ่มเทรดใหม่
                shroomAdded = false
                tokenAdded = false
                creatureAdded = false
                -- รีเซ็ตสถานะ sender tracking
                senderShroomStartTime = 0
                senderShroomRequested = false
                senderTokenStartTime = 0
                senderTokenRequested = false
                senderCreatureStartTime = 0
                senderCreatureRequested = false
                senderAcceptStartTime = 0
                senderAcceptRequested = false
                return 1
            end
        elseif step == 1 then
            if not LocalPlayer.PlayerGui.TradeGui.Enabled then
                print(
                    "TradeGui ถูกปิดระหว่าง AddShroom, reset step")
                return 0
            end
            -- Add Shroom - ใช้ state-based tracking
            if not senderShroomRequested then
                -- ตรวจสอบว่า remote กำลังใช้งานอยู่หรือไม่
                if isRemoteBusy then
                    print(
                        "⏳ Remote กำลังใช้งานอยู่ รอสักครู่...")
                    return 1
                else
                    print("🚀 เริ่ม Add Shroom...")
                    senderShroomRequested = true
                    senderShroomStartTime = tick()
                    isSenderMainActive = true -- ตั้ง active เมื่อเริ่มเทรดจริง
                    -- เรียก AddShroom แบบ synchronous และหยุด loop
                    print(
                        "⏸️ หยุด loop เพื่อรอ Add Shroom เสร็จ...")
                    local shroomSuccess = AddShroom()
                    if shroomSuccess then
                        shroomAdded = true
                        print("✅ Add Shroom เสร็จสิ้น")
                        print(
                            "🚀 เริ่มขั้นตอนที่ 2: Add Token")
                        return 2
                    else
                        print("❌ Add Shroom ล้มเหลว")
                        senderShroomRequested = false
                        isSenderMainActive = false
                        return 0
                    end
                end
            else
                -- ถ้า shroom ยังไม่เสร็จ แต่เวลาผ่านไปมากเกินไป
                local elapsedTime = tick() - senderShroomStartTime
                if elapsedTime >= 10 then
                    print(
                        "⚠️ Add Shroom ใช้เวลานานเกินไป กำลังข้ามไป step 2")
                    shroomAdded = true
                    return 2
                else
                    print("⏳ รอ Add Shroom เสร็จ... (" ..
                              string.format("%.1f", 10 - elapsedTime) ..
                              " วินาที)")
                    return 1
                end
            end
        elseif step == 2 then
            if not LocalPlayer.PlayerGui.TradeGui.Enabled then
                print(
                    "TradeGui ถูกปิดระหว่าง AddToken, reset step")
                return 0
            end
            -- Add Token - ใช้ state-based tracking
            if not senderTokenRequested then
                -- ตรวจสอบว่า remote กำลังใช้งานอยู่หรือไม่
                if isRemoteBusy then
                    print(
                        "⏳ Remote กำลังใช้งานอยู่ รอสักครู่...")
                    return 2
                else
                    print("🚀 เริ่ม Add Token...")
                    senderTokenRequested = true
                    senderTokenStartTime = tick()
                    -- เรียก AddToken แบบ synchronous และหยุด loop
                    print(
                        "⏸️ หยุด loop เพื่อรอ Add Token เสร็จ...")
                    local tokenSuccess = AddToken()
                    if tokenSuccess then
                        tokenAdded = true
                        print("✅ Add Token เสร็จสิ้น")
                        print(
                            "🚀 เริ่มขั้นตอนที่ 3: Add Creature")
                        return 3
                    else
                        print("❌ Add Token ล้มเหลว")
                        senderTokenRequested = false
                        return 0
                    end
                end
            else
                -- ถ้า token ยังไม่เสร็จ แต่เวลาผ่านไปมากเกินไป
                local elapsedTime = tick() - senderTokenStartTime
                if elapsedTime >= 30 then
                    print(
                        "⚠️ Add Token ใช้เวลานานเกินไป กำลังข้ามไป step 3")
                    tokenAdded = true
                    return 3
                else
                    print("⏳ รอ Add Token เสร็จ... (" ..
                              string.format("%.1f", 30 - elapsedTime) ..
                              " วินาที)")
                    return 2
                end
            end
        elseif step == 3 then
            if not LocalPlayer.PlayerGui.TradeGui.Enabled then
                print(
                    "TradeGui ถูกปิดระหว่าง AddCreature, reset step")
                return 0
            end
            -- Add Creature - ใช้ state-based tracking
            if not senderCreatureRequested then
                -- ตรวจสอบว่า remote กำลังใช้งานอยู่หรือไม่
                if isRemoteBusy then
                    print(
                        "⏳ Remote กำลังใช้งานอยู่ รอสักครู่...")
                    return 3
                else
                    print("🚀 เริ่ม Add Creature...")
                    senderCreatureRequested = true
                    senderCreatureStartTime = tick()
                    -- เรียก AddCreature แบบ synchronous และหยุด loop
                    print(
                        "⏸️ หยุด loop เพื่อรอ Add Creature เสร็จ...")
                    local creatureSuccess = AddCreature(false)
                    if creatureSuccess then
                        creatureAdded = true
                        print("✅ Add Creature เสร็จสิ้น")
                        print(
                            "🚀 เริ่มขั้นตอนที่ 4: Click Accept")
                        return 4
                    else
                        print("❌ Add Creature ล้มเหลว")
                        senderCreatureRequested = false
                        return 0
                    end
                end
            else
                -- ถ้า creature ยังไม่เสร็จ แต่เวลาผ่านไปมากเกินไป
                local elapsedTime = tick() - senderCreatureStartTime
                if elapsedTime >= 10 then
                    print(
                        "⚠️ Add Creature ใช้เวลานานเกินไป กำลังข้ามไป step 4")
                    creatureAdded = true
                    return 4
                else
                    print("⏳ รอ Add Creature เสร็จ... (" ..
                              string.format("%.1f", 10 - elapsedTime) ..
                              " วินาที)")
                    return 3
                end
            end
        elseif step == 4 then
            if not LocalPlayer.PlayerGui.TradeGui.Enabled then
                print(
                    "TradeGui ถูกปิดระหว่าง ClickAccept, reset step")
                return 0
            end
            -- Click Accept - ใช้ state-based tracking
            if not senderAcceptRequested then
                -- ตรวจสอบว่าทุกขั้นตอนเสร็จสิ้นแล้ว
                if shroomAdded and tokenAdded and creatureAdded then
                    print(
                        "🔍 ตรวจสอบสถานะ: Shroom=" ..
                            tostring(shroomAdded) .. ", Token=" ..
                            tostring(tokenAdded) .. ", Creature=" ..
                            tostring(creatureAdded))

                    -- ตรวจสอบว่า remote ยังใช้งานอยู่หรือไม่
                    if isRemoteBusy then
                        print(
                            "⚠️ Remote ยังใช้งานอยู่ ไม่สามารถกด accept ได้! รอสักครู่...")
                        return 4 -- ยังคงอยู่ใน step 4
                    end
                    print("🚀 เริ่ม Click Accept...")
                    senderAcceptRequested = true
                    senderAcceptStartTime = tick()
                    -- เรียก ClickAccept แบบ synchronous และหยุด loop
                    print(
                        "⏸️ หยุด loop เพื่อรอ Click Accept เสร็จ...")
                    local acceptSuccess = ClickAccept()
                    if acceptSuccess then
                        print("✅ เทรดเสร็จสิ้น")
                        -- รีเซ็ตสถานะการเพิ่มไอเทม
                        shroomAdded = false
                        tokenAdded = false
                        creatureAdded = false
                        -- รีเซ็ตสถานะ sender tracking
                        senderShroomStartTime = 0
                        senderShroomRequested = false
                        senderTokenStartTime = 0
                        senderTokenRequested = false
                        senderCreatureStartTime = 0
                        senderCreatureRequested = false
                        senderAcceptStartTime = 0
                        senderAcceptRequested = false
                        isSenderMainActive = false
                        return 0
                    else
                        print("❌ Click Accept ล้มเหลว")
                        senderAcceptRequested = false
                        return 0
                    end
                else
                    print(
                        "⚠️ ยังมีขั้นตอนที่ยังไม่เสร็จ: Shroom=" ..
                            tostring(shroomAdded) .. ", Token=" ..
                            tostring(tokenAdded) .. ", Creature=" ..
                            tostring(creatureAdded))
                    -- กลับไปทำขั้นตอนที่ยังไม่เสร็จ
                    if not shroomAdded then
                        print("🔄 กลับไปทำ Add Shroom")
                        return 1
                    elseif not tokenAdded then
                        print("🔄 กลับไปทำ Add Token")
                        return 2
                    elseif not creatureAdded then
                        print("🔄 กลับไปทำ Add Creature")
                        return 3
                    end
                end
            else
                -- ถ้า accept ยังไม่เสร็จ แต่เวลาผ่านไปมากเกินไป
                local elapsedTime = tick() - senderAcceptStartTime
                if elapsedTime >= 5 then
                    print(
                        "⚠️ Click Accept ใช้เวลานานเกินไป กำลังจบเทรด")
                    print("✅ เทรดเสร็จสิ้น")
                    -- รีเซ็ตสถานะการเพิ่มไอเทม
                    shroomAdded = false
                    tokenAdded = false
                    creatureAdded = false
                    -- รีเซ็ตสถานะ sender tracking
                    senderShroomStartTime = 0
                    senderShroomRequested = false
                    senderTokenStartTime = 0
                    senderTokenRequested = false
                    senderCreatureStartTime = 0
                    senderCreatureRequested = false
                    senderAcceptStartTime = 0
                    senderAcceptRequested = false
                    isSenderMainActive = false
                    return 0
                else
                    print("⏳ รอ Click Accept เสร็จ... (" ..
                              string.format("%.1f", 5 - elapsedTime) ..
                              " วินาที)")
                    return 4
                end
            end
        end
    end
    return step
end

-- เรียกใช้งานแบบ timer (ทุก 1 วินาที)
local function StartSenderStepLoop()
    spawn(function()
        while true do
            local success, err = pcall(function()
                local previousStep = currentStep
                currentStep = TradeStepHandlerSender(currentStep)

                -- ถ้า step เปลี่ยน แสดงว่าขั้นตอนเสร็จแล้ว
                if previousStep ~= currentStep then
                    print(
                        "🔄 ขั้นตอนเปลี่ยนจาก " ..
                            previousStep .. " เป็น " .. currentStep)
                end
            end)
            if not success then
                warn(
                    "❌ เกิดข้อผิดพลาดใน TradeStepHandlerSender: " ..
                        tostring(err))
                currentStep = 0
                -- รีเซ็ตสถานะ sender tracking
                senderShroomStartTime = 0
                senderShroomRequested = false
                senderTokenStartTime = 0
                senderTokenRequested = false
                senderCreatureStartTime = 0
                senderCreatureRequested = false
                senderAcceptStartTime = 0
                senderAcceptRequested = false
                isSenderMainActive = false
            end

            -- รอ 1 วินาทีแล้ววนใหม่
            wait(1)
        end
    end)
end

-- Coroutine สำหรับ Receiver แบบปลอดภัย
local function ReceiverCoroutine()
    while true do
        local success, error = pcall(function()
            -- ตรวจสอบ coins ก่อน
            local coinsValue = LocalPlayer.Data.Coins.Value
            if coinsValue <= 20 then
                print("💰 Coins ไม่เพียงพอ (" ..
                          coinsValue ..
                          " <= 20) Receiver ไม่ทำงาน")
                wait(10) -- รอ 10 วินาทีก่อนตรวจสอบใหม่
                return
            end

            -- ตรวจสอบ TradeGui อย่างปลอดภัย
            local tradeGuiEnabled = false
            local tradeGui = LocalPlayer.PlayerGui:FindFirstChild("TradeGui")
            if tradeGui then tradeGuiEnabled = tradeGui.Enabled end

            if not tradeGuiEnabled then
                -- รอ trade request
                AcceptTradeRequestReceiver()

                -- ตรวจสอบ timeout (เพิ่มใหม่)
                local timeSinceLastRequest = tick() - lastTradeRequestTime
                local timeRemaining = RECEIVER_TIMEOUT - timeSinceLastRequest

                if timeSinceLastRequest >= RECEIVER_TIMEOUT then
                    print(
                        "⚠️ Receiver ไม่ได้รับ trade request นาน " ..
                            string.format("%.1f", timeSinceLastRequest) ..
                            " วินาที (เกิน " ..
                            RECEIVER_TIMEOUT .. " วินาที)")
                    print(
                        "🔄 กำลังเปลี่ยนเซิร์ฟเวอร์เพื่อหาคู่เทรดใหม่...")

                    local success, error = pcall(function()
                        local TeleportService = game:GetService(
                                                    "TeleportService")
                        TeleportService:Teleport(14119723130)
                    end)

                    if not success then
                        warn(
                            "❌ เกิดข้อผิดพลาดในการเปลี่ยนเซิร์ฟเวอร์: " ..
                                tostring(error))
                        print(
                            "🚪 กำลังออกจากเกม...")
                        game:Shutdown()
                    end
                    return
                else
                    -- แสดงสถานะเวลาที่เหลือทุก 30 วินาที
                    if math.floor(timeSinceLastRequest) % 30 == 0 or
                        timeRemaining <= 60 then
                        print(
                            "⏰ Receiver รอ trade request... เหลือเวลาอีก " ..
                                string.format("%.0f", timeRemaining) ..
                                " วินาทีก่อนเปลี่ยนเซิร์ฟเวอร์")
                    end
                end

                -- รีเซ็ตสถานะเมื่อไม่ได้เทรด
                receiverCreatureStartTime = 0
                receiverCreatureRequested = false
                receiverAcceptStartTime = 0
                receiverAcceptRequested = false
                currentStepReceiver = 0
                wait(2)
            else
                -- กำลังเทรดอยู่
                if currentStepReceiver == 0 then
                    -- เช็คชื่อคู่เทรดก่อน
                    if CheckTradePartner() then
                        currentStepReceiver = 1
                        print(
                            "🚀 Receiver เริ่มขั้นตอนที่ 1: Add Creature")
                        -- รีเซ็ตสถานะก่อนเริ่มใหม่
                        receiverCreatureStartTime = 0
                        receiverCreatureRequested = false
                        receiverAcceptStartTime = 0
                        receiverAcceptRequested = false
                    else
                        wait(1)
                    end
                elseif currentStepReceiver == 1 then
                    -- Add Creature - ใช้ state-based tracking แบบปรับปรุง
                    if not receiverCreatureRequested then
                        -- ตรวจสอบว่า remote กำลังใช้งานอยู่หรือไม่
                        if isRemoteBusy then
                            print(
                                "⏳ Receiver: Remote กำลังใช้งานอยู่ รอสักครู่...")
                            wait(1)
                        else
                            print(
                                "🚀 Receiver เริ่ม Add Creature...")
                            receiverCreatureRequested = true
                            receiverCreatureStartTime = tick()

                            -- เรียก AddCreatureReceiver แบบ synchronous พร้อม error handling
                            local creatureSuccess = false
                            local attemptSuccess, attemptError = pcall(
                                                                     function()
                                    creatureSuccess = AddCreatureReceiver()
                                end)

                            if attemptSuccess and creatureSuccess then
                                print(
                                    "✅ Receiver Add Creature เสร็จสิ้น")
                                currentStepReceiver = 2
                                print(
                                    "🚀 Receiver เริ่มขั้นตอนที่ 2: Click Accept")
                            else
                                warn(
                                    "❌ Receiver Add Creature ล้มเหลว: " ..
                                        tostring(attemptError))
                                -- รีเซ็ตเพื่อลองใหม่
                                receiverCreatureRequested = false
                                receiverCreatureStartTime = 0
                                wait(2) -- รอก่อนลองใหม่
                            end
                        end
                    else
                        -- ตรวจสอบว่าผ่านไป 10 วินาทีแล้วหรือยัง (เพิ่มเวลา)
                        local elapsedTime = tick() - receiverCreatureStartTime
                        if elapsedTime >= 10 then
                            print(
                                "⚠️ Receiver Add Creature ใช้เวลานานเกินไป กำลังข้ามไป step 2")
                            currentStepReceiver = 2
                            print(
                                "🚀 Receiver เริ่มขั้นตอนที่ 2: Click Accept")
                        else
                            print(
                                "⏳ Receiver รอ Add Creature เสร็จ... (" ..
                                    string.format("%.1f", 10 - elapsedTime) ..
                                    " วินาที)")
                        end
                    end
                elseif currentStepReceiver == 2 then
                    -- Click Accept - ใช้ state-based tracking แบบปรับปรุง
                    if not receiverAcceptRequested then
                        -- ตรวจสอบว่า remote ยังใช้งานอยู่หรือไม่
                        if isRemoteBusy then
                            print(
                                "⚠️ Receiver: Remote ยังใช้งานอยู่ ไม่สามารถกด accept ได้! รอสักครู่...")
                            wait(1)
                        else
                            print(
                                "🚀 Receiver เริ่ม Click Accept...")
                            receiverAcceptRequested = true
                            receiverAcceptStartTime = tick()

                            -- เรียก ClickAcceptReceiver แบบ synchronous พร้อม error handling
                            local acceptSuccess = false
                            local attemptSuccess, attemptError = pcall(
                                                                     function()
                                    acceptSuccess = ClickAcceptReceiver()
                                end)

                            if attemptSuccess and acceptSuccess then
                                print(
                                    "✅ Receiver เทรดเสร็จสิ้น")
                                currentStepReceiver = 0
                                -- รีเซ็ตสถานะ
                                receiverCreatureStartTime = 0
                                receiverCreatureRequested = false
                                receiverAcceptStartTime = 0
                                receiverAcceptRequested = false
                            else
                                warn(
                                    "❌ Receiver Click Accept ล้มเหลว: " ..
                                        tostring(attemptError))
                                -- รีเซ็ตเพื่อลองใหม่
                                receiverAcceptRequested = false
                                receiverAcceptStartTime = 0
                                wait(2) -- รอก่อนลองใหม่
                            end
                        end
                    else
                        -- ตรวจสอบว่าผ่านไป 5 วินาทีแล้วหรือยัง (เพิ่มเวลา)
                        local elapsedTime = tick() - receiverAcceptStartTime
                        if elapsedTime >= 5 then
                            print(
                                "⚠️ Receiver Click Accept ใช้เวลานานเกินไป กำลังจบเทรด")
                            print(
                                "✅ Receiver เทรดเสร็จสิ้น")
                            currentStepReceiver = 0
                            -- รีเซ็ตสถานะ
                            receiverCreatureStartTime = 0
                            receiverCreatureRequested = false
                            receiverAcceptStartTime = 0
                            receiverAcceptRequested = false
                        else
                            print(
                                "⏳ Receiver รอ Click Accept เสร็จ... (" ..
                                    string.format("%.1f", 5 - elapsedTime) ..
                                    " วินาที)")
                        end
                    end
                end
                wait(1)
            end
        end)

        if not success then
            warn(
                "❌ เกิดข้อผิดพลาดใน ReceiverCoroutine: " ..
                    tostring(error))
            currentStepReceiver = 0
            -- รีเซ็ตสถานะ
            receiverCreatureStartTime = 0
            receiverCreatureRequested = false
            receiverAcceptStartTime = 0
            receiverAcceptRequested = false
            wait(5) -- รอ 5 วินาทีก่อนลองใหม่
        end
    end
end

-- Coroutine ปิดหน้าต่าง CreatureInventoryFrame อัตโนมัติ (ทำงานเบื้องหลังตลอดเวลา)
local function InventoryCloserCoroutine()
    spawn(function()
        while true do
            local success, error = pcall(function()
                local playerGui = LocalPlayer and LocalPlayer.PlayerGui
                if not playerGui then return end

                local tradeHudGui = playerGui:FindFirstChild("TradeHUDGui")
                if not tradeHudGui then return end

                local bottomFrame = tradeHudGui:FindFirstChild("BottomFrame")
                if not bottomFrame then return end

                local creatureInventoryFrame =
                    bottomFrame:FindFirstChild("CreatureInventoryFrame")
                if not creatureInventoryFrame then return end

                if creatureInventoryFrame.Visible == true then
                    local closeButton = creatureInventoryFrame:FindFirstChild(
                                            "CloseButton")
                    local upperLabel = closeButton and
                                           closeButton:FindFirstChild(
                                               "UpperLabel")
                    if upperLabel then
                        local safetyCounter = 0
                        while creatureInventoryFrame.Visible == true and
                            safetyCounter < 30 do
                            Clicked_Ui(upperLabel)
                            task.wait(0.1)
                            Click_NOW()
                            task.wait(0.2)
                            safetyCounter = safetyCounter + 1
                        end
                    end
                end
            end)
            if not success then
                warn(
                    "❌ เกิดข้อผิดพลาดใน InventoryCloserCoroutine: " ..
                        tostring(error))
            end
            wait(0.5)
        end
    end)
end

-- ฟังก์ชันหลัก
local function Main()
    local success, error = pcall(function()
        print("🎮 เริ่มต้นสคริปต์ Trade")

        -- วาร์ปไปยังตำแหน่งที่กำหนด (ทำงานใน background)
        task.spawn(WarpToLocation)

        -- เริ่ม coroutine ปิด CreatureInventoryFrame อัตโนมัติ
        InventoryCloserCoroutine()

        -- ตรวจสอบว่าเป็น Sender หรือ Receiver
        local isSender = IsInList(LocalPlayer.Name, SENDER_LIST)
        local isReceiver = IsInList(LocalPlayer.Name, RECEIVER_LIST)

        if isSender then
            print("👤 ทำงานในโหมด Sender")
            -- รีเซ็ตเวลาเริ่มต้นสำหรับ sender (สำหรับโหมด receiver) (เพิ่มใหม่)
            lastTradeRequestTime = tick()
            StartSenderStepLoop()
            -- เพิ่มการทำงานแบบ Receiver สำหรับ Sender
            coroutine.wrap(SenderReceiverCoroutine)()
        elseif isReceiver then
            print("👤 ทำงานในโหมด Receiver")
            -- รีเซ็ตเวลาเริ่มต้นสำหรับ receiver (เพิ่มใหม่)
            lastTradeRequestTime = tick()
            coroutine.wrap(ReceiverCoroutine)()
        else
            print(
                "❌ ชื่อผู้เล่นไม่ตรงกับรายชื่อใดๆ")
        end
    end)

    if not success then
        warn(
            "❌ เกิดข้อผิดพลาดในฟังก์ชันหลัก: " ..
                tostring(error))
        -- ลองรันใหม่หลังจาก 10 วินาที
        wait(10)
        Main()
    end
end

-- เริ่มต้นสคริปต์
Main()
